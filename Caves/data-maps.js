const TILE_DATA = {
    '#': {
        type: 'lore',
        message: 'An ancient, weathered stone stands here. The markings are faded.'
    },
    '‚òó': {
        type: 'lore',
        message: ['"...the king has fallen..."', '"...his castle to the west lies empty..."', '"...but a dark presence still lingers."']
    },
    '‚õ∞': {
        type: 'dungeon_entrance',
        getCaveId: (x, y) => `cave_${x}_${y}`
    },
    '>': {
        type: 'dungeon_exit'
    },
    'üè∞': {
        type: 'castle_entrance',
        getCastleId: (x, y) => `castle_${x}_${y}`
    },
    'X': {
        type: 'castle_exit'
    },
    'B': {
        type: 'lore',
        message: 'This is a bounty board, covered in notices.'
    },
    'L': {
        type: 'journal',
        title: 'The King\'s Lament',
        content: `Day 34 since the fall...\n\nThe stones of this castle weep. I hear them every night. The whispers tell of a power that sleeps beneath the mountains, a power we were foolish to awaken.\n\nMy knights are gone. My kingdom is ash. All that remains is this cursed immortality, a silent witness to my failure.`
    },
    'N': {
        type: 'npc',
        title: 'Villager'
    },
    '¬ß': {
        type: 'shop',
        title: 'General Store'
    },
    'H': {
        type: 'npc_healer',
        title: 'Healer'
    },
    'W': {
        type: 'workbench',
        title: 'Crafting Workbench'
    },
    'G': {
        type: 'npc_guard',
        title: 'Castle Guard'
    },
    'O': {
        type: 'npc_sage',
        title: 'Sage'
    },
    'T': {
        type: 'npc_skill_trainer',
        title: 'Skill Trainer'
    },
    'J': {
        type: 'journal',
        title: 'Orc War-Chant',
        content: `Blood and dust. Steel and bone.\n\nThe weak build with stone. The strong build with fear.\n\nWe come from the fire, we return to the ash. The mountain is our mother, the world our feast. Stomp the soft-skins. Take their steel. Raise the tusk-banner.\n\n...the rest is scrawled in a crude, unintelligible script.`
    },
    'üìò': {
        type: 'journal',
        title: 'Frozen Journal',
        content: `Day 12: The cold... it seeps into your bones. But the essence in these walls is worth a fortune. I must have more.\n\nDay 15: I saw one of them today. A... walking corpse, encased in ice. It didn't see me. My pickaxe feels heavy.\n\nDay 17: They are the old ones. The first warriors. The cold preserves them. Binds them. They guard the essence.\n\nDay ???: Can't feel my fingers. It's in my pack. I can't... I...`
    },
    'K': {
        type: 'npc_prospector',
        title: 'Lost Prospector'
    },
    'c': {
        type: 'canoe',
        title: 'A small canoe'
    },
    '‚ôõ': {
        type: 'landmark_castle',
        getCastleId: (x, y) => `castle_landmark_${x}_${y}`
    },
    'b': {
        type: 'enemy'
    },
    'w': {
        type: 'enemy'
    },
    'V': {
        type: 'village_entrance',
        getVillageId: (x, y) => `village_${x}_${y}`
    },
    '‚õ©Ô∏è': {
        type: 'shrine'
    },
    'üéì': {
        type: 'npc_historian',
        title: 'Royal Historian'
    },
    '|': {
        type: 'obelisk'
    },
    '¬•': {
        type: 'trader'
    },
    'üì¶': {
        type: 'loot_chest'
    },
    'üî•': {
        type: 'cooking_fire',
        flavor: "A crackling fire. Good for cooking."
    },
    'Œ©': {
        type: 'dungeon_entrance',
        getCaveId: (x, y) => `void_${x}_${y}`, // Creates a unique ID starting with "void_"
        flavor: "The reality tears open here. You hear whispers from the other side."
    },
    '‚à¥': {
        type: 'dig_spot',
        name: 'Loose Soil',
        flavor: "The earth here looks disturbed recently..."
    },
    'T': {
        type: 'decoration', // Dead Tree
    },
    '‚ö∞Ô∏è': {
        type: 'loot_container', // We'll treat this like a chest, but with specific flavor
        name: 'Ancient Grave',
        flavor: "You disturb the resting place of a forgotten warrior...",
        lootTable: ['(', '(', '‚Ä†', 'üë¢', 'üõ°Ô∏è', 'üíÄ'] // Bones, Daggers, Boots, Shields
    },
    'üóø': {
        type: 'lore_statue',
        message: [
            "The statue's face is worn away, but it still holds a bowl of fresh water.",
            "A statue of a weeping knight. The inscription reads: 'Duty is heavier than a mountain.'",
            "A crude idol made of mud and sticks. It smells of goblin musk.",
            "A statue of a woman holding a lantern. You feel safer standing near it."
        ]
    },
    'üè∫': {
        type: 'loot_container',
        name: 'Dusty Urn',
        flavor: "You smash the urn open...",
        lootTable: ['$', '$', 'gold_dust', 'ancient_coin', 'üíç']
    },
    'üï≥Ô∏è': {
        type: 'landmark_cave', // New type
        getCaveId: (x, y) => `cave_landmark`, // Fixed ID so it's always the same dungeon
        flavor: "A gaping abyss stares back at you. Cold air rushes up from the depths."
    },
    '‚õ∫': {
        type: 'campsite',
        flavor: "An abandoned campsite. The embers are still warm."
    },
    'üèõÔ∏è': {
        type: 'ruin',
        flavor: "The crumbling remains of an ancient library."
    },
    'üåø': {
        type: 'forage',
        item: 'Medicinal Herb'
    },
    'üï∏': {
        type: 'obstacle',
        name: 'Spider Web',
        tool: 'Machete',
        spell: 'fireball', // Fireball can burn it
        flavor: "A thick, sticky web blocks the path."
    },
    'üõ¢': {
        type: 'barrel',
        name: 'Oil Barrel',
        flavor: "Filled with volatile oil. Highly flammable."
    },
    'üèö': {
        type: 'obstacle',
        name: 'Cracked Wall',
        tool: 'Pickaxe',
        flavor: "The stone looks fractured and weak."
    },
    'üå≥': {
        type: 'obstacle',
        name: 'Thicket',
        tool: 'Machete',
        flavor: "A dense wall of thorny vines."
    },
    'üå≥e': {
        type: 'anomaly',
        name: 'Elder Tree',
        flavor: "A massive tree with silver bark. It hums with life."
    },
    'üóøk': {
        type: 'anomaly',
        name: 'Petrified Giant',
        flavor: "A boulder shaped like a weeping giant. Moss covers its eyes."
    },
    'ü¶¥d': { // Reusing bone icon for map tile
        type: 'anomaly',
        name: 'Dragon Skeleton',
        flavor: "The bleached ribs of a colossal beast rise from the sand."
    },
};

const CASTLE_LAYOUTS = {
    COURTYARD: {
        spawn: {
            x: 37,
            y: 32
        }, // Your original spawn point
        map: [
            '‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì',
            '‚ñì...................................................................‚ñì',
            '‚ñì...................................B...................................‚ñì',
            '‚ñì.....‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì.....‚ñì',
            '‚ñì.....‚ñì.....................‚ñì.......‚ñì.....................‚ñì.....‚ñì',
            '‚ñì.....‚ñì.....................‚ñì.......‚ñì.....................‚ñì.....‚ñì',
            '‚ñì.....‚ñì.....................‚ñì.......‚ñì...‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì...‚ñì.....‚ñì',
            '‚ñì.....‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì.......‚ñì...‚ñì.‚ñì...‚ñì.‚ñì...‚ñì.‚ñì...‚ñì.....‚ñì',
            '‚ñì...................................‚ñì...‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì...‚ñì.....‚ñì',
            '‚ñì...................................‚ñì.....................‚ñì.....‚ñì',
            '‚ñì...................................‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì.....‚ñì',
            '‚ñì...................................................................‚ñì',
            '‚ñì...................................................................‚ñì',
            '‚ñì...................................................................‚ñì',
            '‚ñì...................................................................‚ñì',
            '‚ñì....‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì.......................................‚ñì',
            '‚ñì....‚ñì...................‚ñì..........................................‚ñì',
            '‚ñì....‚ñì...‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì...‚ñì...‚ñì..........................................‚ñì',
            '‚ñì....‚ñì...‚ñì.‚ñì...‚ñì.‚ñì...‚ñì...‚ñì..........................................‚ñì',
            '‚ñì....‚ñì...‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì...‚ñì...‚ñì..........................................‚ñì',
            '‚ñì....‚ñì...................‚ñì..........................................‚ñì',
            '‚ñì....‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì..........................................‚ñì',
            '‚ñì...................................................................‚ñì',
            '‚ñì...................................................................‚ñì',
            '‚ñì...................................................................‚ñì',
            '‚ñì...................................................................‚ñì',
            '‚ñì...................................................................‚ñì',
            '‚ñì...................................................................‚ñì',
            '‚ñì...................................................................‚ñì',
            '‚ñì...................................................................‚ñì',
            '‚ñì...................................................................‚ñì',
            '‚ñì...................................................................‚ñì',
            '‚ñì...................................................................‚ñì',
            '‚ñì...................................................................‚ñì',
            '‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñìX‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì', // Exit
        ]
    },

    TOWER: {
        spawn: { x: 10, y: 18 },
        map: [
            '‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì',
            '‚ñì...................‚ñì',
            '‚ñì...‚ñì‚ñì‚ñì.............‚ñì',
            '‚ñì...‚ñì.‚ñì...‚ñì‚ñì‚ñì.......‚ñì',
            '‚ñì...‚ñì.‚ñì...‚ñì.‚ñì.......‚ñì',
            '‚ñì...‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì.......‚ñì',
            '‚ñì...................‚ñì',
            '‚ñì.........‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì',
            '‚ñì.........‚ñì.........‚ñì',
            '‚ñì.........‚ñì........‚ñì', // Note: This row in your original was also missing a space at the end
            '‚ñì.........‚ñì.........‚ñì',
            '‚ñì.........‚ñì...L.....‚ñì',
            '‚ñì.........‚ñì.........‚ñì',
            '‚ñì...‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì.......‚ñì',
            '‚ñì...‚ñì.O.‚ñì.......‚ñì...‚ñì', // Fixed width
            '‚ñì...‚ñì.üìÑ.‚ñì.......‚ñì...‚ñì', // Fixed width
            '‚ñì...‚ñì‚ñì‚ñì...‚ñì.......‚ñì...‚ñì', // Fixed width
            '‚ñì.............‚ñì.....‚ñì',
            '‚ñì.............X.....‚ñì',
            '‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñìT‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì'
        ]
    },

    FORTRESS: {
        spawn: {
            x: 4,
            y: 38
        }, // Spawns near the gate
        map: [
            '‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì',
            '‚ñì...............................................................................‚ñì',
            '‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì',
            '‚ñì...‚ñì.......................................................................‚ñì...‚ñì',
            '‚ñì...‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì...‚ñì...‚ñì',
            '‚ñì...‚ñì...‚ñì..........‚ñì...‚ñì.........................................‚ñì...‚ñì...‚ñì...‚ñì',
            '‚ñì...‚ñì...‚ñì..........‚ñì...‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì...‚ñì...‚ñì...‚ñì',
            '‚ñì...‚ñì...‚ñì..........‚ñì...‚ñì...‚ñì......‚ñì...‚ñì...‚ñì...‚ñì......‚ñì...‚ñì...‚ñì...‚ñì...‚ñì...‚ñì...‚ñì',
            '‚ñì...‚ñì...‚ñì..........‚ñì...‚ñì...‚ñì......‚ñì...‚ñì...‚ñì...‚ñì......‚ñì...‚ñì...‚ñì...‚ñì...‚ñì...‚ñì...‚ñì',
            '‚ñì...‚ñì...‚ñì..........‚ñì...‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì...‚ñì...‚ñì...‚ñì...‚ñì...‚ñì',
            '‚ñì...‚ñì...‚ñì..........‚ñì...‚ñì.........................................‚ñì...‚ñì...‚ñì...‚ñì',
            '‚ñì...‚ñì...‚ñì..........‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì...‚ñì...‚ñì',
            '‚ñì...‚ñì...‚ñì..........‚ñì...................................................‚ñì...‚ñì...‚ñì',
            '‚ñì...‚ñì...‚ñì..........‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì...‚ñì',
            '‚ñì...‚ñì...‚ñì.......................................................................‚ñì...‚ñì',
            '‚ñì...‚ñì...‚ñì.......................................................................‚ñì...‚ñì',
            '‚ñì...‚ñì...‚ñì.......................................................................‚ñì...‚ñì',
            '‚ñì...‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì',
            '‚ñì...‚ñì.............‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì',
            '‚ñì...‚ñì.............‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì',
            '‚ñì...‚ñì.............‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì',
            '‚ñì...‚ñì.............‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì',
            '‚ñì...‚ñì.............‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì',
            '‚ñì...‚ñì.............‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì',
            '‚ñì...‚ñì.............‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì',
            '‚ñì...‚ñì.............‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì',
            '‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì',
            '‚ñì...............................................................................‚ñì',
            '‚ñì...............................................................................‚ñì',
            '‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì',
            '‚ñì...‚ñì.......‚ñì...‚ñì.......‚ñì...‚ñì.......‚ñì...‚ñì.......‚ñì...‚ñì.......‚ñì...‚ñì.......‚ñì...‚ñì',
            '‚ñì...‚ñì...B...‚ñì...‚ñì.......‚ñì...‚ñì.......‚ñì...‚ñì.......‚ñì...‚ñì...$.....‚ñì...‚ñì...$.....‚ñì...‚ñì',
            '‚ñì...‚ñì.......‚ñì...‚ñì.......‚ñì...‚ñì.......‚ñì...‚ñì.......‚ñì...‚ñì.......‚ñì...‚ñì.......‚ñì...‚ñì',
            '‚ñì...‚ñì.......‚ñì...‚ñì.......‚ñì...‚ñì.......‚ñì...‚ñì.......‚ñì...‚ñì.......‚ñì...‚ñì.......‚ñì...‚ñì',
            '‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì',
            '‚ñì...............................................................................‚ñì',
            '‚ñì...............T.....................................................G.........‚ñì',
            '‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì',
            '‚ñì....X..........................................................................‚ñì', // Exit is here
            '‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì',
            '‚ñì...............‚ñì$‚ñì...............‚ñì',
            '‚ñì....W..........‚ñì$‚ñì....W..........‚ñì',
            '‚ñì...............‚ñì$‚ñì...............‚ñì',
            '‚ñì...............‚ñì‚ñì‚ñì...............‚ñì',
            '‚ñì.................................‚ñì',
            '‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì', // Bottom of the fortress
        ]
    },
    GRAND_FORTRESS: {
        spawn: {
            x: 4,
            y: 38
        }, // Same spawn as Fortress
        map: [
            // This is a copy of FORTRESS, with two new rooms added
            '‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì',
            '‚ñì...............................................................................‚ñì',
            '‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì',
            '‚ñì...‚ñì.......................................................................‚ñì...‚ñì',
            '‚ñì...‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì...‚ñì...‚ñì',
            '‚ñì...‚ñì...‚ñì..........‚ñì...‚ñì.........................................‚ñì...‚ñì...‚ñì...‚ñì',
            '‚ñì...‚ñì...‚ñì..........‚ñì...‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì...‚ñì...‚ñì...‚ñì',
            '‚ñì...‚ñì...‚ñì..........‚ñì...‚ñì...‚ñì......‚ñì...‚ñì...‚ñì...‚ñì......‚ñì...‚ñì...‚ñì...‚ñì...‚ñì...‚ñì...‚ñì',
            '‚ñì...‚ñì...‚ñì..........‚ñì...‚ñì...‚ñì......‚ñì...‚ñì...‚ñì...‚ñì......‚ñì...‚ñì...‚ñì...‚ñì...‚ñì...‚ñì...‚ñì',
            '‚ñì...‚ñì...‚ñì..........‚ñì...‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì...‚ñì...‚ñì...‚ñì...‚ñì...‚ñì',
            '‚ñì...‚ñì...‚ñì..........‚ñì...‚ñì.........................................‚ñì...‚ñì...‚ñì...‚ñì',
            '‚ñì...‚ñì...‚ñì..........‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì...‚ñì...‚ñì',
            '‚ñì...‚ñì...‚ñì..........‚ñì...................................................‚ñì...‚ñì...‚ñì',
            '‚ñì...‚ñì...‚ñì..........‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì...‚ñì',
            '‚ñì...‚ñì...‚ñì.......................................................................‚ñì...‚ñì',
            '‚ñì...‚ñì...‚ñì..................‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì.......................‚ñì...‚ñì',
            '‚ñì...‚ñì...‚ñì..................‚ñì.........B.........‚ñì.......‚ñì.......................‚ñì...‚ñì',
            '‚ñì...‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì...‚ñì.........‚ñì...L...‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì',
            '‚ñì...‚ñì.............‚ñì...‚ñì.........‚ñì...‚ñì.‚ñì...‚ñì.......‚ñì.......‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì',
            '‚ñì...‚ñì.............‚ñì...‚ñì.........‚ñì...‚ñì‚ñì‚ñì...‚ñì.......‚ñì..O....‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì',
            '‚ñì...‚ñì.............‚ñì...‚ñì.........‚ñì...‚ñì.‚ñì...‚ñì.......‚ñì.......‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì',
            '‚ñì...‚ñì.............‚ñì...‚ñì.........‚ñì...‚ñì.‚ñì...‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì',
            '‚ñì...‚ñì.............‚ñì...‚ñì.........‚ñì...‚ñì.‚ñì...‚ñì...‚ñì.....j.‚ñì...‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì',
            '‚ñì...‚ñì.............‚ñì...‚ñì.........‚ñì...‚ñì.‚ñì...‚ñì...‚ñì...üí™....‚ñì...‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì',
            '‚ñì...‚ñì.............‚ñì...‚ñì.........‚ñì...‚ñì.‚ñì...‚ñì...‚ñì.......‚ñì...‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì',
            '‚ñì...‚ñì.............‚ñì...‚ñì.........‚ñì...‚ñì.‚ñì...‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì...‚ñì.........‚ñì...‚ñì.........‚ñì...‚ñì',
            '‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì',
            '‚ñì...............................................................................‚ñì',
            '‚ñì.......................‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...............................‚ñì',
            '‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì.......$.......‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì...‚ñì',
            '‚ñì...‚ñì.......‚ñì...‚ñì.......‚ñì...‚ñì...$...$...$...‚ñì...‚ñì.......‚ñì...‚ñì.......‚ñì...‚ñì...‚ñì',
            '‚ñì...‚ñì...B...‚ñì...‚ñì.......‚ñì...‚ñì...$...B...$...‚ñì...‚ñì.......‚ñì...‚ñì.......‚ñì...‚ñì...‚ñì',
            '‚ñì...‚ñì.......‚ñì...‚ñì.......‚ñì...‚ñì...$...$...$...‚ñì...‚ñì.......‚ñì...‚ñì.......‚ñì...‚ñì...‚ñì',
            '‚ñì...‚ñì.......‚ñì...‚ñì.......‚ñì...‚ñì.......$.......‚ñì...‚ñì.......‚ñì...‚ñì.......‚ñì...‚ñì...‚ñì',
            '‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì...‚ñì',
            '‚ñì................................G...G..........................................‚ñì',
            '‚ñì...............................................................................‚ñì',
            '‚ñì‚ñì‚ñì‚ñì...‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì.‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì',
            '‚ñì....X..........................................................................‚ñì', // Exit is here
            '‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì...‚ñì',

            '‚ñì...............‚ñì$‚ñì...............‚ñì',
            '‚ñì...............‚ñì$‚ñì...............‚ñì',
            '‚ñì...............‚ñì$‚ñì...............‚ñì',
            '‚ñì...............‚ñì‚ñì‚ñì...............‚ñì',
            '‚ñì.................................‚ñì',
            '‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì', // Bottom of the fortress
        ]

    },

    SAFE_HAVEN: {
        spawn: { x: 15, y: 26 },
        map: [
            'F F F F F F F F F F F F F F F F F F F F F F F F F F F F F F',
            'F F F F F F F F F F F F F F F F F F F F F F F F F F F F F F',
            'F F üß±üß±üß±üß±üß± F F F F F F F F F F F F F üß±üß±üß±üß±üß± F F',
            'F F üß±.....üß± F F F F F F F F F F F F F üß±.....üß± F F',
            'F F üß±..H..üß± F F F F F F F F F F F F F üß±..¬ß..üß± F F',
            'F F üß±.....üß± F F F F F F F F F F F F F üß±.....üß± F F',
            'F F üß±üß±+üß±üß± F F F F F F F F F F F F F üß±üß±+üß±üß± F F',
            'F F F ... F F F F F F F F F F F F F F F F ... F F F',
            'F F F ... F F F F F F F F F F F F F F F F ... F F F',
            'F F F ... F F F üß±üß±üß±üß±üß±üß±üß± F F F F F ... F F F',
            'F F F ... F F F üß±...........üß± F F F F F ... F F F',
            'F F F ... F F F üß±...üî•.B...üß± F F F F F ... F F F',
            'F F F ... F F F üß±...........üß± F F F F F ... F F F',
            'F F F ... F F F üß±.....üéì.....üß± F F F F F ... F F F',
            'F F F ... F F F üß±üß±üß±...üß±üß±üß± F F F F F ... F F F',
            'F F F ... F F F F F F ... F F F F F F F F ... F F F',
            'F F F ... F F F F F F ... F F F F F F F F ... F F F',
            'F F üß±üß±+üß±üß± F F F F ... F F F F F F F üß±üß±+üß±üß± F F',
            'F F üß±.....üß± F F F F ... F F F F F F F üß±.....üß± F F',
            'F F üß±..R..üß± F F F F ... F F F F F F F üß±..T..üß± F F',
            'F F üß±.....üß± F F F F ... F F F F F F F üß±.....üß± F F',
            'F F üß±üß±üß±üß±üß± F F F F ... F F F F F F F üß±üß±üß±üß±üß± F F',
            'F F F F F F F F F F F ... F F F F F F F F F F F F F F',
            'F F F F F F F F F F F ... F F F F F F F F F F F F F F',
            'F F F F F F F F F F F ... F F F F F F F F F F F F F F',
            'F F F F F F F F F F F ... F F F F F F F F F F F F F F',
            'F F F F F F F F F F F .X. F F F F F F F F F F F F F F', // Exit
            'F F F F F F F F F F F F F F F F F F F F F F F F F F F',
        ]
    },

};

const CAVE_THEMES = {
    ROCK: {
        name: 'A Dark Cave',
        wall: '‚ñì',
        floor: '.',
        secretWall: '‚ñí',
        colors: {
            wall: '#422006',
            floor: '#a16207'
        },
        decorations: ['+', 'üîÆ', '$', 'üìñ', 'K', 'üèö'],
        enemies: ['g', 's', '@']
    },
    ICE: {
        name: 'A Glacial Cavern',
        wall: '‚ñí', // A lighter, "icy" wall
        secretWall: '‚ñì',
        floor: ':', // A "slick" floor
        colors: {
            wall: '#99f6e4',
            floor: '#e0f2fe'
        },
        enemies: ['s', 'w', 'Z', 'Y']
    },
    FIRE: {
        name: 'A Volcanic Fissure',
        wall: '‚ñì',
        secretWall: '‚ñí',
        floor: '.', // REVERT to '.' (Safe ground)
        colors: {
            wall: '#450a0a',
            floor: '#ef4444' // The '.' will still be painted Red
        },
        decorations: ['+', '$', 'üî•', 'J'],
        enemies: ['b', 'C', 'o', 'm', 'üë∫', 'f']
    },

    CRYPT: {
        name: 'A Musty Crypt',
        wall: '‚ñì', // Standard wall
        floor: '.', // Standard floor
        secretWall: '‚ñí',
        colors: {
            wall: '#374151', // Dark stone color
            floor: '#4b5563'  // Lighter, cold stone floor
        },
        decorations: ['+', '$', '(', '‚Ä†', 'üåÄ', 'üò±', 'üíÄ', 'üï∏'],
        enemies: ['s', 'Z', 'a']
    },

    CRYSTAL: {
        name: 'A Crystalline Tunnel',
        wall: '‚ñí', // Use the 'ice' wall, but colors will make it different
        secretWall: '‚ñì',
        floor: '.',
        colors: {
            wall: '#67e8f9', // Bright Cyan
            floor: '#22d3ee' // Darker Cyan
        },
        decorations: ['Y', 'üîÆ', '$', 'K'],
        enemies: ['g']
    },
    VOID: {
        name: 'The Void Sanctum',
        wall: '‚ñì',         // Solid Wall
        floor: '.',        // Floor
        phaseWall: '‚ñí',    // <--- Special "Fake" Wall
        colors: {
            wall: '#2e0249', // Deep Purple
            floor: '#0f0518' // Almost Black
        },
        decorations: ['‚ú®', 'üíÄ', 'Œ©'],
        enemies: ['v', 'a', 'm', 'v', 'D']
    },
    ABYSS: {
        name: 'The Maw',
        wall: '‚ñì',
        floor: '.',
        secretWall: '‚ñí',
        colors: {
            wall: '#0f0f0f', // Almost black
            floor: '#331133' // Dark purple
        },
        decorations: ['üíÄ', 'üï∏Ô∏è', 'üî•', 'Œ©', 'üíé', 'üï∏'], // Omegas and Gems!
        enemies: ['o', 'm', 'Z', 'üë∫', 'üê∫', 'scorpion', 'a'] // Only tough enemies
    },
    SUNKEN: {
        name: 'The Sunken Temple',
        wall: 'üß±',
        floor: '.', // REVERT to '.' (Wet Stone)
        secretWall: '‚ñí',
        colors: {
            wall: '#0e7490', // Cyan-Blue bricks
            floor: '#1e3a8a'  // Deep Blue floor (looks like wet stone)
        },
        decorations: ['üêü', 'üåø', 'üóø', 'ü¶Ä'],
        enemies: ['üê∏', 'üêç', 'l', 'ü¶ë']
    },
    GROTTO: {
        name: 'A Sunken Grotto',
        wall: '‚ñì', // Use standard 'rock' wall
        floor: ':', // Use 'ice' floor, but colors make it look slick/wet
        secretWall: '‚ñí',
        colors: {
            wall: '#14532d', // Dark Green
            floor: '#16a34a' // Bright Green
        },
        decorations: ['+', 'S', 'üîÆ', '‚ò£Ô∏è', 'üï∏'],
        enemies: ['g', 'w', '@']
    }
};

const CAVE_ROOM_TEMPLATES = {
    "Goblin Barracks": {
        width: 7,
        height: 7,
        map: [
            ' WWWWW ',
            'W.....W',
            'W.g.g.W',
            'W..üìï..W',
            'W.g.g.W',
            'W.....W',
            ' WWWWW '
        ]
    },
    "Skeleton Crypt": {
        width: 9,
        height: 7,
        map: [
            ' WWWWWWW ',
            'WW.....WW',
            'W...s...W',
            'W..s‚Ä†s..W', // Spawns a Bone Dagger!
            'W...s...W',
            'WW.....WW',
            ' WWWWWWW '
        ]
    },
    "Orc Stash": {
        width: 5,
        height: 5,
        map: [
            'WWWWW',
            'W.J.W', // Orc Journal
            'W.+o.W',
            'W.üìó.W',
            'WWWWW'
        ]
    },
    "Treasure Nook": {
        width: 3,
        height: 3,
        map: [
            'W‚òÖW',
            '$ $',
            'W‚òÜW'
        ]
    },
    "Flooded Grotto": {
        width: 9,
        height: 7,
        map: [
            ' WWWWWWW ',
            'W~~~~~~~W',
            'W~W...W~W',
            'W~W.S.W~W', // Stamina Crystal
            'W~W...W~W',
            'W~~~~~~~W',
            ' WWWWWWW '
        ]
    },
    "Bandit Stash": {
        width: 7,
        height: 7,
        map: [
            ' WWWWW ',
            'W.b.b.W',
            'W.<q<.W',
            'W..C..W', // Bandit Chief
            'W.$.$.W', // Gold
            'W.<...W',
            ' WWWWW '
        ]
    },
    "Abandoned Camp": {
        width: 5,
        height: 5,
        map: [
            'WWWWW',
            'W...W',
            'W.J.W', // A Journal
            'W.+üìÑ.W',
            'WWWWW'
        ]
    },
    "Acolyte's Nook": {
        width: 5,
        height: 5,
        map: [
            'WWWWW',
            'W...W',
            'W.a.W', // An Acolyte
            'W.j.W', // The new Journal
            'WWWWW'
        ]
    },
    "Champion's Crypt": {
        width: 7,
        height: 7,
        map: [
            ' WWWWW ',
            'W.<.<.W', // Traps!
            'W.....W',
            'W..s..W', // The Skeleton "Champion"
            'W..üí™..W', // Guards the Tome of Strength!
            'W.<.<.W', // More traps!
            ' WWWWW '
        ]
    }
};
