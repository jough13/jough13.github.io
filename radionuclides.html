<!DOCTYPE html>
<html lang="en">
<head>

    <!-- Basic HTML Metadata -->

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radionuclide Lookup Tool</title>

    <!-- External Libraries & Frameworks -->

    <!-- Tailwind CSS for styling -->

    <script src="https://cdn.tailwindcss.com"></script>
    <script>

        // Enables Tailwind's dark mode feature, allowing class-based theme switching (e.g., <body class="dark">)

        tailwind.config = { darkMode: 'class' }
    </script>
    
    <!-- React Libraries for building the user interface -->

    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel to transpile JSX (React's syntax) into plain JavaScript in the browser -->

    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Chart.js for creating data visualizations -->

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Google Fonts for a clean, modern typeface -->

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Custom Application Styles -->

    <style>

        /* Sets the default font for the entire application */

        body { font-family: 'Inter', sans-serif; }

        /* Custom scrollbar styling for a consistent look across browsers */

        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        .dark ::-webkit-scrollbar-track { background: #1e293b; }
        ::-webkit-scrollbar-thumb { background: #64748b; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }

        /* Keyframe animation for new elements fading into view */

        @keyframes fade-in {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in { animation: fade-in 0.3s ease-out forwards; }

        /* Keyframe animation for toast notifications sliding in from the bottom */

        @keyframes toast-in {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .animate-toast-in {
            animation: toast-in 0.3s ease-out forwards;
        }
    </style>
</head>

<body class="bg-slate-100 dark:bg-slate-900 transition-colors duration-300">

    <!-- The root element where the React application will be mounted. -->

    <div id="root"></div>

    <!-- 
      The primary dataset for all radionuclides.
      Keeping this in a separate script tag makes the main application logic cleaner and easier to manage.
      Each object conforms to a consistent structure for properties like name, symbol, halfLife, etc.
    -->

    <script>
        const RADIONUCLIDE_DATA = [

	     { name: 'Actinium-225', symbol: 'Ac-225', emissionType: ['Alpha', 'Gamma'], emissionEnergies: { alpha: ['5.83 MeV (dominant)'], gamma: ['0.099 MeV', '0.150 MeV'], beta: [] }, halfLife: '9.92 days', decayConstant: '0.0698 day⁻¹', specificActivity: '7.8 x 10^13 Bq/g', parent: 'Thorium-229 (α)', daughter: 'Francium-221 (α)', commonUses: ['Targeted Alpha Therapy (TAT) for cancer, often called an "alpha-emitter generator" for its decay chain.'], category: 'Medical', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
             { name: 'Actinium-227', emissionType: ['Beta-minus', 'Alpha', 'Gamma'], symbol: 'Ac-227', emissionEnergies: { beta: ['0.045 MeV (max)'], gamma: [], alpha: ['4.95 MeV'] }, halfLife: '21.77 years', decayConstant: '0.0318 year⁻¹', specificActivity: '9.7 x 10^11 Bq/g', parent: 'Protactinium-231', daughter: 'Thorium-227 (β) or Francium-223 (α)', commonUses: ['Actinium-225 generator (medical)', 'Research'], category: 'Medical', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Actinium-228', symbol: 'Ac-228', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['2.14 MeV (max)'], gamma: ['0.911 MeV', '0.969 MeV'], alpha: [] }, halfLife: '6.15 hours', decayConstant: '0.113 hour⁻¹', specificActivity: '1.2 x 10^17 Bq/g', parent: 'Radium-228', daughter: 'Thorium-228 (β-)', commonUses: ['Intermediate in Thorium-232 decay chain'], category: 'Natural', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Americium-241', symbol: 'Am-241', emissionType: ['Alpha', 'Gamma'], emissionEnergies: { alpha: ['5.486 MeV'], gamma: ['0.0595 MeV'], beta: [] }, halfLife: '432.2 years', decayConstant: '0.00160 year⁻¹', specificActivity: '1.27 x 10^11 Bq/g', parent: 'Plutonium-241 (β-)', daughter: 'Neptunium-237', commonUses: ['Smoke detectors', 'Industrial gauges (thickness, density)', 'Neutron sources'], category: 'Industrial', commonality: 'Common', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Antimony-124', symbol: 'Sb-124', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['2.35 MeV (max)'], gamma: ['0.603 MeV', '1.691 MeV'], alpha: [] }, halfLife: '60.2 days', decayConstant: '0.0115 day⁻¹', specificActivity: '7.8 x 10^14 Bq/g', parent: 'Tin-124', daughter: 'Tellurium-124 (stable)', commonUses: ['Tracer in hydrology', 'Industrial applications', 'Research'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Antimony-125', symbol: 'Sb-125', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['0.767 MeV (max)'], gamma: ['0.428 MeV', '0.601 MeV'], alpha: [] }, halfLife: '2.758 years', decayConstant: '0.251 year⁻¹', specificActivity: '1.6 x 10^13 Bq/g', parent: 'Tin-125', daughter: 'Tellurium-125m (IT) -> Tellurium-125 (stable)', commonUses: ['Environmental tracer (fission product)', 'Calibration source'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Arsenic-74', symbol: 'As-74', emissionType: ['Positron Emission', 'Beta-minus', 'Electron Capture', 'Gamma'], emissionEnergies: { beta: ['1.35 MeV (max)'], gamma: ['0.596 MeV', '0.511 MeV (annihilation)'], alpha: [] }, halfLife: '17.77 days', decayConstant: '0.039 day⁻¹', specificActivity: '5.1 x 10^15 Bq/g', parent: 'Germanium-74', daughter: 'Selenium-74 (stable) or Germanium-74 (stable)', commonUses: ['PET imaging research', 'Tracer studies'], category: 'Medical', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Astatine-211', symbol: 'At-211', emissionType: ['Alpha', 'Electron Capture', 'X-ray'], emissionEnergies: { alpha: ['5.867 MeV'], beta: [], gamma: [] }, halfLife: '7.21 hours', decayConstant: '0.096 hour⁻¹', specificActivity: '7.8 x 10^16 Bq/g', parent: 'Bismuth-209 (α,2n)', daughter: 'Bismuth-207 (EC) or Polonium-211 (α)', commonUses: ['Targeted alpha therapy research'], category: 'Medical', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Astatine-218', emissionType: ['Alpha', 'Beta-minus'], symbol: 'At-218', emissionEnergies: { alpha: ['6.757 MeV'], beta: ['2.88 MeV (max)'] }, halfLife: '1.5 seconds', decayConstant: '0.462 s⁻¹', specificActivity: '4.8 x 10^19 Bq/g', parent: 'Polonium-218', daughter: 'Bismuth-214 (α) or Radon-218 (β-)', commonUses: ['Intermediate in U-238 decay chain'], category: 'Natural', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Barium-133', symbol: 'Ba-133', emissionType: ['Electron Capture', 'Gamma', 'X-ray'], emissionEnergies: { beta: [], gamma: ['0.356 MeV', '0.081 MeV'], alpha: [] }, halfLife: '10.51 years', decayConstant: '0.0659 year⁻¹', gammaConstant: '0.30 R·m²/hr·Ci', specificActivity: '9.3 x 10^12 Bq/g', parent: 'Lanthanum-133', daughter: 'Cesium-133 (stable)', commonUses: ['Calibration sources', 'Density gauging'], category: 'Industrial', commonality: 'Moderate', sourceRef: { halfLife: 'nndc', gammaConstant: 'hps' } },
	     { name: 'Barium-137', symbol: 'Ba-137', emissionType: ['Stable'], emissionEnergies: { alpha: [], beta: [], gamma: [] }, halfLife: 'Stable', decayConstant: '0', specificActivity: '0 Bq/g', parent: 'Barium-137m (IT)', daughter: 'Stable', commonUses: ['Final stable product of Cesium-137 decay', 'Stable isotope analysis'], category: 'Stable/Reference', commonality: 'Common', sourceRef: {} },
	     { name: 'Barium-137m', symbol: 'Ba-137m', emissionType: ['Isomeric Transition', 'Gamma'], emissionEnergies: { alpha: [], beta: [], gamma: ['0.662 MeV'] }, halfLife: '2.55 minutes', decayConstant: '0.272 min⁻¹', specificActivity: '2.9 x 10^18 Bq/g', parent: 'Cesium-137 (β-)', daughter: 'Barium-137 (stable)', commonUses: ['Source of gamma rays from Cesium-137 calibration sources', 'Medical imaging (historical)'], category: 'Industrial', commonality: 'Common', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Bismuth-207', symbol: 'Bi-207', emissionType: ['Electron Capture', 'Positron Emission', 'Gamma'], emissionEnergies: { beta: [], gamma: ['0.570 MeV', '1.063 MeV'], alpha: [] }, halfLife: '31.55 years', decayConstant: '0.0219 year⁻¹', specificActivity: '2.07 x 10^12 Bq/g', parent: 'Lead-207 (p,n)', daughter: 'Lead-207 (stable)', commonUses: ['Calibration sources', 'Environmental tracer'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Bismuth-209', symbol: 'Bi-209', emissionType: ['Alpha'], emissionEnergies: { alpha: ['3.137 MeV'], beta: [], gamma: [] }, halfLife: '2.01 x 10¹⁹ years', decayConstant: '3.45 x 10⁻²⁰ year⁻¹', specificActivity: '0.001 Bq/g', parent: 'Primordial', daughter: 'Thallium-205 (stable)', commonUses: ['Considered stable for most practical purposes', 'Recently discovered to be radioactive'], category: 'Natural', commonality: 'Common', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Bismuth-210', emissionType: ['Beta-minus', 'Alpha'], symbol: 'Bi-210', emissionEnergies: { beta: ['1.16 MeV (max)'], alpha: ['5.03 MeV'], gamma: [] }, halfLife: '5.012 days', decayConstant: '0.138 day⁻¹', specificActivity: '9.6 x 10^15 Bq/g', parent: 'Lead-210', daughter: 'Polonium-210 (β-) or Thallium-206 (α)', commonUses: ['Intermediate in U-238 decay chain', 'Used in disequilibrium studies with Pb-210'], category: 'Natural', decaySeriesId: 'U-238-series', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Bismuth-211', emissionType: ['Alpha', 'Beta-minus', 'Gamma'], symbol: 'Bi-211', emissionEnergies: { alpha: ['6.623 MeV'], beta: ['0.579 MeV (max)'], gamma: ['0.351 MeV'] }, halfLife: '2.14 minutes', decayConstant: '0.324 min⁻¹', specificActivity: '3.4 x 10^18 Bq/g', parent: 'Lead-211', daughter: 'Thallium-207 (α) or Polonium-211 (β-)', commonUses: ['Intermediate in Actinium-227 decay series'], category: 'Natural', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Bismuth-212', emissionType: ['Beta-minus', 'Alpha', 'Gamma'], symbol: 'Bi-212', emissionEnergies: { beta: ['2.25 MeV (max)'], alpha: ['6.09 MeV'], gamma: ['0.727 MeV', '1.621 MeV'] }, halfLife: '60.55 minutes', decayConstant: '0.0114 min⁻¹', specificActivity: '1.2 x 10^17 Bq/g', parent: 'Lead-212', daughter: 'Polonium-212 (β-) or Thallium-208 (α)', commonUses: ['Research in targeted alpha/beta therapy'], category: 'Natural', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Bismuth-213', emissionType: ['Beta-minus', 'Alpha', 'Gamma'], symbol: 'Bi-213', emissionEnergies: { beta: ['1.42 MeV (max)'], alpha: ['5.87 MeV'], gamma: ['0.440 MeV'] }, halfLife: '45.6 minutes', decayConstant: '0.0152 min⁻¹', specificActivity: '1.09 x 10^17 Bq/g', parent: 'Actinium-225', daughter: 'Polonium-213 (β) or Thallium-209 (α)', commonUses: ['Targeted Alpha Therapy (TAT) for various cancers.'], category: 'Medical', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Bismuth-214', emissionType: ['Beta-minus', 'Alpha', 'Gamma'], symbol: 'Bi-214', emissionEnergies: { beta: ['3.27 MeV (max)'], gamma: ['0.609 MeV', '1.120 MeV', '1.764 MeV'], alpha: ['5.62 MeV'] }, halfLife: '19.9 minutes', decayConstant: '0.0348 min⁻¹', specificActivity: '3.6 x 10^17 Bq/g', parent: 'Lead-214', daughter: 'Polonium-214 (β-) / Thallium-210 (α)', commonUses: ['Source of natural background gamma radiation (from Radon decay products)'], category: 'Natural', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Bromine-77', symbol: 'Br-77', emissionType: ['Electron Capture', 'Gamma', 'X-ray'], emissionEnergies: { beta: [], gamma: ['0.239 MeV', '0.297 MeV'], alpha: [] }, halfLife: '57.04 hours', decayConstant: '0.0121 hour⁻¹', specificActivity: '1.2 x 10^16 Bq/g', parent: 'Krypton-77', daughter: 'Selenium-77 (stable)', commonUses: ['PET imaging research', 'Antibody labeling'], category: 'Medical', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Bromine-82', symbol: 'Br-82', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['0.444 MeV (max)'], gamma: ['0.777 MeV', '1.044 MeV'], alpha: [] }, halfLife: '35.3 hours', decayConstant: '0.0196 hour⁻¹', specificActivity: '1.6 x 10^16 Bq/g', parent: 'Selenium-82', daughter: 'Krypton-82 (stable)', commonUses: ['Hydrological tracing', 'Flow measurements in pipelines', 'Research'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Cadmium-109', symbol: 'Cd-109', emissionType: ['Electron Capture', 'X-ray'], emissionEnergies: { beta: [], gamma: ['0.088 MeV (γ)'], alpha: [] }, halfLife: '461.4 days', decayConstant: '0.00150 day⁻¹', specificActivity: '1.2 x 10^14 Bq/g', parent: 'Indium-109', daughter: 'Silver-109 (stable)', commonUses: ['X-ray fluorescence', 'Calibration source'], category: 'Industrial', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Cadmium-115m', symbol: 'Cd-115m', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['1.62 MeV (max)'], gamma: ['0.934 MeV'], alpha: [] }, halfLife: '44.6 days', decayConstant: '0.0155 day⁻¹', specificActivity: '1.3 x 10^15 Bq/g', parent: 'Silver-115', daughter: 'Indium-115', commonUses: ['Fission product', 'Research'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Calcium-45', symbol: 'Ca-45', emissionType: ['Beta-minus'], emissionEnergies: { beta: ['0.257 MeV (max)'], gamma: [], alpha: [] }, halfLife: '162.6 days', decayConstant: '0.00426 day⁻¹', specificActivity: '6.4 x 10^14 Bq/g', parent: 'Potassium-45', daughter: 'Scandium-45 (stable)', commonUses: ['Bone metabolism studies', 'Agricultural research'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Calcium-47', symbol: 'Ca-47', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['0.694 MeV (max)'], gamma: ['1.297 MeV'], alpha: [] }, halfLife: '4.536 days', decayConstant: '0.153 day⁻¹', specificActivity: '2.07 x 10^16 Bq/g', parent: 'Potassium-47', daughter: 'Scandium-47', commonUses: ['Bone metabolism research (historical)', 'Medical studies'], category: 'Medical', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Californium-252', symbol: 'Cf-252', emissionType: ['Alpha', 'Spontaneous Fission', 'Neutron', 'Gamma'], emissionEnergies: { alpha: ['6.118 MeV'], beta: [], gamma: ['~0.1-6 MeV (complex spectrum from fission)'] }, halfLife: '2.645 years', decayConstant: '0.262 year⁻¹', specificActivity: '2.0 x 10^13 Bq/g', parent: 'Curium-252', daughter: 'Curium-248 (α), Fission products', commonUses: ['Neutron source (neutron activation analysis)', 'Tumor treatment', 'Reactor startup', 'Well logging'], category: 'Industrial', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Carbon-11', symbol: 'C-11', emissionType: ['Positron Emission', 'Gamma'], emissionEnergies: { beta: ['0.960 MeV (max)'], gamma: ['0.511 MeV (annihilation)'], alpha: [] }, halfLife: '20.36 minutes', decayConstant: '0.0340 min⁻¹', specificActivity: '1.9 x 10^18 Bq/g', parent: 'Boron-11 (p,n)', daughter: 'Boron-11 (stable)', commonUses: ['PET imaging for various tracers (e.g., methionine for tumors)'], category: 'Medical', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Carbon-14', symbol: 'C-14', emissionType: ['Beta-minus'], emissionEnergies: { beta: ['0.156 MeV (max)'], gamma: [], alpha: [] }, halfLife: '5730 years', decayConstant: '1.21 x 10⁻⁴ year⁻¹', specificActivity: '1.65 x 10^11 Bq/g', parent: 'Nitrogen-14 (n,p)', daughter: 'Nitrogen-14 (stable)', commonUses: ['Radiometric dating (archeology, geology)', 'Tracers in biological and chemical research', 'Labeled compounds'], category: 'Industrial', commonality: 'Common', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Cerium-141', symbol: 'Ce-141', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['0.581 MeV (max)'], gamma: ['0.145 MeV'], alpha: [] }, halfLife: '32.5 days', decayConstant: '0.0213 day⁻¹', specificActivity: '1.09 x 10^15 Bq/g', parent: 'Lanthanum-141', daughter: 'Praseodymium-141 (stable)', commonUses: ['Fission product', 'Medical research (historical)', 'Environmental tracer'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Cerium-144', symbol: 'Ce-144', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['0.319 MeV (max)'], gamma: ['0.133 MeV'], alpha: [] }, halfLife: '284.9 days', decayConstant: '0.00243 day⁻¹', specificActivity: '1.18 x 10^14 Bq/g', parent: 'Lanthanum-144', daughter: 'Praseodymium-144 (β-)', commonUses: ['Fission product', 'Environmental tracer'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Cesium-134', symbol: 'Cs-134', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['0.658 MeV (max)'], gamma: ['0.605 MeV', '0.796 MeV'], alpha: [] }, halfLife: '2.065 years', decayConstant: '0.335 year⁻¹', specificActivity: '4.8 x 10^13 Bq/g', parent: 'Cesium-133 (n,γ)', daughter: 'Barium-134 (stable)', commonUses: ['Environmental tracer (fallout)', 'Calibration sources'], category: 'Industrial', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Cesium-137', symbol: 'Cs-137', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['0.512 MeV (max)', '1.174 MeV (max)'], gamma: ['0.662 MeV'], alpha: [] }, halfLife: '30.08 years', decayConstant: '0.0230 year⁻¹', gammaConstant: '0.33 R·m²/hr·Ci', specificActivity: '3.21 x 10^12 Bq/g', parent: 'Uranium Fission', daughter: 'Barium-137m (IT) -> Barium-137 (stable)', commonUses: ['Calibration sources', 'Industrial gauges (density, level)', 'Blood irradiators', 'Radiotherapy (historical)'], category: 'Industrial', commonality: 'Common', sourceRef: { halfLife: 'nndc', gammaConstant: 'hps' } },
	     { name: 'Cobalt-60', symbol: 'Co-60', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['0.318 MeV (max)'], gamma: ['1.173 MeV', '1.332 MeV'], alpha: [] }, halfLife: '5.27 years', decayConstant: '0.131 year⁻¹', gammaConstant: '1.32 R·m²/hr·Ci', specificActivity: '4.18 x 10^13 Bq/g', parent: 'Cobalt-59 (n,γ)', daughter: 'Nickel-60 (stable)', commonUses: ['Industrial radiography', 'Sterilization of medical equipment and food', 'Radiotherapy (external beam)', 'Tracers'], category: 'Industrial', commonality: 'Common', sourceRef: { halfLife: 'nndc', gammaConstant: 'hps' } },
	     { name: 'Copper-64', symbol: 'Cu-64', emissionType: ['Positron Emission', 'Beta-minus', 'Electron Capture', 'Gamma'], emissionEnergies: { beta: ['0.653 MeV (β+ max)', '0.579 MeV (β- max)'], gamma: ['1.345 MeV', '0.511 MeV (annihilation)'], alpha: [] }, halfLife: '12.7 hours', decayConstant: '0.0546 hour⁻¹', specificActivity: '1.74 x 10^17 Bq/g', parent: 'Nickel-64 (p,n)', daughter: 'Nickel-64 (stable) or Zinc-64 (stable)', commonUses: ['PET imaging (various applications)', 'Targeted radionuclide therapy research'], category: 'Medical', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Copper-67', symbol: 'Cu-67', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['0.576 MeV (max)'], gamma: ['0.185 MeV'], alpha: [] }, halfLife: '61.83 hours', decayConstant: '0.0112 hour⁻¹', specificActivity: '1.2 x 10^16 Bq/g', parent: 'Zinc-67 (n,p)', daughter: 'Zinc-67 (stable)', commonUses: ['Radioimmunotherapy, theranostic partner for Copper-64 PET imaging.'], category: 'Medical', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Curium-244', symbol: 'Cm-244', emissionType: ['Alpha', 'Gamma'], emissionEnergies: { alpha: ['5.805 MeV'], gamma: ['0.043 MeV'], beta: [] }, halfLife: '18.1 years', decayConstant: '0.0383 year⁻¹', specificActivity: '3.0 x 10^12 Bq/g', parent: 'Americium-244 (β-)', daughter: 'Plutonium-240', commonUses: ['Alpha particle X-ray spectrometers (APXS) for space exploration', 'Neutron sources'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Erbium-169', symbol: 'Er-169', emissionType: ['Beta-minus'], emissionEnergies: { beta: ['0.341 MeV (max)'], gamma: [], alpha: [] }, halfLife: '9.4 days', decayConstant: '0.0737 day⁻¹', specificActivity: '5.2 x 10^14 Bq/g', parent: 'Erbium-168 (n,γ)', daughter: 'Thulium-169 (stable)', commonUses: ['Radiation synovectomy for arthritis treatment.'], category: 'Medical', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Europium-152', symbol: 'Eu-152', emissionType: ['Beta-minus', 'Electron Capture', 'Positron Emission', 'Gamma'], emissionEnergies: { beta: ['1.48 MeV (max)'], gamma: ['0.122 MeV', '1.408 MeV'], alpha: [] }, halfLife: '13.54 years', decayConstant: '0.0512 year⁻¹', specificActivity: '6.4 x 10^12 Bq/g', parent: 'Samarium-152 (n,γ)', daughter: 'Samarium-152 (stable) or Gadolinium-152 (stable)', commonUses: ['Calibration sources for gamma spectroscopy', 'Research'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Europium-154', symbol: 'Eu-154', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['1.85 MeV (max)'], gamma: ['1.274 MeV', '0.723 MeV'], alpha: [] }, halfLife: '8.59 years', decayConstant: '0.0807 year⁻¹', specificActivity: '9.8 x 10^12 Bq/g', parent: 'Samarium-154 (n,γ)', daughter: 'Gadolinium-154 (stable)', commonUses: ['Environmental monitoring (fission product)', 'Calibration sources'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Fluorine-18', symbol: 'F-18', emissionType: ['Positron Emission'], emissionEnergies: { beta: ['0.6335 MeV (max)'], gamma: ['0.511 MeV (annihilation)'], alpha: [] }, halfLife: '109.7 minutes', decayConstant: '0.00632 min⁻¹', specificActivity: '3.5 x 10^18 Bq/g', parent: 'Oxygen-18 (p,n)', daughter: 'Oxygen-18 (stable)', commonUses: ['PET imaging (Positron Emission Tomography)', 'Most common PET radioisotope, particularly for FDG (Fluorodeoxyglucose) scans'], category: 'Medical', commonality: 'Common', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Fluorine-19', symbol: 'F-19', emissionType: ['Stable'], emissionEnergies: { beta: [], gamma: [], alpha: [] }, halfLife: 'Stable', decayConstant: '0', parent: 'Stable', daughter: 'Stable', commonUses: ['NMR', 'Fluorinated compounds (not a radionuclide use)'], category: 'Stable/Reference', commonality: 'N/A' },
	     { name: 'Gadolinium-153', symbol: 'Gd-153', emissionType: ['Electron Capture', 'Gamma', 'X-ray'], emissionEnergies: { beta: [], gamma: ['0.097 MeV', '0.103 MeV'], alpha: [] }, halfLife: '240.4 days', decayConstant: '0.00288 day⁻¹', specificActivity: '1.3 x 10^14 Bq/g', parent: 'Europium-153 (n,γ)', daughter: 'Europium-153 (stable)', commonUses: ['Bone densitometry', 'X-ray absorption measurements', 'Calibration sources'], category: 'Industrial', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Gadolinium-159', symbol: 'Gd-159', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['0.970 MeV (max)'], gamma: ['0.363 MeV'], alpha: [] }, halfLife: '18.48 hours', decayConstant: '0.0375 hour⁻¹', specificActivity: '3.6 x 10^16 Bq/g', parent: 'Europium-159', daughter: 'Terbium-159 (stable)', commonUses: ['Boron Neutron Capture Therapy (BNCT) research'], category: 'Medical', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Gallium-67', symbol: 'Ga-67', emissionType: ['Electron Capture', 'Gamma', 'X-ray'], emissionEnergies: { beta: [], gamma: ['0.093 MeV', '0.185 MeV', '0.300 MeV'], alpha: [] }, halfLife: '3.26 days', decayConstant: '0.213 day⁻¹', specificActivity: '3.8 x 10^15 Bq/g', parent: 'Zinc-67 (p,n)', daughter: 'Zinc-67 (stable)', commonUses: ['Tumor imaging (lymphomas, lung cancer)', 'Infection imaging', 'Inflammation imaging'], category: 'Medical', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Gallium-68', symbol: 'Ga-68', emissionType: ['Positron Emission', 'Gamma'], emissionEnergies: { beta: ['1.90 MeV (max)'], gamma: ['0.511 MeV (annihilation)'], alpha: [] }, halfLife: '67.71 minutes', decayConstant: '0.0102 min⁻¹', specificActivity: '1.45 x 10^17 Bq/g', parent: 'Germanium-68', daughter: 'Zinc-68 (stable)', commonUses: ['PET imaging, especially with DOTATATE/DOTATOC for neuroendocrine tumors'], category: 'Medical', commonality: 'Common', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Germanium-68', symbol: 'Ge-68', emissionType: ['Electron Capture', 'X-ray'], emissionEnergies: { beta: [], gamma: [], alpha: [] }, halfLife: '270.95 days', decayConstant: '0.00256 day⁻¹', specificActivity: '2.8 x 10^14 Bq/g', parent: 'Arsenic-68', daughter: 'Gallium-68 (EC, β+)', commonUses: ['Generator for Ga-68 (PET imaging)'], category: 'Medical', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Gold-195m', symbol: 'Au-195m', emissionType: ['Isomeric Transition', 'Gamma', 'X-ray'], emissionEnergies: { beta: [], gamma: ['0.262 MeV'], alpha: [] }, halfLife: '30.5 seconds', decayConstant: '0.0227 s⁻¹', specificActivity: '1.5 x 10^18 Bq/g', parent: 'Mercury-195m', daughter: 'Gold-195', commonUses: ['Cardiac blood flow imaging (historical)'], category: 'Medical', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Gold-198', symbol: 'Au-198', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['0.961 MeV (max)'], gamma: ['0.412 MeV'], alpha: [] }, halfLife: '2.695 days', decayConstant: '0.257 day⁻¹', specificActivity: '9.3 x 10^15 Bq/g', parent: 'Gold-197 (n,γ)', daughter: 'Mercury-198 (stable)', commonUses: ['Radiotherapy (brachytherapy)', 'Tracers', 'Industrial applications'], category: 'Industrial', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Holmium-166', symbol: 'Ho-166', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['1.854 MeV (max)'], gamma: ['0.080 MeV'], alpha: [] }, halfLife: '26.8 hours', decayConstant: '0.0258 hour⁻¹', specificActivity: '2.5 x 10^16 Bq/g', parent: 'Holmium-165 (n,γ)', daughter: 'Erbium-166 (stable)', commonUses: ['Radiotherapy for liver tumors, bone pain palliation, radiosynovectomy.'], category: 'Medical', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Indium-111', symbol: 'In-111', emissionType: ['Electron Capture', 'Gamma', 'X-ray'], emissionEnergies: { beta: [], gamma: ['0.171 MeV', '0.245 MeV'], alpha: [] }, halfLife: '2.80 days', decayConstant: '0.247 day⁻¹', specificActivity: '2.6 x 10^16 Bq/g', parent: 'Cadmium-111 (p,n)', daughter: 'Cadmium-111 (stable)', commonUses: ['White blood cell labeling (infection imaging)', 'Tumor imaging', 'CSF flow studies'], category: 'Medical', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Indium-113m', symbol: 'In-113m', emissionType: ['Isomeric Transition', 'Gamma'], emissionEnergies: { beta: [], gamma: ['0.392 MeV'], alpha: [] }, halfLife: '1.658 hours', decayConstant: '0.418 hour⁻¹', specificActivity: '4.1 x 10^17 Bq/g', parent: 'Tin-113', daughter: 'Indium-113 (stable)', commonUses: ['Medical diagnostic imaging (historical)'], category: 'Medical', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Indium-115', symbol: 'In-115', emissionType: ['Beta-minus'], emissionEnergies: { beta: ['0.499 MeV (max)'], gamma: [], alpha: [] }, halfLife: '4.41 x 10¹⁴ years', decayConstant: '1.57 x 10⁻¹⁵ year⁻¹', specificActivity: '2.6 x 10^2 Bq/g', parent: 'Primordial', daughter: 'Tin-115 (stable)', commonUses: ['Neutrino mass experiments', 'Research (extremely weak activity)'], category: 'Natural', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Iodine-123', symbol: 'I-123', emissionType: ['Electron Capture', 'Gamma'], emissionEnergies: { beta: [], gamma: ['0.159 MeV'], alpha: [] }, halfLife: '13.22 hours', decayConstant: '0.0524 hour⁻¹', specificActivity: '7.4 x 10^16 Bq/g', parent: 'Xenon-123', daughter: 'Tellurium-123 (stable)', commonUses: ['SPECT imaging for thyroid function and tumors', 'Cardiac and neurological imaging'], category: 'Medical', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Iodine-125', symbol: 'I-125', emissionType: ['Electron Capture', 'X-ray', 'Gamma'], emissionEnergies: { beta: [], gamma: ['0.0355 MeV'], alpha: [] }, halfLife: '59.4 days', decayConstant: '0.0117 day⁻¹', specificActivity: '6.4 x 10^14 Bq/g', parent: 'Xenon-125', daughter: 'Tellurium-125 (stable)', commonUses: ['Brachytherapy (prostate cancer)', 'Radioimmunoassay', 'Bone mineral density (historical)'], category: 'Medical', commonality: 'Common', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Iodine-129', symbol: 'I-129', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['0.154 MeV (max)'], gamma: ['0.039 MeV'], alpha: [] }, halfLife: '16.1 million years', decayConstant: '4.31 x 10⁻⁸ year⁻¹', specificActivity: '6.54 x 10^6 Bq/g', parent: 'Tellurium-129 (β-)', daughter: 'Xenon-129 (stable)', commonUses: ['Environmental tracer (long-lived fission product)', 'Geological dating'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Iodine-131', symbol: 'I-131', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['0.606 MeV (max)'], gamma: ['0.364 MeV (dominant)'], alpha: [] }, halfLife: '8.02 days', decayConstant: '0.0864 day⁻¹', gammaConstant: '0.22 R·m²/hr·Ci', specificActivity: '4.6 x 10^15 Bq/g', parent: 'Tellurium-131', daughter: 'Xenon-131 (stable)', commonUses: ['Diagnosis and treatment of thyroid cancer and hyperthyroidism', 'Medical imaging (diagnostic tracer)'], category: 'Medical', commonality: 'Common', sourceRef: { halfLife: 'nndc', decayConstant: 'nndc', gammaConstant: 'hps' } },
	     { name: 'Iridium-192', symbol: 'Ir-192', emissionType: ['Beta-minus', 'Electron Capture', 'Gamma'], emissionEnergies: { beta: ['0.672 MeV (max)'], gamma: ['0.317 MeV', '0.468 MeV'], alpha: [] }, halfLife: '73.83 days', decayConstant: '0.00939 day⁻¹', gammaConstant: '0.48 R·m²/hr·Ci', specificActivity: '3.41 x 10^14 Bq/g', parent: 'Iridium-191 (n,γ)', daughter: 'Platinum-192 (stable) / Osmium-192 (stable)', commonUses: ['High-dose-rate (HDR) brachytherapy', 'Industrial gamma radiography'], category: 'Industrial', commonality: 'Moderate', sourceRef: { halfLife: 'nndc', gammaConstant: 'hps' } },
	     { name: 'Iron-52', symbol: 'Fe-52', emissionType: ['Positron Emission', 'Electron Capture', 'Gamma'], emissionEnergies: { beta: ['0.804 MeV (max)'], gamma: ['0.169 MeV'], alpha: [] }, halfLife: '8.275 hours', decayConstant: '0.0838 hour⁻¹', specificActivity: '1.2 x 10^17 Bq/g', parent: 'Manganese-52m', daughter: 'Manganese-52', commonUses: ['PET imaging research (bone marrow imaging, iron metabolism)'], category: 'Medical', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Iron-55', symbol: 'Fe-55', emissionType: ['Electron Capture', 'X-ray'], emissionEnergies: { beta: [], gamma: ['0.0059 MeV (X-ray)'], alpha: [] }, halfLife: '2.73 years', decayConstant: '0.254 year⁻¹', specificActivity: '8.4 x 10^13 Bq/g', parent: 'Manganese-55 (p,n)', daughter: 'Manganese-55 (stable)', commonUses: ['X-ray fluorescence sources', 'Electron capture detectors', 'Research'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Iron-59', symbol: 'Fe-59', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['0.475 MeV (max)'], gamma: ['1.099 MeV', '1.292 MeV'], alpha: [] }, halfLife: '44.5 days', decayConstant: '0.0156 day⁻¹', specificActivity: '1.87 x 10^15 Bq/g', parent: 'Iron-58 (n,γ)', daughter: 'Cobalt-59 (stable)', commonUses: ['Red blood cell studies', 'Iron metabolism research', 'Industrial tracers'], category: 'Medical', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Krypton-79', symbol: 'Kr-79', emissionType: ['Positron Emission', 'Electron Capture', 'Gamma'], emissionEnergies: { beta: ['0.604 MeV (max)'], gamma: ['0.261 MeV', '0.398 MeV'], alpha: [] }, halfLife: '35.04 hours', decayConstant: '0.0198 hour⁻¹', specificActivity: '1.7 x 10^16 Bq/g', parent: 'Bromine-79', daughter: 'Bromine-79 (stable)', commonUses: ['Lung ventilation studies (PET)', 'Research'], category: 'Medical', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Krypton-81m', symbol: 'Kr-81m', emissionType: ['Gamma', 'Isomeric Transition'], emissionEnergies: { beta: [], gamma: ['0.190 MeV'], alpha: [] }, halfLife: '13.1 seconds', decayConstant: '0.0529 s⁻¹', specificActivity: '4.85 x 10^18 Bq/g', parent: 'Rubidium-81', daughter: 'Krypton-81', commonUses: ['Lung ventilation studies (very short half-life allows for repeated scans)'], category: 'Medical', commonality: 'Common', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Krypton-85', symbol: 'Kr-85', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['0.687 MeV (max)'], gamma: ['0.514 MeV'], alpha: [] }, halfLife: '10.76 years', decayConstant: '0.0644 year⁻¹', specificActivity: '1.45 x 10^13 Bq/g', parent: 'Uranium Fission', daughter: 'Rubidium-85 (stable)', commonUses: ['Atmospheric tracer', 'Industrial applications (leak detection, gauging)'], category: 'Industrial', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Lanthanum-140', symbol: 'La-140', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['1.68 MeV (max)'], gamma: ['1.596 MeV', '0.816 MeV', '0.487 MeV'], alpha: [] }, halfLife: '1.678 days', decayConstant: '0.413 day⁻¹', specificActivity: '2.07 x 10^16 Bq/g', parent: 'Barium-140', daughter: 'Cerium-140 (stable)', commonUses: ['Fission product', 'Research tracer'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Lead-206', symbol: 'Pb-206', emissionType: ['Stable'], emissionEnergies: { beta: [], gamma: [], alpha: [] }, halfLife: 'Stable', decayConstant: '0', parent: 'Polonium-210', daughter: 'Stable', commonUses: ['Final stable product of U-238 decay series', 'Geological dating'], category: 'Stable/Reference', commonality: 'N/A' },
	     { name: 'Lead-207', symbol: 'Pb-207', emissionType: ['Stable'], emissionEnergies: { beta: [], gamma: [], alpha: [] }, halfLife: 'Stable', decayConstant: '0', parent: 'Polonium-211', daughter: 'Stable', commonUses: ['Final stable product of U-235 decay series', 'Geological dating'], category: 'Stable/Reference', commonality: 'N/A' },
	     { name: 'Lead-208', symbol: 'Pb-208', emissionType: ['Stable'], emissionEnergies: { beta: [], gamma: [], alpha: [] }, halfLife: 'Stable', decayConstant: '0', parent: 'Thallium-208', daughter: 'Stable', commonUses: ['Final stable product of Th-232 decay series', 'Geological dating'], category: 'Stable/Reference', commonality: 'N/A' },
	     { name: 'Lead-210', symbol: 'Pb-210', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['0.063 MeV (max)'], gamma: ['0.0465 MeV'], alpha: [] }, halfLife: '22.23 years', decayConstant: '0.0312 year⁻¹', specificActivity: '2.8 x 10^12 Bq/g', parent: 'Polonium-214 (α)', daughter: 'Bismuth-210 (β-)', commonUses: ['Environmental tracers', 'Dating sediments and ice cores', 'Bone dosimetry'], category: 'Natural', commonality: 'Common', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Lead-211', symbol: 'Pb-211', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['1.36 MeV (max)'], gamma: ['0.405 MeV'], alpha: [] }, halfLife: '36.1 minutes', decayConstant: '0.0192 min⁻¹', specificActivity: '2.0 x 10^17 Bq/g', parent: 'Polonium-215', daughter: 'Bismuth-211 (β-)', commonUses: ['Intermediate in Actinium-227 decay series'], category: 'Natural', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Lead-212', symbol: 'Pb-212', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['0.570 MeV (max)'], gamma: ['0.238 MeV', '0.300 MeV'], alpha: [] }, halfLife: '10.64 hours', decayConstant: '0.0651 hour⁻¹', specificActivity: '6.9 x 10^16 Bq/g', parent: 'Polonium-216 (α)', daughter: 'Bismuth-212 (β-)', commonUses: ['Intermediate in Thorium-232 decay series', 'Research'], category: 'Natural', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Lead-214', symbol: 'Pb-214', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['1.02 MeV (max)'], gamma: ['0.295 MeV', '0.352 MeV'], alpha: [] }, halfLife: '26.8 minutes', decayConstant: '0.0259 min⁻¹', specificActivity: '2.7 x 10^17 Bq/g', parent: 'Polonium-218 (α)', daughter: 'Bismuth-214 (β-)', commonUses: ['Intermediate in Radon-222 decay chain', 'Environmental monitoring'], category: 'Natural', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Lutetium-176', symbol: 'Lu-176', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['0.593 MeV (max)'], gamma: ['0.202 MeV', '0.307 MeV'], alpha: [] }, halfLife: '3.78 x 10¹⁰ years', decayConstant: '1.83 x 10⁻¹¹ year⁻¹', specificActivity: '2.0 x 10^6 Bq/g', parent: 'Primordial', daughter: 'Hafnium-176 (stable)', commonUses: ['Lutetium-Hafnium dating (geological)', 'Research'], category: 'Natural', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Lutetium-177', symbol: 'Lu-177', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['0.498 MeV (max)'], gamma: ['0.113 MeV', '0.208 MeV'], alpha: [] }, halfLife: '6.647 days', decayConstant: '0.104 day⁻¹', specificActivity: '3.9 x 10^14 Bq/g', parent: 'Ytterbium-176 (n,γ)', daughter: 'Hafnium-177 (stable)', commonUses: ['Peptide receptor radionuclide therapy (PRRT) for neuroendocrine tumors'], category: 'Medical', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Manganese-54', symbol: 'Mn-54', emissionType: ['Electron Capture', 'Gamma'], emissionEnergies: { beta: [], gamma: ['0.835 MeV'], alpha: [] }, halfLife: '312.1 days', decayConstant: '0.00222 day⁻¹', gammaConstant: '0.47 R·m²/hr·Ci', specificActivity: '2.56 x 10^14 Bq/g', parent: 'Iron-54 (d,2n)', daughter: 'Chromium-54 (stable)', commonUses: ['Calibration sources', 'Environmental tracer'], category: 'Industrial', commonality: 'Moderate', sourceRef: { halfLife: 'nndc', gammaConstant: 'hps' } },
	     { name: 'Molybdenum-99', symbol: 'Mo-99', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['1.214 MeV (max)'], gamma: ['0.739 MeV', '0.181 MeV'], alpha: [] }, halfLife: '65.94 hours', decayConstant: '0.0105 hour⁻¹', specificActivity: '1.77 x 10^16 Bq/g', parent: 'Uranium-235 Fission', daughter: 'Technetium-99m', commonUses: ['Generator for Technetium-99m, the most widely used medical radioisotope.'], category: 'Medical', commonality: 'Common', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Neptunium-237', symbol: 'Np-237', emissionType: ['Alpha', 'Gamma'], emissionEnergies: { alpha: ['4.788 MeV'], beta: [], gamma: ['0.029 MeV', '0.086 MeV'] }, halfLife: '2.144 million years', decayConstant: '3.23 x 10⁻⁷ year⁻¹', specificActivity: '2.6 x 10^7 Bq/g', parent: 'Americium-241 (α)', daughter: 'Protactinium-233 (α)', commonUses: ['Intermediate in Neptunium series decay', 'Nuclear waste studies'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Nickel-56', symbol: 'Ni-56', emissionType: ['Electron Capture', 'Gamma'], emissionEnergies: { beta: [], gamma: ['0.158 MeV', '0.812 MeV'], alpha: [] }, halfLife: '6.075 days', decayConstant: '0.114 day⁻¹', specificActivity: '1.38 x 10^16 Bq/g', parent: 'Zinc-56', daughter: 'Cobalt-56', commonUses: ['Supernova studies (astrophysics)', 'Research'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Nickel-59', symbol: 'Ni-59', emissionType: ['Electron Capture', 'X-ray'], emissionEnergies: { beta: [], gamma: [], alpha: [] }, halfLife: '76,000 years', decayConstant: '9.12 x 10⁻⁶ year⁻¹', specificActivity: '1.03 x 10^9 Bq/g', parent: 'Copper-59', daughter: 'Cobalt-59 (stable)', commonUses: ['Neutron activation product (long-lived)', 'Geological dating (historical)', 'Research'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Nickel-63', symbol: 'Ni-63', emissionType: ['Beta-minus'], emissionEnergies: { beta: ['0.0669 MeV (max)'], gamma: [], alpha: [] }, halfLife: '100.1 years', decayConstant: '0.00692 year⁻¹', specificActivity: '2.14 x 10^12 Bq/g', parent: 'Nickel-62 (n,γ)', daughter: 'Copper-63 (stable)', commonUses: ['Electron capture detectors (gas chromatography)', 'Beta-voltaic batteries'], category: 'Industrial', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Niobium-95', symbol: 'Nb-95', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['0.160 MeV (max)'], gamma: ['0.766 MeV'], alpha: [] }, halfLife: '34.99 days', decayConstant: '0.0198 day⁻¹', specificActivity: '1.6 x 10^15 Bq/g', parent: 'Zirconium-95', daughter: 'Molybdenum-95 (stable)', commonUses: ['Fission product', 'Environmental tracer (daughter of Zr-95)'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Nitrogen-13', symbol: 'N-13', emissionType: ['Positron Emission', 'Gamma'], emissionEnergies: { beta: ['1.20 MeV (max)'], gamma: ['0.511 MeV (annihilation)'], alpha: [] }, halfLife: '9.97 minutes', decayConstant: '0.0695 min⁻¹', specificActivity: '3.7 x 10^18 Bq/g', parent: 'Carbon-13 (p,n)', daughter: 'Carbon-13 (stable)', commonUses: ['Cardiac PET imaging for myocardial perfusion and viability'], category: 'Medical', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Nitrogen-14', symbol: 'N-14', emissionType: ['Stable'], emissionEnergies: { alpha: [], beta: [], gamma: [] }, halfLife: 'Stable', decayConstant: '0', specificActivity: '0 Bq/g', parent: 'Carbon-14 (β-)', daughter: 'Stable', commonUses: ['Most abundant stable isotope of nitrogen', 'NMR spectroscopy', 'Target material for producing Carbon-14'], category: 'Stable/Reference', commonality: 'Common', sourceRef: {} },
	     { name: 'Oxygen-15', symbol: 'O-15', emissionType: ['Positron Emission', 'Gamma'], emissionEnergies: { beta: ['1.73 MeV (max)'], gamma: ['0.511 MeV (annihilation)'], alpha: [] }, halfLife: '122.2 seconds', decayConstant: '0.00567 s⁻¹', specificActivity: '3.3 x 10^18 Bq/g', parent: 'Nitrogen-15 (p,n)', daughter: 'Nitrogen-15 (stable)', commonUses: ['Brain blood flow', 'Oxygen metabolism PET imaging'], category: 'Medical', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Palladium-103', symbol: 'Pd-103', emissionType: ['Electron Capture', 'X-ray', 'Gamma'], emissionEnergies: { beta: [], gamma: [], alpha: [] }, halfLife: '16.99 days', decayConstant: '0.0408 day⁻¹', specificActivity: '3.5 x 10^15 Bq/g', parent: 'Rhodium-103 (p,n)', daughter: 'Rhodium-103 (stable)', commonUses: ['Brachytherapy (prostate cancer)'], category: 'Medical', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Phosphorus-32', symbol: 'P-32', emissionType: ['Beta-minus'], emissionEnergies: { beta: ['1.710 MeV (max)'], gamma: [], alpha: [] }, halfLife: '14.26 days', decayConstant: '0.0486 day⁻¹', specificActivity: '1.07 x 10^16 Bq/g', parent: 'Sulfur-32 (n,p)', daughter: 'Sulfur-32 (stable)', commonUses: ['Molecular biology (DNA/RNA labeling)', 'Radiotherapy for polycythemia vera', 'Agricultural research'], category: 'Medical', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Plutonium-238', symbol: 'Pu-238', emissionType: ['Alpha', 'Gamma'], emissionEnergies: { alpha: ['5.499 MeV'], gamma: ['0.043 MeV'], beta: [] }, halfLife: '87.7 years', decayConstant: '0.00790 year⁻¹', specificActivity: '6.34 x 10^11 Bq/g', parent: 'Neptunium-237 (n,γ) -> Np-238 (β-)', daughter: 'Uranium-234', commonUses: ['Radioisotope thermoelectric generators (RTGs) for spacecraft and pacemakers'], category: 'Industrial', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Plutonium-239', symbol: 'Pu-239', emissionType: ['Alpha', 'Gamma'], emissionEnergies: { alpha: ['5.157 MeV (dominant)'], beta: [], gamma: ['0.0516 MeV'] }, halfLife: '24,110 years', decayConstant: '2.87 x 10⁻⁵ year⁻¹', specificActivity: '2.3 x 10^9 Bq/g', parent: 'Uranium-238 (n,γ) -> ... -> Np-239 (β-)', daughter: 'Uranium-235 (α)', commonUses: ['Nuclear weapons', 'Nuclear fuel (MOX fuel)'], category: 'Industrial', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Polonium-208', symbol: 'Po-208', emissionType: ['Alpha', 'Gamma'], emissionEnergies: { alpha: ['5.115 MeV'], beta: [], gamma: ['0.134 MeV'] }, halfLife: '2.898 years', decayConstant: '0.239 year⁻¹', specificActivity: '1.6 x 10^13 Bq/g', parent: 'Bismuth-209 (p,2n)', daughter: 'Lead-204 (stable)', commonUses: ['Alpha calibration', 'Research'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Polonium-210', symbol: 'Po-210', emissionType: ['Alpha'], emissionEnergies: { alpha: ['5.304 MeV'], beta: [], gamma: [] }, halfLife: '138.376 days', decayConstant: '0.00501 day⁻¹', specificActivity: '1.66 x 10^14 Bq/g', parent: 'Bismuth-210 (β-)', daughter: 'Lead-206 (stable)', commonUses: ['Antistatic devices', 'Neutron sources', 'Research (alpha spectroscopy)'], category: 'Natural', commonality: 'Common', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Polonium-211', symbol: 'Po-211', emissionType: ['Alpha'], emissionEnergies: { alpha: ['7.45 MeV'], beta: [], gamma: [] }, halfLife: '0.516 seconds', decayConstant: '1.34 s⁻¹', specificActivity: '1.4 x 10^20 Bq/g', parent: 'Bismuth-211', daughter: 'Lead-207 (stable)', commonUses: ['Fastest alpha emitter in natural series', 'Research'], category: 'Natural', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Polonium-212', symbol: 'Po-212', emissionType: ['Alpha'], emissionEnergies: { alpha: ['8.785 MeV'], beta: [], gamma: [] }, halfLife: '0.299 microseconds', decayConstant: '2.32 x 10⁶ s⁻¹', specificActivity: '2.5 x 10^22 Bq/g', parent: 'Bismuth-212 (β-)', daughter: 'Lead-208 (stable)', commonUses: ['Fastest alpha emitter in natural series', 'Research'], category: 'Natural', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Polonium-214', symbol: 'Po-214', emissionType: ['Alpha'], emissionEnergies: { alpha: ['7.687 MeV'], beta: [], gamma: [] }, halfLife: '164.3 microseconds', decayConstant: '4218 s⁻¹', specificActivity: '4.4 x 10^21 Bq/g', parent: 'Bismuth-214', daughter: 'Lead-210 (α)', commonUses: ['Very short-lived intermediate in U-238 decay chain'], category: 'Natural', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Polonium-215', symbol: 'Po-215', emissionType: ['Alpha', 'Beta-minus'], emissionEnergies: { alpha: ['7.386 MeV'], beta: ['0.71 MeV (max)'], gamma: [] }, halfLife: '1.781 milliseconds', decayConstant: '389 s⁻¹', specificActivity: '2.5 x 10^21 Bq/g', parent: 'Radon-219', daughter: 'Lead-211 (α) or Astatine-215 (β-)', commonUses: ['Very short-lived intermediate in U-235 decay chain'], category: 'Natural', decaySeriesId: 'U-235-series', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Polonium-216', symbol: 'Po-216', emissionType: ['Alpha'], emissionEnergies: { alpha: ['6.778 MeV'], beta: [], gamma: [] }, halfLife: '0.145 seconds', decayConstant: '4.78 s⁻¹', specificActivity: '1.6 x 10^20 Bq/g', parent: 'Radon-220', daughter: 'Lead-212 (α)', commonUses: ['Very short-lived intermediate in Th-232 chain'], category: 'Natural', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Polonium-218', emissionType: ['Alpha', 'Beta-minus'], symbol: 'Po-218', emissionEnergies: { alpha: ['6.002 MeV'], beta: ['0.26 MeV (max)'] }, halfLife: '3.10 minutes', decayConstant: '0.224 min⁻¹', specificActivity: '2.3 x 10^18 Bq/g', parent: 'Radon-222', daughter: 'Lead-214 (α) or Astatine-218 (β-)', commonUses: ['Intermediate in U-238 decay chain'], category: 'Natural', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Potassium-40', symbol: 'K-40', emissionType: ['Beta-minus', 'Electron Capture', 'Gamma'], emissionEnergies: { beta: ['1.311 MeV (max)'], gamma: ['1.461 MeV'], alpha: [] }, halfLife: '1.251 billion years', decayConstant: '5.54 x 10⁻¹⁰ year⁻¹', specificActivity: '2.6 x 10^5 Bq/g', parent: 'Primordial', daughter: 'Calcium-40 (β-) or Argon-40 (EC)', commonUses: ['Potassium-argon dating', 'Internal human radiation dose', 'Environmental monitoring'], category: 'Natural', commonality: 'Common', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Praseodymium-144', symbol: 'Pr-144', emissionType: ['Beta-minus'], emissionEnergies: { beta: ['2.997 MeV (max)'], gamma: [], alpha: [] }, halfLife: '17.28 minutes', decayConstant: '0.0401 min⁻¹', specificActivity: '1.96 x 10^17 Bq/g', parent: 'Cerium-144', daughter: 'Neodymium-144 (stable)', commonUses: ['High-energy beta source (daughter of Ce-144)'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Promethium-147', symbol: 'Pm-147', emissionType: ['Beta-minus'], emissionEnergies: { beta: ['0.224 MeV (max)'], gamma: [], alpha: [] }, halfLife: '2.623 years', decayConstant: '0.264 year⁻¹', specificActivity: '3.4 x 10^13 Bq/g', parent: 'Neodymium-147 (β-)', daughter: 'Samarium-147', commonUses: ['Atomic batteries (historical)', 'Luminous paints', 'Thickness gauges'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Protactinium-231', symbol: 'Pa-231', emissionType: ['Alpha', 'Gamma'], emissionEnergies: { alpha: ['5.059 MeV'], beta: [], gamma: ['0.302 MeV', '0.283 MeV'] }, halfLife: '32,760 years', decayConstant: '2.11 x 10⁻⁵ year⁻¹', specificActivity: '1.75 x 10^9 Bq/g', parent: 'Thorium-231 (β-)', daughter: 'Actinium-227 (α)', commonUses: ['Intermediate in Actinium-227 decay series', 'Geological research'], category: 'Natural', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Protactinium-233', symbol: 'Pa-233', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['0.571 MeV (max)'], gamma: ['0.312 MeV'], alpha: [] }, halfLife: '27.0 days', decayConstant: '0.0257 day⁻¹', specificActivity: '7.5 x 10^14 Bq/g', parent: 'Thorium-233 (β)', daughter: 'Uranium-233', commonUses: ['Intermediate in Th-232 to U-233 fuel cycle', 'Research'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Protactinium-234m', symbol: 'Pa-234m', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['2.29 MeV (max)'], gamma: ['1.001 MeV', '0.766 MeV'], alpha: [] }, halfLife: '1.17 minutes', decayConstant: '0.592 min⁻¹', specificActivity: '1.7 x 10^19 Bq/g', parent: 'Thorium-234', daughter: 'Uranium-234 (β-)', commonUses: ['Intermediate in U-238 decay chain'], category: 'Natural', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Radium-220', symbol: 'Ra-220', emissionType: ['Alpha'], emissionEnergies: { alpha: ['6.818 MeV'], beta: [], gamma: [] }, halfLife: '27.4 seconds', decayConstant: '0.0253 s⁻¹', specificActivity: '1.8 x 10^18 Bq/g', parent: 'Thorium-224', daughter: 'Radon-216 (α)', commonUses: ['Intermediate in Thorium-232 decay series'], category: 'Natural', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Radium-223', symbol: 'Ra-223', emissionType: ['Alpha', 'Gamma'], emissionEnergies: { alpha: ['5.71 MeV (dominant)'], beta: [], gamma: ['0.269 MeV'] }, halfLife: '11.43 days', decayConstant: '0.0606 day⁻¹', specificActivity: '1.9 x 10^15 Bq/g', parent: 'Thorium-227', daughter: 'Radon-219 (α)', commonUses: ['Alpha-emitter for targeted alpha therapy (e.g., Xofigo for prostate cancer)'], category: 'Medical', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Radium-224', symbol: 'Ra-224', emissionType: ['Alpha', 'Gamma'], emissionEnergies: { alpha: ['5.685 MeV'], beta: [], gamma: ['0.241 MeV'] }, halfLife: '3.66 days', decayConstant: '0.189 day⁻¹', specificActivity: '5.9 x 10^15 Bq/g', parent: 'Thorium-228', daughter: 'Radon-220 (α)', commonUses: ['Intermediate in Thorium-232 decay series'], category: 'Natural', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Radium-226', symbol: 'Ra-226', emissionType: ['Alpha', 'Gamma'], emissionEnergies: { alpha: ['4.784 MeV'], beta: [], gamma: ['0.186 MeV'] }, halfLife: '1600 years', decayConstant: '4.33 x 10⁻⁴ year⁻¹', gammaConstant: '0.825 R·m²/hr·Ci', specificActivity: '3.7 x 10^10 Bq/g', parent: 'Thorium-230', daughter: 'Radon-222 (α)', commonUses: ['Historical medical brachytherapy', 'Neutron sources (Ra-Be)', 'Luminescent paint (historical)', 'Calibration sources'], category: 'Natural', decaySeriesId: 'U-238-series', commonality: 'Common', sourceRef: { halfLife: 'nndc', gammaConstant: 'hps' } },
	     { name: 'Radium-228', symbol: 'Ra-228', emissionType: ['Beta-minus'], emissionEnergies: { beta: ['0.039 MeV (max)'], gamma: [], alpha: [] }, halfLife: '5.75 years', decayConstant: '0.120 year⁻¹', specificActivity: '8.1 x 10^12 Bq/g', parent: 'Thorium-232', daughter: 'Actinium-228 (β-)', commonUses: ['Intermediate in Thorium-232 decay chain', 'Environmental monitoring'], category: 'Natural', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Radon-219', symbol: 'Rn-219', emissionType: ['Alpha'], emissionEnergies: { alpha: ['6.819 MeV'], beta: [], gamma: [] }, halfLife: '3.96 seconds', decayConstant: '0.175 s⁻¹', specificActivity: '1.14 x 10^19 Bq/g', parent: 'Radium-223', daughter: 'Polonium-215 (α)', commonUses: ['Intermediate in Actinium-227 decay series'], category: 'Natural', commonality: 'Rare', decaySeriesId: 'U-235-series', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Radon-220', symbol: 'Rn-220', emissionType: ['Alpha'], emissionEnergies: { alpha: ['6.288 MeV'], beta: [], gamma: [] }, halfLife: '55.6 seconds', decayConstant: '0.0125 s⁻¹', specificActivity: '8.1 x 10^17 Bq/g', parent: 'Radium-224', daughter: 'Polonium-216 (α)', commonUses: ['Environmental monitoring (thoron gas)', 'Research'], category: 'Natural', commonality: 'Common', decaySeriesId: 'Th-232-series', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Radon-221', symbol: 'Rn-221', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['1.19 MeV (max)'], gamma: ['0.078 MeV'], alpha: [] }, halfLife: '25 minutes', decayConstant: '0.0277 min⁻¹', specificActivity: '1.8 x 10^17 Bq/g', parent: 'Francium-221', daughter: 'Francium-221', commonUses: ['Research (intermediate in artificial decay series)'], category: 'Natural', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Radon-222', symbol: 'Rn-222', emissionType: ['Alpha'], emissionEnergies: { alpha: ['5.490 MeV'], beta: [], gamma: [] }, halfLife: '3.823 days', decayConstant: '0.181 day⁻¹', specificActivity: '5.73 x 10^15 Bq/g', parent: 'Radium-226', daughter: 'Polonium-218 (α)', commonUses: ['Indoor air quality concern', 'Geological tracer', 'Research'], category: 'Natural', decaySeriesId: 'U-238-series', commonality: 'Common', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Rhenium-186', symbol: 'Re-186', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['1.07 MeV (max)'], gamma: ['0.137 MeV'], alpha: [] }, halfLife: '3.718 days', decayConstant: '0.186 day⁻¹', gammaConstant: '0.08 R·m²/hr·Ci', parent: 'Tungsten-186 (n,γ)', daughter: 'Osmium-186 (stable)', commonUses: ['Radiotherapy for bone pain palliation'], category: 'Medical', commonality: 'Rare', sourceRef: { halfLife: 'nndc', gammaConstant: 'hps' } },
	     { name: 'Rhenium-187', symbol: 'Re-187', emissionType: ['Beta-minus'], emissionEnergies: { beta: ['0.0025 MeV (max)'], gamma: [], alpha: [] }, halfLife: '4.33 x 10¹⁰ years', decayConstant: '1.60 x 10⁻¹¹ year⁻¹', specificActivity: '1.03 x 10^6 Bq/g', parent: 'Primordial', daughter: 'Osmium-187 (stable)', commonUses: ['Rhenium-Osmium dating (geological)', 'Neutrino mass experiments'], category: 'Natural', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Rhenium-188', symbol: 'Re-188', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['2.12 MeV (max)'], gamma: ['0.155 MeV'], alpha: [] }, halfLife: '17.0 hours', decayConstant: '0.0408 hour⁻¹', specificActivity: '3.7 x 10^16 Bq/g', parent: 'Tungsten-188', daughter: 'Osmium-188 (stable)', commonUses: ['Radiotherapy (bone pain palliation, synovectomy, arterial brachytherapy)'], category: 'Medical', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Rhodium-105', symbol: 'Rh-105', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['0.567 MeV (max)'], gamma: ['0.306 MeV'], alpha: [] }, halfLife: '35.36 hours', decayConstant: '0.0196 hour⁻¹', specificActivity: '1.27 x 10^16 Bq/g', parent: 'Ruthenium-105', daughter: 'Palladium-105 (stable)', commonUses: ['Targeted radiotherapy research'], category: 'Medical', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Rubidium-81', symbol: 'Rb-81', emissionType: ['Electron Capture', 'Positron Emission', 'Gamma'], emissionEnergies: { beta: ['1.05 MeV (max)'], gamma: ['0.446 MeV'], alpha: [] }, halfLife: '4.57 hours', decayConstant: '0.152 hour⁻¹', specificActivity: '1.3 x 10^17 Bq/g', parent: 'Strontium-81', daughter: 'Krypton-81m (IT) -> Krypton-81 (stable)', commonUses: ['Generator for Kr-81m (lung ventilation PET imaging)'], category: 'Medical', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Rubidium-82', symbol: 'Rb-82', emissionType: ['Positron Emission', 'Gamma'], emissionEnergies: { beta: ['3.38 MeV (max)'], gamma: ['0.511 MeV (annihilation)'], alpha: [] }, halfLife: '76 seconds', decayConstant: '0.00912 s⁻¹', specificActivity: '8.3 x 10^17 Bq/g', parent: 'Strontium-82', daughter: 'Krypton-82 (stable)', commonUses: ['Cardiac PET imaging for myocardial perfusion'], category: 'Medical', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Rubidium-84', symbol: 'Rb-84', emissionType: ['Positron Emission', 'Electron Capture', 'Gamma'], emissionEnergies: { beta: ['1.65 MeV (max)'], gamma: ['0.882 MeV'], alpha: [] }, halfLife: '32.8 days', decayConstant: '0.0211 day⁻¹', specificActivity: '1.74 x 10^15 Bq/g', parent: 'Krypton-84', daughter: 'Krypton-84 (stable)', commonUses: ['Cardiac blood flow research'], category: 'Medical', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Rubidium-86', symbol: 'Rb-86', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['1.77 MeV (max)'], gamma: ['1.077 MeV'], alpha: [] }, halfLife: '18.66 days', decayConstant: '0.0371 day⁻¹', specificActivity: '4.2 x 10^15 Bq/g', parent: 'Krypton-86', daughter: 'Strontium-86 (stable)', commonUses: ['Cardiac blood flow research'], category: 'Medical', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Ruthenium-103', symbol: 'Ru-103', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['0.226 MeV (max)'], gamma: ['0.497 MeV'], alpha: [] }, halfLife: '39.25 days', decayConstant: '0.0176 day⁻¹', specificActivity: '1.3 x 10^15 Bq/g', parent: 'Technetium-103', daughter: 'Rhodium-103 (stable)', commonUses: ['Fission product', 'Environmental tracer'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Samarium-153', symbol: 'Sm-153', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['0.808 MeV (max)'], gamma: ['0.103 MeV'], alpha: [] }, halfLife: '46.28 hours', decayConstant: '0.0150 hour⁻¹', specificActivity: '3.5 x 10^15 Bq/g', parent: 'Samarium-152 (n,γ)', daughter: 'Europium-153 (stable)', commonUses: ['Palliative bone pain therapy (metastatic cancer)'], category: 'Medical', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Scandium-44', symbol: 'Sc-44', emissionType: ['Positron Emission', 'Gamma'], emissionEnergies: { beta: ['1.47 MeV (max)'], gamma: ['1.157 MeV', '0.511 MeV (annihilation)'], alpha: [] }, halfLife: '3.97 hours', decayConstant: '0.174 hour⁻¹', parent: 'Titanium-44 (EC)', daughter: 'Calcium-44 (stable)', commonUses: ['PET imaging', 'Theranostic pair with Sc-47'], category: 'Medical', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Scandium-46', symbol: 'Sc-46', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['0.357 MeV (max)'], gamma: ['0.889 MeV', '1.121 MeV'], alpha: [] }, halfLife: '83.79 days', decayConstant: '0.00827 day⁻¹', specificActivity: '1.24 x 10^15 Bq/g', parent: 'Calcium-46 (n,p)', daughter: 'Titanium-46 (stable)', commonUses: ['Tracer in hydrology and industrial processes', 'Calibration source'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Scandium-47', symbol: 'Sc-47', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['0.601 MeV (max)'], gamma: ['0.159 MeV'], alpha: [] }, halfLife: '3.35 days', decayConstant: '0.207 day⁻¹', specificActivity: '3.1 x 10^16 Bq/g', parent: 'Titanium-47 (n,p)', daughter: 'Titanium-47 (stable)', commonUses: ['Theranostics (pairs with Sc-44 for PET), targeted radiotherapy research.'], category: 'Medical', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Selenium-76', symbol: 'Se-76', emissionType: ['Stable'], emissionEnergies: { beta: [], gamma: [], alpha: [] }, halfLife: 'Stable', decayConstant: '0', parent: 'Stable', daughter: 'Stable', commonUses: ['Reference for stable selenium', 'not a radionuclide use'], category: 'Stable/Reference', commonality: 'N/A' },
	     { name: 'Selenium-79', symbol: 'Se-79', emissionType: ['Beta-minus'], emissionEnergies: { beta: ['0.151 MeV (max)'], gamma: [], alpha: [] }, halfLife: '327,000 years', decayConstant: '2.12 x 10⁻⁶ year⁻¹', specificActivity: '9.2 x 10^8 Bq/g', parent: 'Bromine-79 (n,p)', daughter: 'Bromine-79 (stable)', commonUses: ['Environmental tracer (long-lived fission product)'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Silver-110m', symbol: 'Ag-110m', emissionType: ['Beta-minus', 'Isomeric Transition', 'Gamma'], emissionEnergies: { beta: ['0.529 MeV (max)'], gamma: ['0.885 MeV', '0.658 MeV', '1.505 MeV'], alpha: [] }, halfLife: '249.8 days', decayConstant: '0.00277 day⁻¹', specificActivity: '1.93 x 10^14 Bq/g', parent: 'Cadmium-108', daughter: 'Cadmium-110 (stable) or Palladium-110 (stable)', commonUses: ['Environmental monitoring (fission product', 'activation product)'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Sodium-22', symbol: 'Na-22', emissionType: ['Positron Emission', 'Gamma'], emissionEnergies: { beta: ['0.546 MeV (max)'], gamma: ['1.275 MeV', '0.511 MeV (annihilation)'], alpha: [] }, halfLife: '2.602 years', decayConstant: '0.266 year⁻¹', gammaConstant: '1.20 R·m²/hr·Ci', specificActivity: '6.45 x 10^13 Bq/g', parent: 'Magnesium-22 (EC)', daughter: 'Neon-22 (stable)', commonUses: ['Calibration sources for PET scanners', 'Tracers for biological studies'], category: 'Industrial', commonality: 'Moderate', sourceRef: { halfLife: 'nndc', gammaConstant: 'hps' } },
	     { name: 'Sodium-23', symbol: 'Na-23', emissionType: ['Stable'], emissionEnergies: { beta: [], gamma: [], alpha: [] }, halfLife: 'Stable', decayConstant: '0', parent: 'Stable', daughter: 'Stable', commonUses: ['Reference for stable sodium', 'not a radionuclide use'], category: 'Stable/Reference', commonality: 'N/A' },
	     { name: 'Sodium-24', symbol: 'Na-24', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['1.39 MeV (max)'], gamma: ['1.369 MeV', '2.754 MeV'], alpha: [] }, halfLife: '14.96 hours', decayConstant: '0.0463 hour⁻¹', specificActivity: '1.8 x 10^17 Bq/g', parent: 'Magnesium-24 (n,p)', daughter: 'Magnesium-24 (stable)', commonUses: ['Hydrological tracer', 'Flow studies', 'Research'], category: 'Industrial', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Strontium-82', symbol: 'Sr-82', emissionType: ['Electron Capture', 'Gamma'], emissionEnergies: { beta: [], gamma: ['0.776 MeV'], alpha: [] }, halfLife: '25.36 days', decayConstant: '0.0273 day⁻¹', specificActivity: '2.4 x 10^15 Bq/g', parent: 'Yttrium-85', daughter: 'Rubidium-82', commonUses: ['Generator for Rubidium-82, used for cardiac PET imaging.'], category: 'Medical', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Strontium-89', symbol: 'Sr-89', emissionType: ['Beta-minus'], emissionEnergies: { beta: ['1.49 MeV (max)'], gamma: [], alpha: [] }, halfLife: '50.5 days', decayConstant: '0.0137 day⁻¹', specificActivity: '1.09 x 10^15 Bq/g', parent: 'Uranium Fission', daughter: 'Yttrium-89 (stable)', commonUses: ['Palliative bone pain therapy (metastatic cancer)'], category: 'Medical', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Strontium-90', symbol: 'Sr-90', emissionType: ['Beta-minus'], emissionEnergies: { beta: ['0.546 MeV (max)'], gamma: [], alpha: [] }, halfLife: '28.9 years', decayConstant: '0.0240 year⁻¹', specificActivity: '5.15 x 10^12 Bq/g', parent: 'Uranium Fission', daughter: 'Yttrium-90', commonUses: ['Radioisotope thermoelectric generators (RTGs)', 'Industrial gauges', 'Medical radiation therapy for bone cancer'], category: 'Industrial', commonality: 'Common', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Sulfur-34', symbol: 'S-34', emissionType: ['Stable'], emissionEnergies: { beta: [], gamma: [], alpha: [] }, halfLife: 'Stable', decayConstant: '0', parent: 'Stable', daughter: 'Stable', commonUses: ['Reference for stable sulfur', 'not a radionuclide use'], category: 'Stable/Reference', commonality: 'N/A' },
	     { name: 'Sulfur-35', symbol: 'S-35', emissionType: ['Beta-minus'], emissionEnergies: { beta: ['0.167 MeV (max)'], gamma: [], alpha: [] }, halfLife: '87.51 days', decayConstant: '0.00792 day⁻¹', specificActivity: '1.57 x 10^15 Bq/g', parent: 'Chlorine-35 (n,p)', daughter: 'Chlorine-35 (stable)', commonUses: ['Molecular biology (protein labeling)', 'Metabolic studies'], category: 'Industrial', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Tantalum-182', symbol: 'Ta-182', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['0.526 MeV (max)'], gamma: ['1.121 MeV', '1.221 MeV'], alpha: [] }, halfLife: '114.4 days', decayConstant: '0.00606 day⁻¹', specificActivity: '5.2 x 10^14 Bq/g', parent: 'Tantalum-181 (n,γ)', daughter: 'Tungsten-182 (stable)', commonUses: ['Radiography of heavy metals', 'Calibration sources'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Technetium-99', symbol: 'Tc-99', emissionType: ['Beta-minus'], emissionEnergies: { beta: ['0.294 MeV (max)'], gamma: [], alpha: [] }, halfLife: '211,100 years', decayConstant: '3.28 x 10⁻⁶ year⁻¹', specificActivity: '6.3 x 10^8 Bq/g', parent: 'Technetium-99m', daughter: 'Ruthenium-99 (stable)', commonUses: ['Daughter product of Tc-99m', 'Environmental tracer', 'Long-lived fission product in nuclear waste'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Technetium-99m', symbol: 'Tc-99m', emissionType: ['Gamma', 'Isomeric Transition'], emissionEnergies: { beta: [], gamma: ['0.1405 MeV'], alpha: [] }, halfLife: '6.01 hours', decayConstant: '0.115 hour⁻¹', specificActivity: '1.95 x 10^17 Bq/g', parent: 'Molybdenum-99', daughter: 'Technetium-99', commonUses: ['Medical diagnostic imaging (most common medical isotope for various scans: bone, heart, kidney, brain, etc.)'], category: 'Medical', commonality: 'Common', sourceRef: { halfLife: 'nndc', decayConstant: 'nndc' } },
	     { name: 'Tellurium-123m', symbol: 'Te-123m', emissionType: ['Isomeric Transition', 'Gamma', 'X-ray'], emissionEnergies: { beta: [], gamma: ['0.159 MeV'], alpha: [] }, halfLife: '119.7 days', decayConstant: '0.00579 day⁻¹', specificActivity: '4.1 x 10^14 Bq/g', parent: 'Antimony-123', daughter: 'Tellurium-123 (stable)', commonUses: ['Medical imaging (historical)', 'Research tracer'], category: 'Medical', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Tellurium-128', symbol: 'Te-128', emissionType: ['Double Beta-minus'], emissionEnergies: { beta: ['0.867 MeV (total)'], gamma: [], alpha: [] }, halfLife: '2.2 x 10²⁴ years', decayConstant: '3.15 x 10⁻²⁵ year⁻¹', specificActivity: '1.4 x 10^-8 Bq/g', parent: 'Primordial', daughter: 'Xenon-128 (stable)', commonUses: ['Longest measured half-life', 'Fundamental physics research'], category: 'Natural', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Tellurium-130', symbol: 'Te-130', emissionType: ['Double Beta-minus'], emissionEnergies: { beta: ['2.528 MeV (total)'], gamma: [], alpha: [] }, halfLife: '2.5 x 10²¹ years', decayConstant: '2.77 x 10⁻²² year⁻¹', specificActivity: '1.6 x 10^-5 Bq/g', parent: 'Primordial', daughter: 'Xenon-130 (stable)', commonUses: ['Double beta decay research'], category: 'Natural', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Terbium-161', symbol: 'Tb-161', emissionType: ['Beta-minus', 'Gamma', 'Auger electron'], emissionEnergies: { beta: ['0.593 MeV (max)'], gamma: ['0.049 MeV', '0.075 MeV'], alpha: [] }, halfLife: '6.89 days', decayConstant: '0.101 day⁻¹', specificActivity: '4.4 x 10^14 Bq/g', commonUses: ['Theranostics (combined therapy and diagnostics), particularly for cancer treatment research.'], parent: 'Gadolinium-160 (n,γ)', daughter: 'Dysprosium-161 (stable)', category: 'Medical', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Thallium-201', symbol: 'Tl-201', emissionType: ['Electron Capture', 'Gamma', 'X-ray'], emissionEnergies: { beta: [], gamma: ['0.167 MeV', '0.135 MeV'], alpha: [] }, halfLife: '73.1 hours', decayConstant: '0.00948 hour⁻¹', specificActivity: '1.74 x 10^15 Bq/g', parent: 'Lead-201', daughter: 'Mercury-201 (stable)', commonUses: ['Cardiac imaging (myocardial perfusion)', 'Parathyroid gland imaging'], category: 'Medical', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Thallium-204', symbol: 'Tl-204', emissionType: ['Beta-minus', 'Electron Capture'], emissionEnergies: { beta: ['0.763 MeV (max)'], gamma: [], alpha: [] }, halfLife: '3.78 years', decayConstant: '0.183 year⁻¹', specificActivity: '1.6 x 10^13 Bq/g', parent: 'Lead-204 (d,2n)', daughter: 'Lead-204 (stable) or Mercury-204 (stable)', commonUses: ['Calibration sources (beta)', 'Thickness gauging'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Thallium-205', symbol: 'Tl-205', emissionType: ['Stable'], emissionEnergies: { alpha: [], beta: [], gamma: [] },   halfLife: 'Stable',   decayConstant: '0',   specificActivity: '0 Bq/g',   parent: 'Bismuth-209 (α)',   daughter: 'Stable',   commonUses: ['Final stable product of Bismuth-209 decay', 'Nuclear Magnetic Resonance (NMR) research', 'Target material for isotope production'],   category: 'Stable/Reference', commonality: 'Common', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Thallium-207', symbol: 'Tl-207', emissionType: ['Beta-minus'], emissionEnergies: { beta: ['1.42 MeV (max)'], gamma: [], alpha: [] }, halfLife: '4.77 minutes', decayConstant: '0.145 min⁻¹', specificActivity: '1.5 x 10^18 Bq/g', parent: 'Bismuth-211', daughter: 'Lead-207 (stable)', commonUses: ['Intermediate in Actinium-227 decay series'], category: 'Natural', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Thallium-208', symbol: 'Tl-208', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['1.80 MeV (max)'], gamma: ['2.614 MeV (dominant)', '0.583 MeV'], alpha: [] }, halfLife: '3.053 minutes', decayConstant: '0.227 min⁻¹', specificActivity: '2.4 x 10^18 Bq/g', parent: 'Bismuth-212 (α)', daughter: 'Lead-208 (stable)', commonUses: ['High-energy gamma source in natural background'], category: 'Natural', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Thorium-227', symbol: 'Th-227', emissionType: ['Alpha', 'Gamma'], emissionEnergies: { alpha: ['6.038 MeV'], beta: [], gamma: ['0.236 MeV'] }, halfLife: '18.72 days', decayConstant: '0.037 day⁻¹', specificActivity: '1.2 x 10^15 Bq/g', parent: 'Actinium-227', daughter: 'Radium-223 (α)', commonUses: ['Intermediate in Actinium-227 decay series', 'Alpha therapy research'], category: 'Natural', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Thorium-228', symbol: 'Th-228', emissionType: ['Alpha', 'Gamma'], emissionEnergies: { alpha: ['5.423 MeV'], beta: [], gamma: ['0.084 MeV'] }, halfLife: '1.91 years', decayConstant: '0.363 year⁻¹', specificActivity: '3.0 x 10^13 Bq/g', parent: 'Actinium-228', daughter: 'Radium-224 (α)', commonUses: ['Intermediate in Thorium-232 decay chain', 'Calibration sources'], category: 'Natural', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Thorium-229', symbol: 'Th-229', emissionType: ['Alpha', 'Gamma'], emissionEnergies: { alpha: ['4.845 MeV'], beta: [], gamma: ['0.029 MeV', '0.194 MeV'] }, halfLife: '7,340 years', decayConstant: '9.44 x 10⁻⁵ year⁻¹', specificActivity: '7.9 x 10^9 Bq/g', parent: 'Uranium-233', daughter: 'Radium-225 (α)', commonUses: ['Parent for Actinium-225 generators', 'Research in nuclear clocks due to its low-energy isomeric state'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Thorium-230', symbol: 'Th-230', emissionType: ['Alpha', 'Gamma'], emissionEnergies: { alpha: ['4.688 MeV'], beta: [], gamma: ['0.067 MeV'] }, halfLife: '75,400 years', decayConstant: '9.19 x 10⁻⁶ year⁻¹', specificActivity: '7.6 x 10^8 Bq/g', parent: 'Uranium-234', daughter: 'Radium-226 (α)', commonUses: ['Dating of marine sediments', 'Component of natural decay series'], category: 'Natural', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Thorium-231', symbol: 'Th-231', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['0.39 MeV (max)'], gamma: ['0.084 MeV'], alpha: [] }, halfLife: '25.52 hours', decayConstant: '0.0272 hour⁻¹', specificActivity: '2.6 x 10^16 Bq/g', parent: 'Uranium-235', daughter: 'Protactinium-231', commonUses: ['Intermediate in U-235 decay chain'], category: 'Natural', decaySeriesId: 'U-235-series', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Thorium-232', symbol: 'Th-232', emissionType: ['Alpha', 'Gamma'], emissionEnergies: { alpha: ['4.012 MeV'], beta: [], gamma: ['0.059 MeV'] }, halfLife: '14.05 billion years', decayConstant: '4.93 x 10⁻¹¹ year⁻¹', specificActivity: '4,059 Bq/g', parent: 'Primordial', daughter: 'Radium-228 (α)', commonUses: ['Nuclear fuel cycle (fertile material)', 'Gas mantles (historical)', 'Welding electrodes', 'Thoriated optics', 'Catalysis'], category: 'Natural', decaySeriesId: 'Th-232-series', commonality: 'Common', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Thorium-234', symbol: 'Th-234', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['0.193 MeV (max)'], gamma: ['0.063 MeV', '0.093 MeV'], alpha: [] }, halfLife: '24.10 days', decayConstant: '0.0287 day⁻¹', specificActivity: '8.2 x 10^14 Bq/g', parent: 'Uranium-238', daughter: 'Protactinium-234m (β-)', commonUses: ['Intermediate in U-238 decay chain'], category: 'Natural', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Thulium-170', symbol: 'Tm-170', emissionType: ['Beta-minus', 'Gamma', 'X-ray'], emissionEnergies: { beta: ['0.968 MeV (max)'], gamma: ['0.084 MeV'], alpha: [] }, halfLife: '128.6 days', decayConstant: '0.00539 day⁻¹', specificActivity: '1.02 x 10^15 Bq/g', parent: 'Erbium-170', daughter: 'Ytterbium-170 (stable)', commonUses: ['Portable industrial radiography', 'Brachytherapy', 'Medical imaging (historical)'], category: 'Industrial', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Tin-117m', symbol: 'Sn-117m', emissionType: ['Isomeric Transition', 'Gamma'], emissionEnergies: { beta: [], gamma: ['0.159 MeV'], alpha: [] }, halfLife: '13.76 days', decayConstant: '0.0504 day⁻¹', specificActivity: '4.8 x 10^15 Bq/g', parent: 'Tin-116 (n,γ)', daughter: 'Tin-117 (stable)', commonUses: ['Bone pain palliation for metastatic cancer.', 'Radiosynovectomy.'], category: 'Medical', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Tin-126', symbol: 'Sn-126', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['0.380 MeV (max)'], gamma: ['0.087 MeV'], alpha: [] }, halfLife: '230,000 years', decayConstant: '3.01 x 10⁻⁶ year⁻¹', specificActivity: '1.4 x 10^9 Bq/g', parent: 'Cadmium-126', daughter: 'Antimony-126 (β-)', commonUses: ['Long-lived fission product', 'Nuclear waste assessment'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Tritium', symbol: 'H-3', emissionType: ['Beta-minus'], emissionEnergies: { beta: ['0.0186 MeV (max)'], gamma: [], alpha: [] }, halfLife: '12.32 years', decayConstant: '0.0563 year⁻¹', specificActivity: '3.59 x 10^14 Bq/g', parent: 'Lithium-6 (n,α)', daughter: 'Helium-3 (stable)', commonUses: ['Self-powered lighting (e.g., exit signs, watches)', 'Medical and biological tracer', 'Nuclear weapons component'], category: 'Industrial', commonality: 'Common', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Tungsten-188', symbol: 'W-188', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['0.349 MeV (max)'], gamma: ['0.227 MeV'], alpha: [] }, halfLife: '69.4 days', decayConstant: '0.00999 day⁻¹', specificActivity: '3.6 x 10^14 Bq/g', parent: 'Tantalum-186', daughter: 'Rhenium-188', commonUses: ['Generator for Rhenium-188, used in therapeutic applications.'], category: 'Medical', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
     	     { name: 'Uranium-230', symbol: 'U-230', emissionType: ['Alpha', 'Gamma'], emissionEnergies: { alpha: ['5.888 MeV'], beta: [], gamma: ['0.053 MeV'] }, halfLife: '20.8 days', decayConstant: '0.0333 day⁻¹', specificActivity: '1.87 x 10^15 Bq/g', parent: 'Plutonium-234 (α)', daughter: 'Thorium-226', commonUses: ['Medical isotope production (e.g., Ra-223 from Th-226 generator)', 'Research'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Uranium-231', symbol: 'U-231', emissionType: ['Electron Capture', 'Gamma'], emissionEnergies: { beta: [], gamma: ['0.084 MeV', '0.143 MeV'], alpha: [] }, halfLife: '4.2 days', decayConstant: '0.165 day⁻¹', specificActivity: '1.27 x 10^16 Bq/g', parent: 'Neptunium-231 (EC)', daughter: 'Protactinium-231', commonUses: ['Intermediate in nuclear research'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Uranium-232', symbol: 'U-232', emissionType: ['Alpha', 'Gamma'], emissionEnergies: { alpha: ['5.320 MeV'], beta: [], gamma: ['0.058 MeV'] }, halfLife: '68.9 years', decayConstant: '0.0101 year⁻¹', specificActivity: '8.1 x 10^11 Bq/g', parent: 'Plutonium-236 (α)', daughter: 'Thorium-228 (α)', commonUses: ['Contaminant in U-233 from thorium fuel cycle', 'Research'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Uranium-233', symbol: 'U-233', emissionType: ['Alpha', 'Gamma'], emissionEnergies: { alpha: ['4.824 MeV'], beta: [], gamma: ['0.042 MeV', '0.312 MeV'] }, halfLife: '159,200 years', decayConstant: '4.35 x 10⁻⁶ year⁻¹', specificActivity: '3.56 x 10^8 Bq/g', parent: 'Protactinium-233', daughter: 'Thorium-229 (α)', commonUses: ['Thorium fuel cycle (fissile material)', 'Research'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Uranium-234', symbol: 'U-234', emissionType: ['Alpha', 'Gamma'], emissionEnergies: { alpha: ['4.776 MeV'], beta: [], gamma: ['0.053 MeV'] }, halfLife: '245,500 years', decayConstant: '2.82 x 10⁻⁶ year⁻¹', specificActivity: '2.3 x 10^8 Bq/g', parent: 'Protactinium-234m (β-)', daughter: 'Thorium-230', commonUses: ['Component of natural uranium', 'Geological dating (uranium-thorium dating)'], category: 'Natural', decaySeriesId: 'U-238-series', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Uranium-235', symbol: 'U-235', emissionType: ['Alpha', 'Gamma'], emissionEnergies: { alpha: ['4.398 MeV'], beta: [], gamma: ['0.186 MeV', '0.144 MeV'] }, halfLife: '703.8 million years', decayConstant: '9.85 x 10⁻¹⁰ year⁻¹', specificActivity: '8.0 x 10^4 Bq/g', parent: 'Primordial', daughter: 'Thorium-231 (α)', commonUses: ['Nuclear fuel for reactors', 'Nuclear weapons'], category: 'Natural', decaySeriesId: 'U-235-series', commonality: 'Common', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Uranium-238', symbol: 'U-238', emissionType: ['Alpha', 'Gamma'], emissionEnergies: { alpha: ['4.197 MeV'], beta: [], gamma: ['0.0496 MeV'] }, halfLife: '4.468 billion years', decayConstant: '1.55 x 10⁻¹⁰ year⁻¹', specificActivity: '1.24 x 10^4 Bq/g', parent: 'Primordial', daughter: 'Thorium-234 (α)', commonUses: ['Geological dating', 'Nuclear fuel cycle (raw material)', 'Shielding (depleted uranium)'], category: 'Natural', decaySeriesId: 'U-238-series', commonality: 'Common', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Xenon-131 (stable)', symbol: 'Xe-131', halfLife: 'Stable', daughter: 'Stable'},
	     { name: 'Xenon-133', symbol: 'Xe-133', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['0.346 MeV (max)'], gamma: ['0.081 MeV'], alpha: [] }, halfLife: '5.24 days', decayConstant: '0.132 day⁻¹', specificActivity: '6.4 x 10^15 Bq/g', parent: 'Uranium Fission', daughter: 'Cesium-133 (stable)', commonUses: ['Lung ventilation studies (medical imaging)', 'Blood flow measurements'], category: 'Medical', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Ytterbium-169', symbol: 'Yb-169', emissionType: ['Electron Capture', 'Gamma', 'X-ray'], emissionEnergies: { beta: [], gamma: ['0.198 MeV', '0.261 MeV', '0.308 MeV'], alpha: [] }, halfLife: '32.02 days', decayConstant: '0.0216 day⁻¹', gammaConstant: '0.18 R·m²/hr·Ci', specificActivity: '1.9 x 10^14 Bq/g', parent: 'Lutetium-169', daughter: 'Thulium-169 (stable)', commonUses: ['Medical imaging (historical)', 'Brain and CSF studies', 'Industrial radiography'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc', gammaConstant: 'hps' } },
	     { name: 'Yttrium-90', symbol: 'Y-90', emissionType: ['Beta-minus'], emissionEnergies: { beta: ['2.28 MeV (max)'], gamma: [], alpha: [] }, halfLife: '64.0 hours', decayConstant: '0.0108 hour⁻¹', specificActivity: '1.21 x 10^16 Bq/g', parent: 'Strontium-90', daughter: 'Zirconium-90 (stable)', commonUses: ['Radioembolization (liver cancer therapy)', 'Radioimmunotherapy', 'Brachytherapy'], category: 'Medical', commonality: 'Moderate', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Zinc-69m', symbol: 'Zn-69m', emissionType: ['Isomeric Transition', 'Gamma'], emissionEnergies: { beta: [], gamma: ['0.439 MeV'], alpha: [] }, halfLife: '13.76 hours', decayConstant: '0.0504 hour⁻¹', specificActivity: '4.8 x 10^16 Bq/g', parent: 'Zinc-69', daughter: 'Zinc-69', commonUses: ['Zinc metabolism studies (historical)'], category: 'Medical', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Zirconium-89', symbol: 'Zr-89', emissionType: ['Positron Emission', 'Electron Capture', 'Gamma'], emissionEnergies: { beta: ['0.902 MeV (max)'], gamma: ['0.909 MeV', '0.511 MeV (annihilation)'], alpha: [] }, halfLife: '78.41 hours', decayConstant: '0.00884 hour⁻¹', specificActivity: '1.18 x 10^16 Bq/g', parent: 'Yttrium-89 (p,n)', daughter: 'Yttrium-89 (stable)', commonUses: ['PET imaging, particularly for antibody-based imaging (immuno-PET) due to its longer half-life.'], category: 'Medical', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } },
	     { name: 'Zirconium-95', symbol: 'Zr-95', emissionType: ['Beta-minus', 'Gamma'], emissionEnergies: { beta: ['0.399 MeV (max)'], gamma: ['0.724 MeV', '0.757 MeV'], alpha: [] }, halfLife: '64.03 days', decayConstant: '0.0108 day⁻¹', specificActivity: '8.8 x 10^14 Bq/g', parent: 'Uranium Fission', daughter: 'Niobium-95', commonUses: ['Fission product', 'Environmental tracer'], category: 'Industrial', commonality: 'Rare', sourceRef: { halfLife: 'nndc' } }
        ];
    </script>

    <div id="root"></div>

    <script type="text/babel">

        /**
         * Radionuclide Database Tool - Core Data and Utility Functions
         * -----------------------------------------------------------
         * This script contains the core data structures, constants, and utility
         * functions for the radionuclide database application. It includes
         * decay series data, SVG icon paths, and various parsers for handling
         * physical quantities like half-life and energy.
         */

        //==============================================================================
        // --- APPLICATION METADATA & CONSTANTS
        //==============================================================================

        const VERSION = '2.8.1';
        const LAST_UPDATED = 'August 14, 2025';

        /**
         * Data sources used in the application.
         * Each key is a short identifier, and the value is an object
         * containing the full name and URL of the source.
         */

        const sources = {
            nndc: { name: 'NNDC', url: 'https://www.nndc.bnl.gov/nudat3/' },
            wiki: { name: 'Wikipedia', url: 'https://en.wikipedia.org/' },
            hps: { name: 'Health Physics Society', url: 'https://hps.org/' },
        };

        /**
         * Half-Value Layer (HVL) data in cm for common gamma emitters and materials.
         * Source: Approximate values from various health physics resources.
         */

        const HVL_DATA = {
            'Co-60': { 'Lead': 1.2, 'Concrete': 6.0, 'Steel': 2.1 },
            'Cs-137': { 'Lead': 0.65, 'Concrete': 4.8, 'Steel': 1.6 },
            'Ir-192': { 'Lead': 0.33, 'Concrete': 4.3, 'Steel': 1.3 },
            'Ba-133': { 'Lead': 0.29, 'Concrete': 4.1, 'Steel': 1.2 },
            'Na-22': { 'Lead': 0.97, 'Concrete': 5.8, 'Steel': 2.0 },
        };

        //==============================================================================
        // --- CORE DATA
        //==============================================================================

        /**
         * Defines the primary natural decay chains. Each object represents a series
         * and contains an array of steps in its decay chain.
         */

        const decaySeriesData = [
            {
                id: 'U-238-series',
                name: 'Uranium-238 Decay Series (Uranium Series)',
                startNuclide: 'Uranium-238',
                chain: [
                    { nuclide: 'Uranium-238', decayType: 'Alpha', halfLife: '4.468 billion years', daughter: 'Thorium-234' },
                    { nuclide: 'Thorium-234', decayType: 'Beta-minus', halfLife: '24.10 days', daughter: 'Protactinium-234m' },
                    { nuclide: 'Protactinium-234m', decayType: 'Beta-minus', halfLife: '1.17 minutes', daughter: 'Uranium-234' },
                    { nuclide: 'Uranium-234', decayType: 'Alpha', halfLife: '245,500 years', daughter: 'Thorium-230' },
                    { nuclide: 'Thorium-230', decayType: 'Alpha', halfLife: '75,380 years', daughter: 'Radium-226' },
                    { nuclide: 'Radium-226', decayType: 'Alpha', halfLife: '1600 years', daughter: 'Radon-222' },
                    { nuclide: 'Radon-222', decayType: 'Alpha', halfLife: '3.82 days', daughter: 'Polonium-218' },
                    { nuclide: 'Polonium-218', decayType: 'Alpha', halfLife: '3.1 minutes', daughter: 'Lead-214' },
                    { nuclide: 'Lead-214', decayType: 'Beta-minus', halfLife: '26.8 minutes', daughter: 'Bismuth-214' },
                    { nuclide: 'Bismuth-214', decayType: 'Beta-minus', halfLife: '19.9 minutes', daughter: 'Polonium-214' },
                    { nuclide: 'Polonium-214', decayType: 'Alpha', halfLife: '164.3 microseconds', daughter: 'Lead-210' },
                    { nuclide: 'Lead-210', decayType: 'Beta-minus', halfLife: '22.2 years', daughter: 'Bismuth-210' },
                    { nuclide: 'Bismuth-210', decayType: 'Beta-minus', halfLife: '5.012 days', daughter: 'Polonium-210' },
                    { nuclide: 'Polonium-210', decayType: 'Alpha', halfLife: '138.376 days', daughter: 'Lead-206' },
                    { nuclide: 'Lead-206', decayType: 'Stable', halfLife: 'Stable', daughter: 'N/A' }
                ]
            },
            {
                id: 'Th-232-series',
                name: 'Thorium-232 Decay Series (Thorium Series)',
                startNuclide: 'Thorium-232',
                chain: [
                    { nuclide: 'Thorium-232', decayType: 'Alpha', halfLife: '14.05 billion years', daughter: 'Radium-228' },
                    { nuclide: 'Radium-228', decayType: 'Beta-minus', halfLife: '5.75 years', daughter: 'Actinium-228' },
                    { nuclide: 'Actinium-228', decayType: 'Beta-minus', halfLife: '6.15 hours', daughter: 'Thorium-228' },
                    { nuclide: 'Thorium-228', decayType: 'Alpha', halfLife: '1.913 years', daughter: 'Radium-224' },
                    { nuclide: 'Radium-224', decayType: 'Alpha', halfLife: '3.63 days', daughter: 'Radon-220' },
                    { nuclide: 'Radon-220', decayType: 'Alpha', halfLife: '55.6 seconds', daughter: 'Polonium-216' },
                    { nuclide: 'Polonium-216', decayType: 'Alpha', halfLife: '0.145 seconds', daughter: 'Lead-212' },
                    { nuclide: 'Lead-212', decayType: 'Beta-minus', halfLife: '10.64 hours', daughter: 'Bismuth-212' },
                    { nuclide: 'Bismuth-212', decayType: 'Beta-minus', halfLife: '60.55 minutes', daughter: 'Polonium-212' },
                    { nuclide: 'Polonium-212', decayType: 'Alpha', halfLife: '0.299 microseconds', daughter: 'Lead-208' },
                    { nuclide: 'Lead-208', decayType: 'Stable', halfLife: 'Stable', daughter: 'N/A' }
                ]
            },
            {
                id: 'U-235-series',
                name: 'Uranium-235 Decay Series (Actinium Series)',
                startNuclide: 'Uranium-235',
                chain: [
                    { nuclide: 'Uranium-235', decayType: 'Alpha', halfLife: '703.8 million years', daughter: 'Thorium-231' },
                    { nuclide: 'Thorium-231', decayType: 'Beta-minus', halfLife: '25.5 hours', daughter: 'Protactinium-231' },
                    { nuclide: 'Protactinium-231', decayType: 'Alpha', halfLife: '32,760 years', daughter: 'Actinium-227' },
                    { nuclide: 'Actinium-227', decayType: 'Beta-minus', halfLife: '21.77 years', daughter: 'Thorium-227' },
                    { nuclide: 'Thorium-227', decayType: 'Alpha', halfLife: '18.72 days', daughter: 'Radium-223' },
                    { nuclide: 'Radium-223', decayType: 'Alpha', halfLife: '11.43 days', daughter: 'Radon-219' },
                    { nuclide: 'Radon-219', decayType: 'Alpha', halfLife: '3.96 seconds', daughter: 'Polonium-215' },
                    { nuclide: 'Polonium-215', decayType: 'Alpha', halfLife: '1.78 milliseconds', daughter: 'Lead-211' },
                    { nuclide: 'Lead-211', decayType: 'Beta-minus', halfLife: '36.1 minutes', daughter: 'Bismuth-211' },
                    { nuclide: 'Bismuth-211', decayType: 'Alpha (99.7%) / Beta-minus (0.3%)', halfLife: '2.14 minutes', daughter: 'Thallium-207 / Polonium-211' },
                    { nuclide: 'Polonium-211', decayType: 'Alpha', halfLife: '0.516 seconds', daughter: 'Lead-207' },
                    { nuclide: 'Thallium-207', decayType: 'Beta-minus', halfLife: '4.77 minutes', daughter: 'Lead-207' },
                    { nuclide: 'Lead-207', decayType: 'Stable', halfLife: 'Stable', daughter: 'N/A' }
                ]
            },
            {
                id: 'Ra-226-series',
                name: 'Radium-226 Decay Series',
                startNuclide: 'Radium-226',
                chain: [
                    { nuclide: 'Radium-226', decayType: 'Alpha', halfLife: '1600 years', daughter: 'Radon-222' },
                    { nuclide: 'Radon-222', decayType: 'Alpha', halfLife: '3.82 days', daughter: 'Polonium-218' },
                    { nuclide: 'Polonium-218', decayType: 'Alpha', halfLife: '3.1 minutes', daughter: 'Lead-214' },
                    { nuclide: 'Lead-214', decayType: 'Beta-minus', halfLife: '26.8 minutes', daughter: 'Bismuth-214' },
                    { nuclide: 'Bismuth-214', decayType: 'Beta-minus', halfLife: '19.9 minutes', daughter: 'Polonium-214' },
                    { nuclide: 'Polonium-214', decayType: 'Alpha', halfLife: '164.3 microseconds', daughter: 'Lead-210' },
                    { nuclide: 'Lead-210', decayType: 'Beta-minus', halfLife: '22.2 years', daughter: 'Bismuth-210' },
                    { nuclide: 'Bismuth-210', decayType: 'Beta-minus', halfLife: '5.012 days', daughter: 'Polonium-210' },
                    { nuclide: 'Polonium-210', decayType: 'Alpha', halfLife: '138.376 days', daughter: 'Lead-206' },
                    { nuclide: 'Lead-206', decayType: 'Stable', halfLife: 'Stable', daughter: 'N/A' }
                ]
            },
            {
                id: 'Np-237-series',
                name: 'Neptunium-237 Decay Series (Artificial)',
                startNuclide: 'Neptunium-237',
                chain: [
                    { nuclide: 'Neptunium-237', decayType: 'Alpha', halfLife: '2.14 million years', daughter: 'Protactinium-233' },
                    { nuclide: 'Protactinium-233', decayType: 'Beta-minus', halfLife: '27.0 days', daughter: 'Uranium-233' },
                    { nuclide: 'Uranium-233', decayType: 'Alpha', halfLife: '159,200 years', daughter: 'Thorium-229' },
                    { nuclide: 'Thorium-229', decayType: 'Alpha', halfLife: '7,340 years', daughter: 'Radium-225' },
                    { nuclide: 'Radium-225', decayType: 'Beta-minus', halfLife: '14.9 days', daughter: 'Actinium-225' },
                    { nuclide: 'Actinium-225', decayType: 'Alpha', halfLife: '9.92 days', daughter: 'Francium-221' },
                    { nuclide: 'Francium-221', decayType: 'Alpha', halfLife: '4.8 minutes', daughter: 'Astatine-217' },
                    { nuclide: 'Astatine-217', decayType: 'Alpha', halfLife: '32.3 milliseconds', daughter: 'Bismuth-213' },
                    { nuclide: 'Bismuth-213', decayType: 'Beta-minus', halfLife: '45.6 minutes', daughter: 'Polonium-213' },
                    { nuclide: 'Polonium-213', decayType: 'Alpha', halfLife: '4.2 microseconds', daughter: 'Lead-209' },
                    { nuclide: 'Lead-209', decayType: 'Beta-minus', halfLife: '3.25 hours', daughter: 'Bismuth-209' },
                    { nuclide: 'Bismuth-209', decayType: 'Effectively Stable', halfLife: '2.01 x 10¹⁹ years', daughter: 'Thallium-205' },
                    { nuclide: 'Thallium-205', decayType: 'Stable', halfLife: 'Stable', daughter: 'N/A' }
                ]
            },
            {
                id: 'Ac-225-series',
                name: 'Actinium-225 (Medical Alpha Generator)',
                startNuclide: 'Actinium-225',
                chain: [
                    { nuclide: 'Actinium-225', decayType: 'Alpha', halfLife: '9.92 days', daughter: 'Francium-221' },
                    { nuclide: 'Francium-221', decayType: 'Alpha', halfLife: '4.8 minutes', daughter: 'Astatine-217' },
                    { nuclide: 'Astatine-217', decayType: 'Alpha', halfLife: '32.3 milliseconds', daughter: 'Bismuth-213' },
                    { nuclide: 'Bismuth-213', decayType: 'Beta-minus', halfLife: '45.6 minutes', daughter: 'Polonium-213' },
                    { nuclide: 'Polonium-213', decayType: 'Alpha', halfLife: '4.2 microseconds', daughter: 'Lead-209' },
                    { nuclide: 'Lead-209', decayType: 'Beta-minus', halfLife: '3.25 hours', daughter: 'Bismuth-209' },
                    { nuclide: 'Bismuth-209', decayType: 'Effectively Stable', halfLife: '2.01 x 10¹⁹ years', daughter: 'Thallium-205' },
                    { nuclide: 'Thallium-205', decayType: 'Stable', halfLife: 'Stable', daughter: 'N/A' }
                ]
            }
        ];

        /**
         * A comprehensive list of radionuclides pulled from the initial table above.
         */

        const radionuclides = RADIONUCLIDE_DATA;

        //==============================================================================
        // --- UTILITY & PARSER FUNCTIONS
        //==============================================================================

        /**
         * Normalizes a string by converting it to lowercase and removing spaces and hyphens.
         * @param {string} str - The input string.
         * @returns {string} The normalized string.
         */

        const normalizeString = (str) => (typeof str === 'string' ? str.toLowerCase().replace(/[\s-]/g, '') : '');

        /**
         * Parses a half-life string (e.g., "1600 years") into a total number of seconds.
         * Handles various units, scientific notation, and the "Stable" keyword.
         * @param {string} halfLifeStr - The half-life string to parse.
         * @returns {number} The half-life in seconds, or Infinity for "Stable".
         */

         const parseHalfLifeToSeconds = (halfLifeStr) => {
            if (!halfLifeStr || halfLifeStr.toLowerCase() === 'stable') return Infinity;

            // Handle scientific notation like "2.01 x 10¹⁹ years" by converting it to a standard number string.
            const sciNotationMatch = halfLifeStr.match(/([\d.]+) x 10[⁰¹²³⁴⁵⁶⁷⁸⁹⁺⁻]+(\d+)/);
            if (sciNotationMatch) {
                const mantissa = parseFloat(sciNotationMatch[1]);
                const exponent = parseInt(sciNotationMatch[2]);
                const unitStr = halfLifeStr.split(' ').pop();
                halfLifeStr = `${mantissa * Math.pow(10, exponent)} ${unitStr}`;
            }

            const parts = halfLifeStr.replace(/,/g, '').split(' ');
            let value = parseFloat(parts[0]);
            const unit = parts[1]?.toLowerCase();

            if (isNaN(value)) return 0;

            const unitMultipliers = {
                'billion': 3.15576e16, // 3600 * 24 * 365.25 * 1e9
                'million': 3.15576e13, // 3600 * 24 * 365.25 * 1e6
                'kiloyears': 3.15576e10, // 3600 * 24 * 365.25 * 1e3
                'years': 31557600,     // 3600 * 24 * 365.25
                'year': 31557600,
                'days': 86400,          // 3600 * 24
                'day': 86400,
                'hours': 3600,
                'hour': 3600,
                'minutes': 60,
                'minute': 60,
                'seconds': 1,
                'second': 1,
                's': 1,
                'milliseconds': 1e-3,
                'millisecond': 1e-3,
                'microseconds': 1e-6,
                'microsecond': 1e-6,
            };

            // Sort keys by length descending to match longer units first (e.g., "milliseconds" before "s").
            const sortedKeys = Object.keys(unitMultipliers).sort((a, b) => b.length - a.length);

            for (const key of sortedKeys) {
                if (unit?.startsWith(key)) {
                    return value * unitMultipliers[key];
                }
            }
            return value; // Return raw value if no unit is matched
        };

        /**
         * Parses a string to standardize its numeric part into "e" notation if it's very large or small.
         * Handles multiple formats: "1.23 x 10^4", "1.23 x 10⁻⁴", "4,059", and "0.0123".
         * @param {string} str - The input string (e.g., "1.55 x 10⁻¹⁰ year⁻¹").
         * @returns {string} The formatted string with standardized notation.
         */
        const standardizeScientificDisplay = (str) => {
            if (typeof str !== 'string' || !str) return str;

            // First, check for the "x 10" format, now including unicode superscripts
            const sciNotationRegex = /([\d.,]+) x 10\^?([⁻⁺\-−\d⁰¹²³⁴⁵⁶⁷⁸⁹]+)\s*(.*)/;
            const sciMatch = str.match(sciNotationRegex);

            if (sciMatch) {
                const mantissa = parseFloat(sciMatch[1].replace(/,/g, ''));
                const exponentStr = sciMatch[2];
                const units = sciMatch[3] || '';

                // Helper to convert superscript characters to regular digits
                const superToRegularMap = { '⁰': '0', '¹': '1', '²': '2', '³': '3', '⁴': '4', '⁵': '5', '⁶': '6', '⁷': '7', '⁸': '8', '⁹': '9', '⁺': '+', '⁻': '-', '−': '-' };
                const regularExponentStr = [...exponentStr].map(char => superToRegularMap[char] || char).join('');
                const exponent = parseInt(regularExponentStr);

                if (isNaN(mantissa) || isNaN(exponent)) return str;
                
                const numericValue = mantissa * Math.pow(10, exponent);
                return `${numericValue.toExponential(2)} ${units}`.trim();
            }

            // If not, handle it as a plain number that might have commas and units
            const plainNumberRegex = /^([-\d.,]+)(.*)/;
            const plainMatch = str.match(plainNumberRegex);
            if (plainMatch) {
                const numberPart = plainMatch[1].replace(/,/g, '');
                const units = plainMatch[2] || '';
                const numericValue = parseFloat(numberPart);
                if (isNaN(numericValue)) return str;

                const absValue = Math.abs(numericValue);
                if (numericValue === 0) return `0 ${units}`.trim();

                if (absValue > 10000 || absValue < 0.001) {
                    return `${numericValue.toExponential(2)} ${units}`.trim();
                }
                return `${numericValue.toPrecision(3)} ${units}`.trim();
            }

            return str; // Return original string if no numeric pattern is found
        };

        /**
         * Determines the most appropriate human-readable unit for a given duration in seconds.
         * @param {number} seconds - The duration in seconds.
         * @returns {string} The most fitting unit ('years', 'days', 'hours', 'minutes', or 'seconds').
         */

        const getBestHalfLifeUnit = (seconds) => {
            if (seconds === Infinity) return 'years';

            const secondsInMinute = 60;
            const secondsInHour = 3600;
            const secondsInDay = 86400;
            const secondsInYear = 31557600; // 365.25 days

            if (seconds >= secondsInYear) return 'years';
            if (seconds >= secondsInDay) return 'days';
            if (seconds >= secondsInHour) return 'hours';
            if (seconds >= secondsInMinute) return 'minutes';
            return 'seconds';
        };

        /**
         * Formats a half-life string into a specified target unit with appropriate precision.
         * @param {string} halfLifeStr - The original half-life string (e.g., "1.25 billion years").
         * @param {string} targetUnit - The desired unit for the output (e.g., 'years', 'days').
         * @returns {string} The formatted half-life string (e.g., "1.25e+9 years").
         */

        const formatHalfLife = (halfLifeStr, targetUnit) => {
            const seconds = parseHalfLifeToSeconds(halfLifeStr);

            if (seconds === Infinity) return 'Stable';
            if (seconds === 0 || !halfLifeStr) return 'N/A';

            const unitConversions = {
                'seconds': 1,
                'minutes': 60,
                'hours': 3600,
                'days': 86400,
                'years': 31557600,
                'kiloyears': 3.15576e7 * 1e3,
                'megayears': 3.15576e7 * 1e6,
                'gigayears': 3.15576e7 * 1e9,
            };

            const value = seconds / unitConversions[targetUnit];

            // Use exponential notation for very large or very small numbers for consistency.

            if (value >= 1000 || (value > 0 && value < 0.01)) {
                return `${value.toExponential(2)} ${targetUnit}`;
            }

            return `${parseFloat(value.toFixed(2))} ${targetUnit}`;
        };

        /**
         * Parses an array of energy strings and returns the primary energy value in MeV.
         * Assumes the first entry in the array is the most significant.
         * @param {string[]} energyArray - An array of energy strings (e.g., ["5.3 MeV", "5.2 MeV"]).
         * @returns {number} The energy value in MeV. Returns 0 if input is invalid.
         */

        const parseEnergyToMeV = (energyArray) => {
            if (!energyArray || energyArray.length === 0) return 0;
            const energyStr = energyArray[0];
            const parts = energyStr.split(' ');
            let value = parseFloat(parts[0]);

            if (isNaN(value)) return 0;

            const unit = parts[1]?.toLowerCase();
            if (unit && unit.includes('kev')) return value / 1000; // Convert keV to MeV
            return value;
        };

        /**
         * Parses a specific activity string, handling scientific notation (e.g., "3.7 x 10^10 Bq/g").
         * @param {string} saStr - The specific activity string.
         * @returns {number} The parsed specific activity as a number. Returns 0 if input is invalid.
         */

        const parseSpecificActivity = (saStr) => {
            if (!saStr) return 0;
            const parts = saStr.toLowerCase().split(' ');

            // Check for the specific "x 10^" format.

            if (parts.length < 3 || parts[1] !== 'x' || !parts[2].includes('10^')) {
                return parseFloat(saStr.replace(/,/g, '')); // Fallback for simple numbers.
            }

            const value = parseFloat(parts[0]);
            const exponent = parseInt(parts[2].split('^')[1]);

            if (isNaN(value) || isNaN(exponent)) return 0;

            return value * Math.pow(10, exponent);
        };


        //==============================================================================
        // --- REACT COMPONENTS & ICONS
        //==============================================================================

        /**
         * A simple SVG icon component.
         * @param {{path: string, className?: string}} props - Component props.
         * @param {string} props.path - The SVG path data for the icon.
         * @param {string} [props.className="w-5 h-5"] - Optional CSS classes.
         * @returns {JSX.Element} A React component rendering an SVG icon.
         */

        const Icon = ({ path, className = "w-5 h-5" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" className={className}>
                <path d={path} />
            </svg>
        );

        /**
         * A mapping of icon names to their corresponding SVG path data.
         */

        const ICONS = {
            copy: "M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-2-.9-2-2-2zm0 16H8V7h11v14z",
            check: "M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z",
            specificActivity: "M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 12.5l-4-4 1.41-1.41L10 12.67l4.59-4.59L16 9.5l-6 6z",
            search: "M10 18a7.952 7.952 0 0 0 4.897-1.688l4.396 4.396 1.414-1.414-4.396-4.396A8 8 0 1 0 10 18zm0-14a6 6 0 1 1-6 6 6 6 0 0 1 6-6z",
            database: "M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z",
            converter: "M6.99 11L3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z",
            calculator: "M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-2-.9-2-2-2zM8 17H6v-2h2v2zm0-4H6v-2h2v2zm0-4H6V7h2v2zm4 8H10v-2h2v2zm0-4H10v-2h2v2zm0-4H10V7h2v2zm4 8h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V7h2v2z",
            home: "M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5z",
            hourglass: "M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6z",
            radioactive: "M12 2a9.97 9.97 0 0 0-5.49 1.76L12 15.35l5.49-11.59A9.97 9.97 0 0 0 12 2zm-9.24 9a10.016 10.016 0 0 0 14.48 0L12 17.65l-9.24-6.65zM4.93 16.24l-2.17-1.45A10.003 10.003 0 0 0 12 22a10.003 10.003 0 0 0 9.24-7.21l-2.17 1.45L12 19.35l-7.07-3.11z",
            help: "M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z",
            clear: "M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z",
            filter: "M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z",
            sun: "M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zm-9-8c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1v2c0 .55.45 1 1 1zm0 16c.55 0 1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1v2c0 .55.45 1 1 1zM5.64 6.36c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L5.64 3.54c-.39-.39-1.02-.39-1.41 0s-.39 1.02 0 1.41L5.64 6.36zm12.72 12.72c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41l-1.41-1.41c-.39-.39-1.02-.39-1.41 0s-.39 1.02 0 1.41l1.41 1.41zM4.22 18.36c-.39.39-.39 1.02 0 1.41s1.02.39 1.41 0l1.41-1.41c.39-.39.39-1.02 0-1.41s-1.02-.39-1.41 0l-1.41 1.41zM18.36 4.22c-.39.39-.39 1.02 0 1.41l1.41 1.41c.39.39 1.02.39 1.41 0s.39-1.02 0-1.41l-1.41-1.41c-.39-.39-1.02-.39-1.41 0z",
            moon: "M10 2c-1.1 0-2.11.24-3.05.67A7.99 7.99 0 0010 20c4.41 0 8-3.59 8-8 0-4.04-2.98-7.39-6.95-7.95A7.98 7.98 0 0010 2z",
            compare: "M9.01 14H2v2h7.01v3L13 15l-3.99-4v3zm5.98-12H22v2h-7.01v3L11 3l3.99 4V4z",
            activity: "M12 6.5c2.49 0 4.5 2.01 4.5 4.5s-2.01 4.5-4.5 4.5S7.5 13.49 7.5 11 9.51 6.5 12 6.5M12 5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm0-2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8z",
            doseRate: "M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z",
            mass: "M20 6h-4V4c0-1.1-.9-2-2-2h-4c-1.1 0-2 .9-2 2v2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zM10 4h4v2h-4V4zm10 16H4V8h16v12z",
            series: "M21 8H3V6h18v2zm0 4H3v2h18v-2zm0 6H3v2h18v-2z",
            stopwatch: "M15 1H9v2h6V1zm-4 13h2V8h-2v6zm8.03-6.61l1.42-1.42c-.43-.51-.9-.98-1.41-1.41l-1.42 1.42A8.962 8.962 0 0012 4c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-1.68-.46-3.24-1.25-4.55l.22-.16zm-1.07-1.01A6.995 6.995 0 115.34 19.66 6.995 6.995 0 0117.96 6.38z",
        };

        //==============================================================================
        // --- TOAST NOTIFICATION SYSTEM
        // Provides pop-up messages for user feedback (e.g., "Copied to clipboard").
        //==============================================================================

        /**
         * @description React Context to provide toast notification functions to any component.
         */

        const ToastContext = React.createContext();

        /**
         * @description Provider component that manages the state of toast notifications.
         * It renders the toasts and provides a function to add new ones.
         * @param {{children: React.ReactNode}} props - The child components that will have access to the context.
         */

        const ToastProvider = ({ children }) => {
            const [toasts, setToasts] = React.useState([]);

            /**
             * Adds a new toast message to the list.
             * @param {string} message - The message to display in the toast.
             */

            const addToast = (message) => {
                const id = Date.now();
                setToasts(prevToasts => [...prevToasts, { id, message }]);
                // Automatically remove the toast after 3 seconds.
                setTimeout(() => {
                    removeToast(id);
                }, 3000);
            };

            /**
             * Removes a toast from the list by its ID.
             * @param {number} id - The unique ID of the toast to remove.
             */

            const removeToast = (id) => {
                setToasts(prevToasts => prevToasts.filter(toast => toast.id !== id));
            };

            return (
                <ToastContext.Provider value={{ addToast }}>
                    {children}

                    {/* Container for all visible toast notifications */}

                    <div className="fixed bottom-4 right-4 z-50 space-y-2">
                        {toasts.map(toast => (
                            <div key={toast.id} className="animate-toast-in bg-slate-800 dark:bg-slate-200 text-white dark:text-slate-800 px-4 py-3 rounded-lg shadow-lg flex items-center">
                                <Icon path={ICONS.check} className="w-5 h-5 mr-3 text-green-400" />
                                <span>{toast.message}</span>
                            </div>
                        ))}
                    </div>
                </ToastContext.Provider>
            );
        };

        /**
         * @description Custom hook to easily access the toast context's `addToast` function.
         * @returns {{addToast: (message: string) => void}}
         */

        const useToast = () => React.useContext(ToastContext);

        //==============================================================================
        // --- REUSABLE UI COMPONENTS
        //==============================================================================

        /**
         * @description A button that copies a given text string to the clipboard and shows a confirmation.
         * @param {{textToCopy: string}} props - The text to be copied.
         */

        const CopyButton = ({ textToCopy }) => {
            const [copied, setCopied] = React.useState(false);
            const { addToast } = useToast();

            const handleCopy = () => {
                if (textToCopy) {
                    navigator.clipboard.writeText(textToCopy).then(() => {
                        addToast('Copied to clipboard!');
                        setCopied(true);
                        // Revert the icon back to the copy icon after 2 seconds.
                        setTimeout(() => setCopied(false), 2000);
                    });
                }
            };
            
            return (
                <button onClick={handleCopy} className="p-2 text-slate-400 hover:text-sky-500 transition-colors" title="Copy to clipboard">
                    <Icon path={copied ? ICONS.check : ICONS.copy} className="w-5 h-5" />
                </button>
            );
        };

        /**
         * @description The main header for the application.
         * @param {{onHelpClick: () => void, theme: string, toggleTheme: () => void}} props - Handlers and state for help and theme toggling.
         */

        const Header = ({ onHelpClick, theme, toggleTheme }) => (
            <header className="relative text-center p-4 md:p-6 border-b border-slate-200 dark:border-slate-700">
                <h1 className="text-3xl md:text-4xl font-extrabold text-slate-800 dark:text-white">
                    Radionuclide Lookup Tool
                </h1>
                <p className="text-sm text-slate-500 dark:text-slate-400 mt-2">
                    Version: {VERSION} | Last Updated: {LAST_UPDATED}
                </p>
                <div className="absolute top-4 right-4 flex items-center gap-2">
                    <button onClick={toggleTheme} className="p-2 text-slate-500 hover:text-sky-500 dark:text-slate-400 dark:hover:text-sky-400 transition-colors" aria-label="Toggle dark mode">
                        <Icon path={theme === 'dark' ? ICONS.sun : ICONS.moon} className="w-6 h-6" />
                    </button>
                    <button onClick={onHelpClick} className="p-2 text-slate-500 hover:text-sky-500 dark:text-slate-400 dark:hover:text-sky-400 transition-colors" aria-label="Open User Manual">
                        <Icon path={ICONS.help} className="w-6 h-6" />
                    </button>
                </div>
            </header>
        );

        /**
         * @description The primary search input with auto-suggestions.
         * @param {object} props - Contains all state and handlers for the search functionality.
         * @param {string} props.nuclideName - The current value of the search input.
         * @param {React.RefObject} props.inputRef - Ref for the input element.
         * @param {(e: React.ChangeEvent) => void} props.handleNuclideNameChange - Handler for input changes.
         * @param {(e: React.KeyboardEvent) => void} props.handleKeyDown - Handler for keyboard events (arrow keys, Enter).
         * @param {() => void} props.onClear - Handler to clear the search input.
         * @param {Array<object>} props.suggestions - The list of suggestion items.
         * @param {number} props.activeSuggestionIndex - The index of the currently highlighted suggestion.
         * @param {React.RefObject} props.suggestionsRef - Ref for the suggestions list container.
         * @param {(nuclide: object) => void} props.handleNuclideSelection - Handler for when a nuclide is selected.
         */

        const SearchBar = ({ nuclideName, inputRef, handleNuclideNameChange, handleKeyDown, onClear, suggestions, activeSuggestionIndex, suggestionsRef, handleNuclideSelection }) => (
            <div className="relative p-4">
                <div className="relative">
                    <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <Icon path={ICONS.search} className="w-5 h-5 text-slate-400" />
                    </div>
                    <input
                        ref={inputRef}
                        type="text"
                        value={nuclideName}
                        onChange={handleNuclideNameChange}
                        onKeyDown={handleKeyDown}
                        placeholder="Search by name or symbol (e.g., U-238)"
                        className="w-full p-3 pl-10 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-sky-500 transition"
                    />
                    {nuclideName && (
                        <button onClick={onClear} className="absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-sky-500">
                            <Icon path={ICONS.clear} className="w-5 h-5" />
                        </button>
                    )}
                </div>
                {suggestions.length > 0 && (
                    <ul ref={suggestionsRef} className="absolute z-20 w-full bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-700 rounded-lg shadow-lg mt-2 max-h-60 overflow-y-auto">
                        {suggestions.map((s, i) => (
                            <li
                                key={s.symbol}
                                className={`p-3 cursor-pointer text-slate-700 dark:text-slate-200 hover:bg-sky-100 dark:hover:bg-sky-900 ${i === activeSuggestionIndex ? 'bg-sky-100 dark:bg-sky-900' : ''}`}
                                onClick={() => handleNuclideSelection(s)}
                            >
                                {s.name} ({s.symbol}) <span className="text-xs text-slate-500 dark:text-slate-400">{s.commonality}</span>
                            </li>
                        ))}
                    </ul>
                )}
            </div>
        );

        /**
         * @description The main navigation bar, which is responsive for mobile and desktop.
         * @param {{activeView: string, onNavClick: (view: string) => void}} props - The currently active view and the click handler.
         */

        const MainNav = ({ activeView, onNavClick }) => {
            const navItems = [ 
                { id: 'home', label: 'Home', icon: ICONS.home }, 
                { id: 'database', label: 'Database', icon: ICONS.database }, 
                { id: 'compare', label: 'Compare', icon: ICONS.compare }, 
                { id: 'calculator', label: 'Decay', icon: ICONS.calculator }, 
                { id: 'seriesCalculator', label: 'Series Decay', icon: ICONS.series }, 
                { id: 'equilibrium', label: 'Equilibrium', icon: ICONS.activity },
                { id: 'massActivity', label: 'Mass ↔ Activity', icon: ICONS.mass }, 
                { id: 'specificActivity', label: 'Specific Activity', icon: ICONS.specificActivity },
                { id: 'doseRate', label: 'Dose Rate', icon: ICONS.doseRate }, 
                { id: 'shielding', label: 'Shielding', icon: ICONS.doseRate }, // Reusing the shield icon
                { id: 'stayTime', label: 'Stay Time', icon: ICONS.stopwatch },
                { id: 'converter', label: 'Converter', icon: ICONS.converter } 
            ];

            // Internal component for a single navigation button.

            const NavButton = ({ item }) => (
                <button
                    onClick={() => onNavClick(item.id)}
                    className={`flex-shrink-0 w-full flex items-center justify-center gap-2 px-3 py-2 text-sm font-semibold rounded-md transition-all duration-200 ${
                        activeView === item.id 
                            ? 'bg-white dark:bg-slate-900 text-sky-600 dark:text-sky-400 shadow' 
                            : 'text-slate-600 dark:text-slate-300 hover:bg-white/50 dark:hover:bg-slate-700/50'
                    }`}
                >
                    <Icon path={item.icon} className="w-4 h-4" />
                    <span className="truncate">{item.label}</span>
                </button>
            );

            return (
                <div className="px-4 pb-2">
                    {/* Mobile: Horizontally Scrolling Row */}
                    <div className="md:hidden">
                        <div className="flex overflow-x-auto pb-2 -mx-4 px-4 gap-2">
                            {navItems.map(item => <NavButton key={item.id} item={item} />)}
                        </div>
                    </div>
                    {/* Desktop: Grid */}
                    <div className="hidden md:grid grid-cols-4 gap-2">
                        {navItems.map(item => <NavButton key={item.id} item={item} />)}
                    </div>
                </div>
            );
        };

        //==============================================================================
        // --- VIEW COMPONENTS
        // These components represent the main content areas of the application.
        //==============================================================================

        /**
         * @description The landing page view, showing suggestions, search history, or the main search result.
         * @param {object} props - Contains data and handlers for the home page.
         * @param {string | null} props.errorMessage - An error message to display, if any.
         * @param {object | null} props.result - The currently selected nuclide to display.
         * @param {Array<object>} props.randomSuggestions - A list of nuclides for quick selection.
         * @param {Array<object>} props.searchHistory - A list of recently viewed nuclides.
         * @param {(nuclide: object) => void} props.handleNuclideSelection - Handler for selecting a nuclide.
         * @param {() => void} props.handleClearHistory - Handler for clearing the search history.
         */

        const HomePage = ({ errorMessage, result, randomSuggestions, searchHistory, handleNuclideSelection, handleClearHistory }) => (
            <div className="p-4">
                {errorMessage && (
                    <div className="bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md mb-4" role="alert">
                        <p className="font-bold">Error</p><p>{errorMessage}</p>
                    </div>
                )}
                {result ? (
                    <NuclideCard nuclide={result} />
                ) : (
                    <div className="text-center p-8 bg-slate-100 dark:bg-slate-800/50 rounded-lg">
                        <h3 className="text-lg font-semibold text-slate-700 dark:text-slate-200">Welcome to the Radionuclide Database</h3>
                        <p className="text-slate-500 dark:text-slate-400 mt-2">Search for a nuclide, browse the database, or use the calculators.</p>
                        
                        <div className="mt-6">
                            <h4 className="font-semibold text-slate-600 dark:text-slate-300">Quick Suggestions:</h4>
                            <div className="flex flex-wrap justify-center gap-2 mt-2">
                                {randomSuggestions.map(n => (
                                    <button key={n.symbol} onClick={() => handleNuclideSelection(n)} className="px-3 py-1 bg-sky-100 dark:bg-sky-900/50 text-sky-700 dark:text-sky-300 text-sm rounded-full hover:bg-sky-200 dark:hover:bg-sky-800 transition">{n.name}</button>
                                ))}
                            </div>
                        </div>

                        {searchHistory.length > 0 && (
                            <div className="mt-6">
                                <div className="flex justify-center items-center gap-4 mb-2">
                                    <h4 className="font-semibold text-slate-600 dark:text-slate-300">Recent Searches:</h4>
                                    <button onClick={handleClearHistory} className="text-xs text-sky-600 dark:text-sky-400 hover:underline focus:outline-none">Clear History</button>
                                </div>
                                <div className="flex flex-wrap justify-center gap-2 mt-2">
                                    {searchHistory.map(n => (
                                        <button key={n.symbol} onClick={() => handleNuclideSelection(n)} className="px-3 py-1 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-200 text-sm rounded-full hover:bg-slate-300 dark:hover:bg-slate-600 transition">{n.name}</button>
                                    ))}
                                </div>
                            </div>
                        )}
                    </div>
                )}
            </div>
        );

        /**
         * @description Displays information about a single radionuclide. Can be a full detailed card or a compact version for lists.
         * @param {object} props - Component props.
         * @param {object} props.nuclide - The nuclide data object.
         * @param {boolean} [props.isCompact=false] - If true, renders a smaller card.
         * @param {(nuclide: object) => void} [props.onNuclideClick] - Click handler for the compact card.
         * @param {(seriesId: string) => void} [props.onDecaySeriesClick] - Click handler for the 'View Decay Series' button.
         * @param {string} [props.displayHalfLifeUnit] - The unit to display the half-life in for the detailed card.
         */

        const NuclideCard = ({ nuclide, isCompact = false, onNuclideClick, onDecaySeriesClick, displayHalfLifeUnit }) => {

            // Helper to generate a link to a data source.

            const getSourceLink = (sourceKey) => {
                const source = sources[sourceKey];
                return source ? <a href={source.url} target="_blank" rel="noopener noreferrer" className="text-sky-500 hover:underline" title={source.name}>[{Object.keys(sources).indexOf(sourceKey) + 1}]</a> : '';
            };

            // Internal component for displaying a single piece of data (e.g., Half-life).

            const DataPoint = ({ label, value, unit, sourceKey, iconPath, iconSymbol }) => {
                const displayValue = value && String(value).trim() ? String(value).trim() : 'N/A';
                const shouldAppendUnit = unit && displayValue !== 'N/A' && !displayValue.toLowerCase().includes(unit.toLowerCase());

                return (
                    <div className="flex items-start">
                        {iconPath && <Icon path={iconPath} className="w-5 h-5 text-sky-500 mr-3 flex-shrink-0 mt-1" />}
                        {iconSymbol && <span className="text-2xl font-serif text-sky-500 mr-3 -mt-1 w-5 text-center">{iconSymbol}</span>}
                        <div>
                            <p className="text-sm font-medium text-slate-500 dark:text-slate-400">{label}</p>
                            <p className="text-base font-semibold text-slate-800 dark:text-slate-100">
                                {displayValue}
                                {shouldAppendUnit ? ` ${unit}` : ''}
                                {sourceKey && <sup> {getSourceLink(sourceKey)}</sup>}
                            </p>
                        </div>
                    </div>
                );
            };

            // Compact view for database lists.

            if(isCompact) {
                return (
                    <div onClick={() => onNuclideClick(nuclide)} className="p-4 bg-white dark:bg-slate-800 rounded-lg shadow-md hover:shadow-lg hover:ring-2 hover:ring-sky-500 cursor-pointer transition-all duration-200">
                        <h3 className="font-bold text-lg text-slate-800 dark:text-white">{nuclide.name} <span className="text-slate-500 font-normal">({nuclide.symbol})</span></h3>
                        <div className="flex items-baseline text-sm mt-2"><Icon path={ICONS.hourglass} className="w-4 h-4 text-slate-400 mr-2"/><span className="font-medium text-slate-600 dark:text-slate-300">{formatHalfLife(nuclide.halfLife, getBestHalfLifeUnit(parseHalfLifeToSeconds(nuclide.halfLife)))}</span></div>
                        <div className="flex items-baseline text-sm mt-1"><Icon path={ICONS.radioactive} className="w-4 h-4 text-slate-400 mr-2"/><span className="text-slate-500 dark:text-slate-400">{(nuclide.emissionType || []).slice(0, 2).join(', ')}</span></div>
                    </div>
                );
            }

            // Full detailed view.

            return (
                    <div className="bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 animate-fade-in">
                        <h2 className="text-2xl font-bold text-slate-800 dark:text-white mb-1">
                            <a href={`https://en.wikipedia.org/wiki/${nuclide.name.replace(/ /g, '_')}`} 
                            target="_blank" 
                            rel="noopener noreferrer"
                            className="hover:text-sky-500 hover:underline transition-colors">
                            {nuclide.name}
                            </a> 
                           ({nuclide.symbol})
                        </h2>
                    <div className="text-sm font-medium text-sky-600 dark:text-sky-400 bg-sky-100 dark:bg-sky-900/50 px-2 py-1 rounded-full inline-block mb-4">{nuclide.category} - {nuclide.commonality}</div>
                    
                    <div className="grid md:grid-cols-2 gap-6 mt-4">
                        <DataPoint label="Half-life" value={formatHalfLife(nuclide.halfLife, displayHalfLifeUnit)} sourceKey={nuclide.sourceRef?.halfLife} iconPath={ICONS.hourglass} />
                        <DataPoint label="Decay Constant (λ)" value={standardizeScientificDisplay(nuclide.decayConstant)} sourceKey={nuclide.sourceRef?.decayConstant} iconSymbol="λ" />
                        <DataPoint label="Specific Activity" value={standardizeScientificDisplay(nuclide.specificActivity)} sourceKey={nuclide.sourceRef?.specificActivity} iconPath={ICONS.activity} />
                        <DataPoint label="Emission Type(s)" value={(nuclide.emissionType || []).join(', ')} sourceKey={nuclide.sourceRef?.emissionType} iconPath={ICONS.radioactive} />
                        <DataPoint label="Parent" value={nuclide.parent} sourceKey={nuclide.sourceRef?.parent} />
                        <DataPoint label="Daughter" value={nuclide.daughter} sourceKey={nuclide.sourceRef?.daughter} />
                        {nuclide.gammaConstant && (
                            <DataPoint label="Gamma Constant" value={nuclide.gammaConstant} sourceKey={nuclide.sourceRef?.gammaConstant} />
                        )}
                    </div>

                    <div className="mt-6 pt-6 border-t border-slate-200 dark:border-slate-700">
                        <h3 className="text-lg font-semibold text-slate-700 dark:text-slate-200 mb-3">Emission Energies</h3>
                        <div className="grid md:grid-cols-3 gap-4">
                            <DataPoint label="Alpha" value={(nuclide.emissionEnergies?.alpha || []).join(', ')} unit="MeV" iconSymbol="α"/>
                            <DataPoint label="Beta" value={(nuclide.emissionEnergies?.beta || []).join(', ')} unit="MeV" iconSymbol="β"/>
                            <DataPoint label="Gamma" value={(nuclide.emissionEnergies?.gamma || []).join(', ')} unit="MeV" iconSymbol="γ"/>
                        </div>
                    </div>

                    <div className="mt-6 pt-6 border-t border-slate-200 dark:border-slate-700">
                        <h3 className="text-lg font-semibold text-slate-700 dark:text-slate-200 mb-3">Common Uses</h3>
                        <ul className="list-disc list-inside text-slate-600 dark:text-slate-300 space-y-1">
                            {(nuclide.commonUses || []).map((use, i) => <li key={i}>{use}</li>)}
                        </ul>
                    </div>

                    {nuclide.decaySeriesId && (
                        <div className="mt-6 text-center">
                            <button onClick={() => onDecaySeriesClick(nuclide.decaySeriesId)} className="px-4 py-2 bg-slate-700 text-white rounded-lg font-semibold hover:bg-slate-800 transition">View Full Decay Series</button>
                        </div>
                    )}
                </div>
            );
        };

        /**
         * @description Displays a full decay series chain.
         * @param {{seriesId: string, onBack: () => void, onNuclideClick: (nuclide: object) => void}} props - The series ID and navigation handlers.
         */

        const DecaySeriesViewer = ({ seriesId, onBack, onNuclideClick }) => {
            const series = decaySeriesData.find(s => s.id === seriesId);
            if (!series) return <p>Decay series not found.</p>;

            // Internal component for a single nuclide in the chain.

            const NuclideNode = ({ step }) => (
                <div className="p-3 rounded-lg bg-slate-100 dark:bg-slate-700 text-center shadow">
                    <span
                        className="font-bold text-sky-600 dark:text-sky-400 cursor-pointer hover:underline"
                        onClick={() => {
                            const found = radionuclides.find(n => normalizeString(n.name) === normalizeString(step.nuclide));
                            if (found) onNuclideClick(found);
                        }}
                    >
                        {step.nuclide}
                    </span>
                    <div className="text-xs text-slate-500 dark:text-slate-400 mt-1">{step.halfLife}</div>
                </div>
            );

            // Internal component for the arrow showing the decay type between nuclides.

            const DecayArrow = ({ decayType }) => (
                <div className="flex-grow flex items-center justify-center relative mx-2">
                    <div className="absolute left-0 top-1/2 w-full h-0.5 bg-slate-300 dark:bg-slate-600"></div>
                    <div className="relative bg-slate-100 dark:bg-slate-800 px-2 text-center">
                        <span className="text-sm font-semibold text-slate-600 dark:text-slate-300">{decayType}</span>
                        <span className="text-slate-400 block -mt-1">&rarr;</span>
                    </div>
                </div>
            );
            
            return (
                <div className="p-4 animate-fade-in">
                    <button onClick={onBack} className="mb-4 px-4 py-2 bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-100 rounded-lg font-semibold hover:bg-slate-300 dark:hover:bg-slate-600 transition">&larr; Back to Result</button>
                    <div className="bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg overflow-x-auto">
                        <h2 className="text-xl font-bold text-slate-800 dark:text-white mb-4">{series.name}</h2>
                        <div className="flex flex-col space-y-4">
                            {series.chain.map((step, index) => {
                                if (step.decayType === 'Stable') {
                                    return <NuclideNode key={index} step={step} />;
                                }

                                // Special handling for branched decays (e.g., Alpha / Beta).

                                const hasBranch = step.decayType.includes('/');
                                if (hasBranch) {
                                    const decayTypes = step.decayType.split(' / ');
                                    const daughters = step.daughter.split(' / ');
                                    return (
                                        <div key={index} className="flex flex-col items-center">
                                            <NuclideNode step={step} />
                                            <div className="flex justify-center w-full mt-2">
                                                <div className="flex flex-col items-center w-1/2">
                                                    <DecayArrow decayType={decayTypes[0]}/>
                                                    <div className="mt-2">
                                                        <NuclideNode step={{ nuclide: daughters[0].trim(), halfLife: '...' }} />
                                                    </div>
                                                </div>
                                                <div className="flex flex-col items-center w-1/2">
                                                    <DecayArrow decayType={decayTypes[1]}/>
                                                    <div className="mt-2">
                                                        <NuclideNode step={{ nuclide: daughters[1].trim(), halfLife: '...' }} />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    )
                                }

                                // Standard linear decay step.

                                return (
                                    <div key={index} className="flex flex-col items-center">
                                        <NuclideNode step={step} />
                                        {index < series.chain.length - 1 && <DecayArrow decayType={step.decayType} />}
                                    </div>
                                );
                            })}
                        </div>
                    </div>
                </div>
            );
        };

        /**
         * @description A sidebar for filtering and sorting the nuclide database. It is responsive.
         * @param {{filterProps: object, isFiltersVisible: boolean, setIsFiltersVisible: (isVisible: boolean) => void}} props
         */

        const FilterSidebar = ({ filterProps, isFiltersVisible, setIsFiltersVisible }) => {

            // Destructure all filter-related state and handlers from the filterProps object.

            const {
                sortBy, setSortBy, sortOrder, setSortOrder,
                selectedCategory, setSelectedCategory, allCategories,
                selectedEmissionType, setSelectedEmissionType, allEmissionTypes,
                selectedCommonality, setSelectedCommonality, allCommonalityCategories,
                minAlphaEnergy, setMinAlphaEnergy, maxAlphaEnergy, setMaxAlphaEnergy,
                minBetaEnergy, setMinBetaEnergy, maxBetaEnergy, setMaxBetaEnergy,
                minGammaEnergy, setMinGammaEnergy, maxGammaEnergy, setMaxGammaEnergy,
                minHalfLife, setMinHalfLife, maxHalfLife, setMaxHalfLife, halfLifeFilterUnit, setHalfLifeFilterUnit

            } = filterProps;

            return (
                <>

                    {/* Backdrop for mobile view when the sidebar is open */}

                    <div className={`fixed inset-0 bg-black/50 z-40 lg:hidden transition-opacity ${isFiltersVisible ? 'opacity-100' : 'opacity-0 pointer-events-none'}`}
                        onClick={() => setIsFiltersVisible(false)}
                        aria-hidden="true">
                    </div>

                    {/* The actual sidebar panel */}

                    <aside
                        className={`fixed top-0 left-0 w-80 h-full bg-slate-50 dark:bg-slate-900 z-50 transform transition-transform duration-300 ease-in-out lg:relative lg:w-auto lg:h-auto lg:transform-none lg:col-span-1 lg:bg-transparent lg:dark:bg-transparent ${
                            isFiltersVisible ? 'translate-x-0' : '-translate-x-full lg:translate-x-0'
                        }`}
                    >
                        <div className="p-4 space-y-4 h-full overflow-y-auto lg:bg-slate-50 lg:dark:bg-slate-800/50 rounded-lg">
                            <div className="flex justify-between items-center border-b border-slate-300 dark:border-slate-600 pb-2">
                                <h3 className="text-lg font-bold text-slate-800 dark:text-white">Filters & Sorting</h3>
                                <button onClick={() => setIsFiltersVisible(false)} className="lg:hidden p-1 rounded-full text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-700">
                                    <Icon path={ICONS.clear} className="w-6 h-6" />
                                </button>
                            </div>

                            {/* Sorting controls */}

                            <div>
                                <label className="block text-sm font-medium text-slate-700 dark:text-slate-300">Sort by</label>
                                <select value={sortBy} onChange={e => setSortBy(e.target.value)} className="mt-1 w-full p-2 bg-white dark:bg-slate-700 border-slate-300 dark:border-slate-600 rounded-md">
                                    <option value="name">Name</option>
                                    <option value="halfLife">Half-life</option>
                                    <option value="alphaEnergy">Alpha Energy</option>
                                    <option value="betaEnergy">Beta Energy</option>
                                    <option value="gammaEnergy">Gamma Energy</option>
                                </select>
                                <select value={sortOrder} onChange={e => setSortOrder(e.target.value)} className="mt-1 w-full p-2 bg-white dark:bg-slate-700 border-slate-300 dark:border-slate-600 rounded-md">
                                    <option value="asc">Ascending</option>
                                    <option value="desc">Descending</option>
                                </select>
                            </div>

                            {/* Filtering controls */}

                            <div><label className="block text-sm font-medium text-slate-700 dark:text-slate-300">Category</label><select value={selectedCategory} onChange={e => setSelectedCategory(e.target.value)} className="mt-1 w-full p-2 bg-white dark:bg-slate-700 border-slate-300 dark:border-slate-600 rounded-md">{allCategories.map(c => <option key={c} value={c}>{c}</option>)}</select></div>
                            <div><label className="block text-sm font-medium text-slate-700 dark:text-slate-300">Emission Type</label><select value={selectedEmissionType} onChange={e => setSelectedEmissionType(e.target.value)} className="mt-1 w-full p-2 bg-white dark:bg-slate-700 border-slate-300 dark:border-slate-600 rounded-md">{allEmissionTypes.map(c => <option key={c} value={c}>{c}</option>)}</select></div>
                            <div><label className="block text-sm font-medium text-slate-700 dark:text-slate-300">Commonality</label><select value={selectedCommonality} onChange={e => setSelectedCommonality(e.target.value)} className="mt-1 w-full p-2 bg-white dark:bg-slate-700 border-slate-300 dark:border-slate-600 rounded-md">{allCommonalityCategories.map(c => <option key={c} value={c}>{c}</option>)}</select></div>
                            
                            {/* Half-life range filter */}

                            <div>
                                <h4 className="text-md font-semibold text-slate-700 dark:text-slate-300 mt-4">Half-life</h4>
                            <div className="flex gap-2 mt-2">
                                <input type="number" placeholder="Min" value={minHalfLife} onChange={e => setMinHalfLife(e.target.value)} className="w-full p-1 rounded-md text-sm bg-slate-100 dark:bg-slate-700 border-slate-300 dark:border-slate-600" />
                                <input type="number" placeholder="Max" value={maxHalfLife} onChange={e => setMaxHalfLife(e.target.value)} className="w-full p-1 rounded-md text-sm bg-slate-100 dark:bg-slate-700 border-slate-300 dark:border-slate-600" />
                            </div>
                                <select value={halfLifeFilterUnit} onChange={e => setHalfLifeFilterUnit(e.target.value)} className="mt-1 w-full p-2 bg-white dark:bg-slate-700 border-slate-300 dark:border-slate-600 rounded-md">
                                    <option value="seconds">Seconds</option>
                                    <option value="minutes">Minutes</option>
                                    <option value="hours">Hours</option>
                                    <option value="days">Days</option>
                                    <option value="years">Years</option>
                                </select>
                            </div>

                            {/* Energy range filters */}

                            <div>
                                <h4 className="text-md font-semibold text-slate-700 dark:text-slate-300 mt-4">Energy (MeV)</h4>
                                <div className="space-y-2 mt-2">
                                    <label className="text-sm">Alpha</label><div className="flex gap-2"><input type="number" placeholder="Min" value={minAlphaEnergy} onChange={e => setMinAlphaEnergy(e.target.value)} className="w-full p-1 rounded-md text-sm bg-slate-100 dark:bg-slate-700 border-slate-300 dark:border-slate-600" /><input type="number" placeholder="Max" value={maxAlphaEnergy} onChange={e => setMaxAlphaEnergy(e.target.value)} className="w-full p-1 rounded-md text-sm bg-slate-100 dark:bg-slate-700 border-slate-300 dark:border-slate-600" /></div>
                                    <label className="text-sm">Beta</label><div className="flex gap-2"><input type="number" placeholder="Min" value={minBetaEnergy} onChange={e => setMinBetaEnergy(e.target.value)} className="w-full p-1 rounded-md text-sm bg-slate-100 dark:bg-slate-700 border-slate-300 dark:border-slate-600" /><input type="number" placeholder="Max" value={maxBetaEnergy} onChange={e => setMaxBetaEnergy(e.target.value)} className="w-full p-1 rounded-md text-sm bg-slate-100 dark:bg-slate-700 border-slate-300 dark:border-slate-600" /></div>
                                    <label className="text-sm">Gamma</label><div className="flex gap-2"><input type="number" placeholder="Min" value={minGammaEnergy} onChange={e => setMinGammaEnergy(e.target.value)} className="w-full p-1 rounded-md text-sm bg-slate-100 dark:bg-slate-700 border-slate-300 dark:border-slate-600" /><input type="number" placeholder="Max" value={maxGammaEnergy} onChange={e => setMaxGammaEnergy(e.target.value)} className="w-full p-1 rounded-md text-sm bg-slate-100 dark:bg-slate-700 border-slate-300 dark:border-slate-600" /></div>
                                </div>
                            </div>
                        </div>
                    </aside>
                </>
            );
        };
        
        /**
         * @description The main view for Browse the entire database with filters.
         * @param {object} props - Component props.
         * @param {Array<object>} props.filteredList - The list of nuclides after filtering and sorting.
         * @param {object} props.filterProps - All state and handlers related to filtering.
         * @param {(nuclide: object) => void} props.onNuclideClick - Handler for when a compact nuclide card is clicked.
         * @param {boolean} props.isFiltersVisible - State for mobile filter visibility.
         * @param {(isVisible: boolean) => void} props.setIsFiltersVisible - Handler to toggle mobile filter visibility.
         */

        const DatabaseView = ({ filteredList, filterProps, onNuclideClick, isFiltersVisible, setIsFiltersVisible }) => {
            return (
                <div className="relative">
                    {/* Button to show filters on mobile */}
                    <div className="px-4 pt-4 lg:hidden">
                        <button
                            onClick={() => setIsFiltersVisible(true)}
                            className="w-full flex items-center justify-center gap-2 px-4 py-2 bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-100 rounded-lg font-semibold hover:bg-slate-300 dark:hover:bg-slate-600 transition">
                            <Icon path={ICONS.filter} className="w-5 h-5" /> Filters & Sorting
                        </button>
                    </div>

                    <div className="grid lg:grid-cols-4 gap-4 p-4">
                        <FilterSidebar
                            filterProps={filterProps}
                            isFiltersVisible={isFiltersVisible}
                            setIsFiltersVisible={setIsFiltersVisible}/>
                        <div className="lg:col-span-3 bg-slate-100 dark:bg-slate-800/50 rounded-lg p-4 h-[calc(100vh-350px)] md:h-[calc(100vh-320px)] lg:h-auto overflow-y-auto">
                            <p className="text-sm text-slate-500 dark:text-slate-400 mb-4">Showing {filteredList.length} of {radionuclides.length} nuclides.</p>
                            <div className="grid sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4">
                                {filteredList.map(n => <NuclideCard key={n.symbol} nuclide={n} isCompact={true} onNuclideClick={onNuclideClick} />)}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };


        /**
         * @description A component that provides a user interface for converting between
         * various radiological and physical units, such as activity, dose, and energy.
         */

        const UnitConverter = () => {

            // --- STATE MANAGEMENT ---

            const [value, setValue] = React.useState(''); // The input value to be converted
            const [fromUnit, setFromUnit] = React.useState('Gy'); // The unit to convert from
            const [toUnit, setToUnit] = React.useState('rad'); // The unit to convert to
            const [result, setResult] = React.useState(''); // The calculated result of the conversion
            const [error, setError] = React.useState(''); // Any error messages to display

            // --- DATA & CONFIGURATION ---

            /**
             * Defines the grouping of units for display in dropdown menus.
             */
            const units = {
                'Activity': ['Bq', 'kBq', 'MBq', 'GBq', 'Ci', 'mCi', 'µCi', 'dps', 'dpm'],
                'Radiation Dose': ['Gy', 'rad', 'Sv', 'rem', 'R', 'cGy', 'mrem'],
                'Dose Rate': ['µSv/hr', 'mrem/hr', 'mGy/hr', 'mrad/hr'],
                'Energy': ['J', 'eV', 'keV', 'MeV'],
            };

            /**
             * Defines the conversion factors for each unit relative to a base unit for its category.
             * The `base` property ensures that only units of the same type can be converted (e.g., activity to activity).
             */

            const factors = {
                // Radiation Dose (Base: Gray)
                'Gy':   { base: 'dose',     factor: 1 },
                'rad':  { base: 'dose',     factor: 0.01 },
                'Sv':   { base: 'dose',     factor: 1 },
                'rem':  { base: 'dose',     factor: 0.01 },
                'R':    { base: 'dose',     factor: 0.00877 }, // Roentgen to Gray in air
                'cGy':  { base: 'dose',     factor: 0.01 },
                'mrem': { base: 'dose',     factor: 1e-5 },

                // Activity (Base: Becquerel)
                'Bq':   { base: 'activity', factor: 1 },
                'kBq':  { base: 'activity', factor: 1e3 },
                'MBq':  { base: 'activity', factor: 1e6 },
                'GBq':  { base: 'activity', factor: 1e9 },
                'Ci':   { base: 'activity', factor: 3.7e10 },
                'mCi':  { base: 'activity', factor: 3.7e7 },
                'µCi':  { base: 'activity', factor: 3.7e4 },
                'dps':  { base: 'activity', factor: 1 },
                'dpm':  { base: 'activity', factor: 1 / 60 },

                // Dose Rate (Base: Sievert/hour)
                'µSv/hr':  { base: 'doseRate', factor: 1e-6 },
                'mrem/hr': { base: 'doseRate', factor: 1e-5 },
                'mGy/hr':  { base: 'doseRate', factor: 1e-3 },
                'mrad/hr': { base: 'doseRate', factor: 1e-5 },

                // Energy (Base: Joule)
                'J':    { base: 'energy',   factor: 1 },
                'eV':   { base: 'energy',   factor: 1.60218e-19 },
                'keV':  { base: 'energy',   factor: 1.60218e-16 },
                'MeV':  { base: 'energy',   factor: 1.60218e-13 },
            };

            // --- LOGIC & SIDE EFFECTS ---

            /**
             * This effect ensures that if a user changes the 'From' unit to a different
             * category, the 'To' unit automatically updates to a compatible unit.
             */

            React.useEffect(() => {
                const fromBase = factors[fromUnit]?.base;
                const toBase = factors[toUnit]?.base;

                // If 'from' and 'to' units are from different categories...

                if (fromBase && fromBase !== toBase) {

                    // ...find the first unit that is compatible with the new 'from' category...

                    const compatibleUnit = Object.keys(factors).find(u => factors[u].base === fromBase);

                    // ...and set it as the new 'to' unit.

                    if (compatibleUnit) {
                        setToUnit(compatibleUnit);
                    }
                }
            }, [fromUnit]); // Reruns whenever the 'from' unit changes.

            /**
             * Performs the unit conversion. Wrapped in `useCallback` for optimization.
             */

            const handleConvert = React.useCallback(() => {
                const val = parseFloat(value);
                if (isNaN(val)) {
                    if (value) setError("Invalid input value."); // Show error only if there's text
                    setResult('');
                    return;
                }

                const from = factors[fromUnit];
                const to = factors[toUnit];

                // Check for incompatible unit types (e.g., converting Gy to Bq)

                if (!from || !to || from.base !== to.base) {
                    setError("Cannot convert between these units.");
                    setResult('');
                    return;
                }

                // Core conversion formula: (value * from_factor) / to_factor

                const convertedVal = val * from.factor / to.factor;
                setError('');
                setResult(convertedVal.toPrecision(4));
            }, [value, fromUnit, toUnit]);

            /**
             * This effect automatically triggers the conversion whenever any of the
             * input values or units change.
             */

            React.useEffect(() => {
                handleConvert();
            }, [value, fromUnit, toUnit, handleConvert]);

            /**
             * Swaps the 'from' and 'to' units if they are compatible.
             */

            const handleSwap = () => {
                const from = factors[fromUnit];
                const to = factors[toUnit];
                if (from && to && from.base === to.base) {
                    setFromUnit(toUnit);
                    setToUnit(fromUnit);
                } else {
                    setError("Cannot swap incompatible units.");
                }
            };

            // Dynamically create a list of units compatible with the current 'From' unit.
            // This is used to populate the 'To' unit dropdown.

            const currentBase = factors[fromUnit]?.base;
            const compatibleUnits = Object.fromEntries(
                Object.entries(units)
                    .map(([group, unitList]) => {
                        const filteredList = unitList.filter(u => factors[u]?.base === currentBase);
                        return [group, filteredList];
                    })
                    .filter(([group, unitList]) => unitList.length > 0)
            );

            // --- JSX RENDERING ---

            return (
                <div className="p-4 animate-fade-in">
                    <div className="max-w-xl mx-auto bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg">
                        <h2 className="text-xl font-bold text-slate-800 dark:text-white mb-4">Unit Converter</h2>
                        <div className="space-y-4">
                            {/* Value Input */}
                            <div>
                                <label className="text-sm font-medium text-slate-700 dark:text-slate-300">Value</label>
                                <input type="number" value={value} onChange={e => setValue(e.target.value)} placeholder="Enter a value" className="w-full mt-1 p-2 rounded-md bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600" />
                            </div>
                            
                            {/* Unit Selectors and Swap Button */}
                            <div className="flex flex-col sm:flex-row gap-4 items-end">
                                <div className="w-full sm:flex-1">
                                    <label className="block text-sm font-medium text-slate-700 dark:text-slate-300">From</label>
                                    <select value={fromUnit} onChange={e => setFromUnit(e.target.value)} className="w-full mt-1 p-2 rounded-md bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600">
                                        {Object.entries(units).map(([group, list]) => (
                                            <optgroup label={group} key={group}>
                                                {list.map(u => <option key={u} value={u}>{u}</option>)}
                                            </optgroup>
                                        ))}
                                    </select>
                                </div>
                                
                                <div className="flex-shrink-0 pb-1">
                                    <button onClick={handleSwap} className="p-2 rounded-full bg-slate-200 dark:bg-slate-600 hover:bg-sky-200 dark:hover:bg-sky-700 transition" aria-label="Swap units">
                                        {/* Swap Icon SVG */}
                                        <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 text-slate-600 dark:text-slate-200" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4" /></svg>
                                    </button>
                                </div>
                                
                                <div className="w-full sm:flex-1">
                                    <label className="block text-sm font-medium text-slate-700 dark:text-slate-300">To</label>
                                    <select value={toUnit} onChange={e => setToUnit(e.target.value)} className="w-full mt-1 p-2 rounded-md bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600">
                                        {Object.entries(compatibleUnits).map(([group, list]) => (
                                            <optgroup label={group} key={group}>
                                                {list.map(u => <option key={u} value={u}>{u}</option>)}
                                            </optgroup>
                                        ))}
                                    </select>
                                </div>
                            </div>
                            
                            {/* Error and Result Display */}

                            {error && <p className="text-red-500 text-sm text-center">{error}</p>}
                            {result && !error && (
                                <div className="flex items-center justify-center p-3 bg-slate-100 dark:bg-slate-700 rounded-lg mt-4">
                                    <p className="text-lg font-bold text-center flex-grow">{value} {fromUnit} = {result} {toUnit}</p>
                                    <CopyButton textToCopy={result} />
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        /**
         * @description A comprehensive calculator for various radioactive decay scenarios,
         * including finding remaining/initial activity, time elapsed, and daughter product activity.
         * It also generates data for a visual decay chart.
         * @param {{radionuclides: Array<object>}} props - The full list of radionuclide data.
         */

        const DecayCalculator = ({ radionuclides }) => {

            // --- STATE & CONSTANTS ---

            // State for UI controls and inputs
            const [selectedNuclide, setSelectedNuclide] = React.useState(null);
            const [calculationMode, setCalculationMode] = React.useState('findRemaining'); // 'findRemaining', 'findTime', 'findInitial', 'findDaughterActivity'
            const [initialActivity, setInitialActivity] = React.useState('100');
            const [remainingActivity, setRemainingActivity] = React.useState('');
            const [timeElapsed, setTimeElapsed] = React.useState('1');
            const [timeUnit, setTimeUnit] = React.useState('days');
            
            // State for calculation outputs

            const [result, setResult] = React.useState(null);
            const [chartData, setChartData] = React.useState(null);
            const [error, setError] = React.useState('');

            const timeUnits = ['seconds', 'minutes', 'hours', 'days', 'years'];

            /**
             * Memoized list of radionuclides, filtering out stable ones and sorting them.
             * Sorting is done first by commonality (Common > Moderate > Rare), then alphabetically by name.
             * `useMemo` prevents re-sorting on every render.
             */

            const sortedRadionuclides = React.useMemo(() => {
                const commonalityOrder = { 'Common': 3, 'Moderate': 2, 'Rare': 1 };
                return [...radionuclides]
                    .filter(r => r.halfLife !== 'Stable')
                    .sort((a, b) => {
                        const orderA = commonalityOrder[a.commonality] || 0;
                        const orderB = commonalityOrder[b.commonality] || 0;
                        if (orderA !== orderB) {
                            return orderB - orderA; // Sort descending by commonality
                        }
                        return a.name.localeCompare(b.name); // Then sort ascending by name
                    });
            }, [radionuclides]);


            // --- CALCULATION LOGIC ---

            /**
             * Main handler that performs the decay calculation based on the current mode and inputs.
             */

            const handleCalculate = () => {
                // Initial validation
                if (!selectedNuclide) {
                    setError('Please select a radionuclide.');
                    setResult(null);
                    setChartData(null);
                    return;
                }
                const T1_seconds = parseHalfLifeToSeconds(selectedNuclide.halfLife);
                if (T1_seconds === Infinity) {
                    setError('Cannot calculate decay for a stable nuclide.');
                    setResult(null);
                    setChartData(null);
                    return;
                }
                
                // Reset state before calculation

                const unitConversions = { 'seconds': 1, 'minutes': 60, 'hours': 3600, 'days': 86400, 'years': 31557600 };
                setError('');
                setResult(null);
                setChartData(null);

                try {
                    const t_input = parseFloat(timeElapsed);
                    if (isNaN(t_input) || t_input < 0) { throw new Error('Time elapsed must be a non-negative number.'); }
                    const t_seconds = t_input * unitConversions[timeUnit];
                    const lambda1 = Math.log(2) / T1_seconds;

                    /**
                     * Helper function to generate chart data for a simple parent->daughter decay.
                     * @param {number} N0 - The initial activity (or number of atoms) of the parent.
                     */

                    const generateSingleNuclideChart = (N0) => {
                        const labels = [];
                        const parentData = [];
                        const totalTime = t_input * 2; // Chart extends to twice the entered time
                        const steps = 100;
                        for (let i = 0; i <= steps; i++) {
                            const timePoint = (totalTime / steps) * i;
                            const timePoint_seconds = timePoint * unitConversions[timeUnit];
                            labels.push(timePoint.toFixed(2));
                            parentData.push(N0 * Math.exp(-lambda1 * timePoint_seconds));
                        }
                        setChartData({ labels, parentData, parentName: selectedNuclide.name, timeUnit });
                    };

                    // Switch based on the selected calculation mode

                    switch (calculationMode) {
                        case 'findRemaining': {
                            const N0 = parseFloat(initialActivity);
                            if (isNaN(N0) || N0 < 0) { throw new Error('Initial activity must be a non-negative number.'); }

                            // Using standard decay formula: N(t) = N₀ * (0.5)^(t / T½)

                            const Nt = N0 * Math.pow(0.5, t_seconds / T1_seconds);
                            setResult({ value: Nt.toPrecision(4), unit: '', label: 'Remaining Activity' });
                            generateSingleNuclideChart(N0);
                            break;
                        }
                        case 'findTime': {
                            const N0 = parseFloat(initialActivity);
                            const Nt = parseFloat(remainingActivity);
                            if (isNaN(N0) || isNaN(Nt) || N0 < 0 || Nt < 0) { throw new Error('Activities must be non-negative numbers.'); }
                            if (Nt > N0) { throw new Error('Remaining activity cannot be greater than initial activity.'); }
                            if (Nt === 0) { // Practically infinite time
                                setResult({ value: 'Infinite', unit: '', label: 'Time Elapsed' });
                                break;
                            }

                            // Using rearranged decay formula: t = -T½ * log₂(N(t) / N₀)

                            const t_seconds_calc = -T1_seconds * (Math.log(Nt / N0) / Math.log(2));
                            const t_final = t_seconds_calc / unitConversions[timeUnit];
                            setResult({ value: t_final.toPrecision(4), unit: timeUnit, label: 'Time Elapsed' });
                            break;
                        }
                        case 'findInitial': {
                            const Nt = parseFloat(remainingActivity);
                            if (isNaN(Nt) || Nt < 0) { throw new Error('Remaining activity must be a non-negative number.'); }

                            // Using rearranged decay formula: N₀ = N(t) / (0.5)^(t / T½)

                            const N0 = Nt / Math.pow(0.5, t_seconds / T1_seconds);
                            setResult({ value: N0.toPrecision(4), unit: '', label: 'Initial Activity' });
                            generateSingleNuclideChart(N0);
                            break;
                        }
                        case 'findDaughterActivity': {
                            const N0_parent = parseFloat(initialActivity);
                            if (isNaN(N0_parent) || N0_parent < 0) { throw new Error('Initial parent activity must be a non-negative number.'); }
                            
                            // Check for branching decay, which this simple model doesn't handle.
                            if (selectedNuclide.daughter.includes('/') || selectedNuclide.daughter.includes(' or ')) {
                                throw new Error(`Cannot calculate daughter activity for "${selectedNuclide.name}" due to branching decay. Please use the Series Decay calculator for a more detailed analysis.`);
                            }

                            // Find the daughter nuclide in the database

                            const daughterName = selectedNuclide.daughter.split('(')[0].trim();
                            const daughterNuclide = radionuclides.find(n => normalizeString(n.name) === normalizeString(daughterName));
                            if (!daughterNuclide) { throw new Error(`Daughter nuclide "${daughterName}" not found in the database.`); }
                            
                            const T2_seconds = parseHalfLifeToSeconds(daughterNuclide.halfLife);
                            let A_daughter, Nt_parent_activity;
                            
                            // Remaining parent activity is always calculated the same way

                            Nt_parent_activity = N0_parent * Math.exp(-lambda1 * t_seconds);

                            if (T2_seconds === Infinity) { // Daughter is stable
                                A_daughter = 0; // The activity of a stable nuclide is zero.
                            } else {
                                const lambda2 = Math.log(2) / T2_seconds;

                                // This section implements the Bateman equation for a 2-nuclide chain.
                                // Special case for when decay constants are equal (λ₁ ≈ λ₂)

                                if (Math.abs(lambda1 - lambda2) < 1e-12) {
                                    A_daughter = N0_parent * lambda2 * t_seconds * Math.exp(-lambda1 * t_seconds);
                                } else { // Standard Bateman equation case (λ₁ ≠ λ₂)
                                    A_daughter = (lambda2 / (lambda2 - lambda1)) * N0_parent * (Math.exp(-lambda1 * t_seconds) - Math.exp(-lambda2 * t_seconds));
                                }
                            }
                            
                            setResult({
                                parent: { value: Nt_parent_activity.toPrecision(4), name: selectedNuclide.name },
                                daughter: { value: A_daughter.toPrecision(4), name: daughterNuclide.name, isStable: T2_seconds === Infinity }
                            });
                            
                            // Generate chart data for parent and daughter activities

                            const labels = [];
                            const parentData = [];
                            const daughterData = [];
                            const totalTime = t_input * 2;
                            const steps = 100;
                            for (let i = 0; i <= steps; i++) {
                                const timePoint = (totalTime / steps) * i;
                                const timePoint_seconds = timePoint * unitConversions[timeUnit];
                                labels.push(timePoint.toFixed(2));
                                
                                parentData.push(N0_parent * Math.exp(-lambda1 * timePoint_seconds));

                                if (T2_seconds === Infinity) {
                                    daughterData.push(0);
                                } else {
                                    const lambda2 = Math.log(2) / T2_seconds;
                                    let d_activity;
                                    if (Math.abs(lambda1 - lambda2) < 1e-12) {
                                        d_activity = N0_parent * lambda2 * timePoint_seconds * Math.exp(-lambda1 * timePoint_seconds);
                                    } else {
                                        d_activity = (lambda2 / (lambda2 - lambda1)) * N0_parent * (Math.exp(-lambda1 * timePoint_seconds) - Math.exp(-lambda2 * timePoint_seconds));
                                    }
                                    daughterData.push(d_activity);
                                }
                            }
                            setChartData({ labels, parentData, daughterData, parentName: selectedNuclide.name, daughterName: daughterNuclide.name, timeUnit, daughterIsStable: T2_seconds === Infinity });
                            break;
                        }
                        default:
                            throw new Error('Invalid calculation mode.');
                    }
                } catch (e) {
                    setError(e.message);
                }
            };            
            
            // --- UI & RENDERING ---

            /**
             * A helper function to render a labeled input field, reducing JSX repetition.
             * @param {string} label - The text label for the field.
             * @param {string|number} value - The current value of the input.
             * @param {(val: string) => void} setter - The state setter function for the input.
             * @param {boolean} isEnabled - Toggles the enabled/disabled state of the field.
             * @param {string} [unitValue] - The current value of the unit dropdown.
             * @param {(val: string) => void} [unitSetter] - The state setter for the unit dropdown.
             * @param {Array<string>} [unitOptions] - The options for the unit dropdown.
             */

            const renderInputField = (label, value, setter, isEnabled, unitValue, unitSetter, unitOptions) => (
                <div>
                    <label className={`block text-sm font-medium ${isEnabled ? 'text-slate-700 dark:text-slate-300' : 'text-slate-400 dark:text-slate-500'}`}>{label}</label>
                    <div className="flex gap-2 mt-1">
                        <input type="number" value={value} onChange={e => setter(e.target.value)} disabled={!isEnabled} className="w-full p-2 rounded-md bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 disabled:bg-slate-200 dark:disabled:bg-slate-800 disabled:cursor-not-allowed" />
                        {unitOptions && (
                             <select value={unitValue} onChange={e => unitSetter(e.target.value)} disabled={!isEnabled} className="p-2 rounded-md bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 disabled:bg-slate-200 dark:disabled:bg-slate-800 disabled:cursor-not-allowed">
                                 {unitOptions.map(u => <option key={u} value={u}>{u}</option>)}
                            </select>
                        )}
                    </div>
                </div>
            );

            return (
                <div className="p-4 animate-fade-in">
                    <div className="max-w-lg mx-auto bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg">
                        <h2 className="text-xl font-bold text-slate-800 dark:text-white mb-4">Radioactive Decay Calculator</h2>
                        <div className="space-y-4">

                            {/* Radionuclide Selector */}

                            <div>
                                <label className="text-sm font-medium text-slate-700 dark:text-slate-300">Radionuclide</label>
                                <select 
                                    onChange={(e) => setSelectedNuclide(radionuclides.find(r => r.symbol === e.target.value))} 
                                    className="w-full mt-1 p-2 rounded-md bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600"
                                >
                                    <option value="">Select a nuclide...</option>
                                    {sortedRadionuclides.map(r => <option key={r.symbol} value={r.symbol}>{r.name} ({r.symbol})</option>)}
                                </select>
                            </div>
                            
                            {/* Calculation Mode Selector */}

                            <div>
                                <label className="text-sm font-medium text-slate-700 dark:text-slate-300">Calculate</label>
                                <div className="grid grid-cols-2 gap-x-4 gap-y-2 mt-2">
                                    {['findRemaining', 'findTime', 'findInitial', 'findDaughterActivity'].map(mode => (
                                        <label key={mode} className="flex items-center gap-2 cursor-pointer">
                                            <input type="radio" name="calcMode" value={mode} checked={calculationMode === mode} onChange={() => setCalculationMode(mode)} className="form-radio h-4 w-4 text-sky-600"/>
                                            <span className="text-sm">{
                                                { 'findRemaining': 'Remaining Activity', 'findTime': 'Time Elapsed', 'findInitial': 'Initial Activity', 'findDaughterActivity': 'Daughter Activity' }[mode]
                                            }</span>
                                        </label>
                                    ))}
                                </div>
                            </div>

                            {/* Input Fields Container */}

                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 p-4 border border-slate-200 dark:border-slate-700 rounded-lg">
                                {renderInputField("Initial Activity", initialActivity, setInitialActivity, calculationMode !== 'findInitial')}
                                {renderInputField("Remaining Activity", remainingActivity, setRemainingActivity, calculationMode === 'findTime' || calculationMode === 'findInitial')}
                                {renderInputField("Time Elapsed", timeElapsed, setTimeElapsed, calculationMode !== 'findTime', timeUnit, setTimeUnit, timeUnits)}
                            </div>

                            <button onClick={handleCalculate} className="w-full py-2 bg-sky-600 text-white font-semibold rounded-lg hover:bg-sky-700 transition">Calculate</button>
                            
                            {/* Result and Error Display */}

                            {error && <p className="text-red-500 text-sm text-center">{error}</p>}
                            
                            {result && (
                                <div className="p-4 bg-slate-100 dark:bg-slate-700 rounded-lg">

                                    {/* Renders a simple result (for findRemaining, findTime, findInitial) */}

                                    {result.label ? (
                                        <div className="flex items-center justify-center">
                                            <div className="text-lg font-bold text-center flex-grow">
                                                <span className="font-semibold block text-sm text-slate-500 dark:text-slate-400">{result.label}</span>
                                                <span>{result.value} {result.unit}</span>
                                            </div>
                                            <CopyButton textToCopy={result.value} />
                                        </div>

                                    /* Renders the parent/daughter result (for findDaughterActivity) */

                                    ) : (
                                        <div className="space-y-2">
                                            <div className="flex items-center justify-between">
                                                <div className="text-lg font-bold text-left">
                                                    <span className="font-semibold block text-sm text-slate-500 dark:text-slate-400">Remaining {result.parent.name} Activity</span>
                                                    <span>{result.parent.value}</span>
                                                </div>
                                                <CopyButton textToCopy={result.parent.value} />
                                            </div>
                                            <div className="flex items-center justify-between">
                                                <div className="text-lg font-bold text-left">
                                                    <span className="font-semibold block text-sm text-slate-500 dark:text-slate-400">{result.daughter.name} Activity {result.daughter.isStable ? "(Stable Daughter)" : ""}</span>
                                                    <span>{result.daughter.value}</span>
                                                </div>
                                                <CopyButton textToCopy={result.daughter.value} />
                                            </div>
                                        </div>
                                    )}
                                </div>
                            )}

                            {/* Chart Display Area */}

                            {chartData && <DecayChart chartData={chartData} />}
                        </div>
                    </div>
                </div>
            );
        };

        /**
         * @description A calculator that uses the Bateman equations to model the activity of every
         * nuclide in a full decay series over time.
         * @param {{radionuclides: Array<object>, decaySeriesData: Array<object>}} props
         */

        const DecaySeriesCalculator = ({ radionuclides, decaySeriesData }) => {

            // --- STATE & CONFIGURATION ---

            const [selectedSeriesId, setSelectedSeriesId] = React.useState(decaySeriesData[0].id);
            const [initialActivity, setInitialActivity] = React.useState('100');
            const [timeElapsed, setTimeElapsed] = React.useState('1000');
            const [timeUnit, setTimeUnit] = React.useState('years');
            const [results, setResults] = React.useState([]); // For the results table
            const [chartData, setChartData] = React.useState(null); // For the chart component
            const [error, setError] = React.useState('');
            const [isLoading, setIsLoading] = React.useState(false); // To manage UI during long calculations

            const timeUnits = ['seconds', 'minutes', 'hours', 'days', 'years', 'kiloyears', 'megayears', 'gigayears'];
            const unitConversions = { 'seconds': 1, 'minutes': 60, 'hours': 3600, 'days': 86400, 'years': 31557600, 'kiloyears': 31557600 * 1e3, 'megayears': 31557600 * 1e6, 'gigayears': 31557600 * 1e9 };

            // --- CORE CALCULATION ENGINE ---

            /**
             * Implements the general Bateman equations to find the activity of each nuclide in a decay chain.
             * This function calculates the number of atoms for each nuclide at time t, then converts to activity.
             * @param {Array<object>} chain - The array of nuclide objects in the decay series.
             * @param {number} A1_0 - The initial activity of the parent nuclide (nuclide 1).
             * @param {number} t_seconds - The elapsed time in seconds.
             * @returns {Array<number>} An array of activities for each nuclide in the chain at time t.
             */

            const runBatemanCalculation = (chain, A1_0, t_seconds) => {
                // 1. Get decay constants (λ) for each nuclide in the chain. λ = ln(2) / T½.
                const lambdas = chain.map(step => {
                    const t_half = parseHalfLifeToSeconds(step.halfLife);
                    return t_half === Infinity ? 0 : Math.log(2) / t_half; // λ is 0 for stable nuclides
                });

                if (lambdas[0] === 0) return Array(chain.length).fill(0); // Parent is stable, no decay.

                // 2. Calculate the initial number of atoms of the parent from its activity (N = A/λ).

                const N1_0 = A1_0 / lambdas[0];
                const activities = [];

                // 3. Loop through each nuclide in the chain (i) to calculate its number of atoms, N_i(t).
                for (let i = 0; i < chain.length; i++) {

                    // For stable nuclides (λ=0), activity is always 0.

                    if (lambdas[i] === 0) {
                        activities.push(0);
                        continue;
                    }

                    // For the parent nuclide (i=0), use simple exponential decay: N(t) = N₀ * e^(-λt).

                    if (i === 0) {
                        const N1_t = N1_0 * Math.exp(-lambdas[0] * t_seconds);
                        activities.push(N1_t * lambdas[0]); // A = Nλ
                        continue;
                    }

                    // For all subsequent progeny (i > 0), use the full Bateman equation:
                    // Nᵢ(t) = N₁(0) * (Π_{k=1}^{i-1} λₖ) * (Σ_{j=1}^{i} (e^{-λⱼt} / Π_{k=1, k≠j}^{i} (λₖ - λⱼ)))
                    
                    // First part: Product of parent decay constants: Π_{k=1}^{i-1} λₖ

                    let lambda_product = 1;
                    for (let k = 0; k < i; k++) {
                        lambda_product *= lambdas[k];
                    }

                    // Second part: The summation term: Σ_{j=1}^{i} (...)

                    let sum_term = 0;
                    for (let j = 0; j <= i; j++) {

                        // The denominator inside the sum: Π_{k=1, k≠j}^{i} (λₖ - λⱼ)

                        let denominator_product = 1;
                        for (let k = 0; k <= i; k++) {
                            if (j !== k) {
                                let diff = lambdas[k] - lambdas[j];

                                // Handle the very rare case of identical lambdas to avoid division by zero.

                                denominator_product *= (Math.abs(diff) < 1e-30) ? 1e-30 : diff;
                            }
                        }
                        sum_term += Math.exp(-lambdas[j] * t_seconds) / denominator_product;
                    }

                    // Combine all parts to get the number of atoms for nuclide i at time t.

                    const Ni_t = N1_0 * lambda_product * sum_term;

                    // Convert number of atoms back to activity (A = Nλ).

                    const Ai_t = Ni_t * lambdas[i];
                    activities.push(Ai_t);
                }
                return activities;
            };

            // --- UI HANDLERS & ORCHESTRATION ---

            /**
             * Main handler to orchestrate the calculation process, including validation,
             * calling the Bateman engine, and generating data for the UI.
             */

            const handleCalculate = () => {
                const series = decaySeriesData.find(s => s.id === selectedSeriesId);
                if (!series) {
                    setError('Please select a decay series.');
                    return;
                }
                
                // Validate all numerical inputs

                const A0 = parseFloat(initialActivity);
                const t_input = parseFloat(timeElapsed);
                if (isNaN(A0) || A0 < 0 || isNaN(t_input) || t_input < 0) {
                    setError('Initial activity and time must be non-negative numbers.');
                    setResults([]);
                    setChartData(null);
                    return;
                }
                
                setError('');
                setIsLoading(true);

                // Use a short timeout to allow the UI to update to the 'loading' state
                // before starting the potentially blocking, intensive calculation.

                setTimeout(() => {
                    try {
                        const t_seconds = t_input * unitConversions[timeUnit];
                        
                        // 1. Run the calculation once for the final time point for the results table.

                        const calculatedActivities = runBatemanCalculation(series.chain, A0, t_seconds);
                        const finalResults = series.chain.map((step, i) => ({
                            name: step.nuclide,
                            activity: calculatedActivities[i]
                        }));
                        setResults(finalResults);

                        // 2. Generate data for the activity-vs-time chart.

                        const chartLabels = [];
                        const datasets = series.chain.map((step, i) => ({
                            label: step.nuclide,
                            data: [],
                            borderColor: `hsl(${(i * 360 / Math.min(series.chain.length, 15)) % 360}, 70%, 50%)`,
                            borderWidth: 2,
                            pointRadius: 0,
                            tension: 0.4,
                            hidden: i > 5 // Hide less significant progeny by default for chart clarity
                        }));
                        
                        const steps = 100; // Number of points on the chart
                        for (let i = 0; i <= steps; i++) {
                            const timePoint = (t_input / steps) * i;
                            chartLabels.push(timePoint.toPrecision(2));
                            const timePoint_seconds = timePoint * unitConversions[timeUnit];

                            // This is computationally intensive: must run the full Bateman calculation for each point.

                            const activitiesAtTimePoint = runBatemanCalculation(series.chain, A0, timePoint_seconds);
                            activitiesAtTimePoint.forEach((act, j) => {
                                datasets[j].data.push(act);
                            });
                        }
                        setChartData({ labels: chartLabels, datasets, timeUnit });
                    } catch (e) {
                        setError('An error occurred. Inputs may be too large or small for a stable result.');
                        console.error(e);
                    } finally {
                        setIsLoading(false); // Ensure loading is turned off even if errors occur.
                    }
                }, 50);
            };

            // --- JSX RENDERING ---

            return (
                <div className="p-4 animate-fade-in">
                    <div className="max-w-4xl mx-auto bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg">
                        <h2 className="text-xl font-bold text-slate-800 dark:text-white mb-4">Decay Series Calculator (Bateman)</h2>
                        
                        {/* Input Controls */}

                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end">
                            <div>
                                <label className="block text-sm font-medium text-slate-700 dark:text-slate-300">Decay Series</label>
                                <select value={selectedSeriesId} onChange={e => setSelectedSeriesId(e.target.value)} className="w-full mt-1 p-2 rounded-md bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600">
                                    {decaySeriesData.map(s => <option key={s.id} value={s.id}>{s.name}</option>)}
                                </select>
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-slate-700 dark:text-slate-300">Initial Parent Activity</label>
                                <input type="number" value={initialActivity} onChange={e => setInitialActivity(e.target.value)} className="w-full mt-1 p-2 rounded-md bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600" />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-slate-700 dark:text-slate-300">Time Elapsed</label>
                                <div className="flex gap-2 mt-1">
                                    <input type="number" value={timeElapsed} onChange={e => setTimeElapsed(e.target.value)} className="w-full p-2 rounded-md bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600" />
                                    <select value={timeUnit} onChange={e => setTimeUnit(e.target.value)} className="p-2 rounded-md bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600">
                                        {timeUnits.map(u => <option key={u} value={u}>{u}</option>)}
                                    </select>
                                </div>
                            </div>
                            <button onClick={handleCalculate} disabled={isLoading} className="w-full py-2 bg-sky-600 text-white font-semibold rounded-lg hover:bg-sky-700 transition disabled:bg-sky-800 disabled:cursor-wait">
                                {isLoading ? 'Calculating...' : 'Calculate'}
                            </button>
                        </div>

                        {error && <p className="text-red-500 text-sm text-center mt-4">{error}</p>}
                        
                        {/* Results Display Area */}

                        <div className="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6">
                            {/* Results Table */}
                            <div className="max-h-[400px] overflow-y-auto pr-2">
                                <h3 className="text-lg font-semibold mb-2">Results at {timeElapsed} {timeUnit}</h3>
                                {results.length > 0 ? (
                                    <table className="w-full text-sm text-left">
                                        <thead className="bg-slate-100 dark:bg-slate-700 sticky top-0">
                                            <tr>
                                                <th className="p-2">Nuclide</th>
                                                <th className="p-2">Activity</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {results.map(r => (
                                                <tr key={r.name} className="border-b border-slate-200 dark:border-slate-700">
                                                    <td className="p-2 font-medium">{r.name}</td>
                                                    <td className="p-2">{r.activity.toPrecision(4)}</td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                ) : <p className="text-slate-500 text-center py-4">No results to display.</p>}
                            </div>

                            {/* Chart Area */}

                            <div className="min-h-[300px]">
                                {chartData ? <SeriesDecayChart chartData={chartData} /> : <div className="flex items-center justify-center h-full bg-slate-100 dark:bg-slate-800/50 rounded-lg"><p className="text-slate-500">Chart will be displayed here.</p></div>}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        /**
         * @description A React component that renders a line chart for a decay series using Chart.js.
         * It's designed to display the activity of all nuclides in a chain over time.
         * @param {{chartData: object}} props - The data object for the chart, including labels and datasets.
         */

        const SeriesDecayChart = ({ chartData }) => {
            const chartRef = React.useRef(null);
            const chartInstance = React.useRef(null);

            React.useEffect(() => {

                // Destroy the previous chart instance before creating a new one to prevent memory leaks.

                if (chartInstance.current) {
                    chartInstance.current.destroy();
                }

                if (chartRef.current && chartData) {
                    const ctx = chartRef.current.getContext('2d');
                    chartInstance.current = new Chart(ctx, {
                        type: 'line',
                        data: chartData,
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: 'top',
                                    labels: { boxWidth: 20, font: { size: 10 } }
                                },
                                title: {
                                    display: true,
                                    text: 'Decay Series Activity Over Time'
                                },
                                tooltip: {
                                    mode: 'index', // Show tooltips for all datasets at a given x-index.
                                    intersect: false,
                                }
                            },
                            scales: {
                                x: {
                                    title: { display: true, text: `Time (${chartData.timeUnit})` },
                                    ticks: { maxRotation: 0, autoSkip: true, autoSkipPadding: 20 }
                                },
                                y: {
                                    type: 'logarithmic', // Log scale is essential for viewing wide ranges of activity.
                                    title: { display: true, text: 'Activity (Log Scale)' },
                                    beginAtZero: true,

                                    // Set a very small minimum to prevent log(0) errors, but only if data exists.

                                    min: Math.max(...chartData.datasets.flatMap(d => d.data)) > 0 ? 1e-9 : 0,
                                }
                            }
                        }
                    });
                }

                // Cleanup function to destroy the chart when the component unmounts.

                return () => {
                    if (chartInstance.current) {
                        chartInstance.current.destroy();
                    }
                };
            }, [chartData]); // Re-render the chart whenever chartData changes.

            return <div className="relative h-full"><canvas ref={chartRef}></canvas></div>;
        };

        /**
         * @description A calculator for finding the specific activity of a nuclide from its atomic weight and half-life.
         */

        const SpecificActivityCalculator = () => {
            const [atomicWeight, setAtomicWeight] = React.useState('');
            const [halfLifeValue, setHalfLifeValue] = React.useState('');
            const [halfLifeUnit, setHalfLifeUnit] = React.useState('years');
            const [result, setResult] = React.useState(null);
            const [error, setError] = React.useState('');

            const timeUnits = ['seconds', 'minutes', 'hours', 'days', 'years', 'kiloyears', 'megayears', 'gigayears'];
            const unitMultipliers = { 'seconds': 1, 'minutes': 60, 'hours': 3600, 'days': 86400, 'years': 31557600, 'kiloyears': 31557600 * 1e3, 'megayears': 31557600 * 1e6, 'gigayears': 31557600 * 1e9 };

            const handleCalculate = () => {
                const A = parseFloat(atomicWeight);
                const T_val = parseFloat(halfLifeValue);

                if (isNaN(A) || A <= 0 || isNaN(T_val) || T_val <= 0) {
                    setError('Atomic weight and half-life must be positive numbers.');
                    setResult(null);
                    return;
                }
                setError('');
                
                // Convert half-life to seconds to get the decay constant (λ).

                const T_seconds = T_val * unitMultipliers[halfLifeUnit];
                const lambda = Math.log(2) / T_seconds;
                const Na = 6.02214076e23; // Avogadro's number

                // Formula: Specific Activity (Bq/g) = (λ * Nₐ) / Molar Mass (A)

                const sa_bq_per_g = (lambda * Na) / A;
                const sa_ci_per_g = sa_bq_per_g / 3.7e10; // Convert Bq/g to Ci/g

                setResult({
                    bq: sa_bq_per_g.toPrecision(4),
                    ci: sa_ci_per_g.toPrecision(4)
                });
            };

            return (
                <div className="p-4 animate-fade-in">
                    <div className="max-w-md mx-auto bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg">
                        <h2 className="text-xl font-bold text-slate-800 dark:text-white mb-4">Specific Activity Calculator</h2>
                        <div className="space-y-4">
                            <div>
                                <label className="block text-sm font-medium text-slate-700 dark:text-slate-300">Atomic Weight (g/mol)</label>
                                <input type="number" value={atomicWeight} onChange={e => setAtomicWeight(e.target.value)} placeholder="e.g., 60 for Co-60" className="w-full mt-1 p-2 rounded-md bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600" />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-slate-700 dark:text-slate-300">Half-life</label>
                                <div className="flex gap-2 mt-1">
                                    <input type="number" value={halfLifeValue} onChange={e => setHalfLifeValue(e.target.value)} placeholder="e.g., 5.27" className="w-full p-2 rounded-md bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600" />
                                    <select value={halfLifeUnit} onChange={e => setHalfLifeUnit(e.target.value)} className="p-2 rounded-md bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600">
                                        {timeUnits.map(u => <option key={u} value={u}>{u}</option>)}
                                    </select>
                                </div>
                            </div>
                            <button onClick={handleCalculate} className="w-full py-2 bg-sky-600 text-white font-semibold rounded-lg hover:bg-sky-700 transition">Calculate</button>
                            {error && <p className="text-red-500 text-sm text-center">{error}</p>}
                            {result && (
                                <div className="text-center p-4 bg-slate-100 dark:bg-slate-700 rounded-lg mt-4">
                                    <p className="font-semibold block text-sm text-slate-500 dark:text-slate-400">Calculated Specific Activity</p>
                                    <p className="text-lg font-bold">{result.bq} Bq/g</p>
                                    <p className="text-md font-medium text-slate-600 dark:text-slate-300">({result.ci} Ci/g)</p>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        /**
         * @description A calculator to convert between the mass of a radionuclide and its total activity.
         * @param {{radionuclides: Array<object>}} props
         */

        const MassActivityCalculator = ({ radionuclides }) => {
            const [selectedNuclide, setSelectedNuclide] = React.useState(null);
            const [mass, setMass] = React.useState(''); const [massUnit, setMassUnit] = React.useState('g');
            const [activity, setActivity] = React.useState(''); const [activityUnit, setActivityUnit] = React.useState('Ci');
            const [error, setError] = React.useState('');
            
            const massUnits = { 'g': 1, 'mg': 1e-3, 'µg': 1e-6 };
            const activityUnits = { 'Bq': 1, 'kBq': 1e3, 'MBq': 1e6, 'GBq': 1e9, 'Ci': 3.7e10, 'mCi': 3.7e7, 'µCi': 3.7e4 };

            // Memoized list of nuclides that have specific activity data.

            const nuclidesWithSA = React.useMemo(() => radionuclides.filter(r => r.specificActivity && r.halfLife !== 'Stable').sort((a,b) => a.name.localeCompare(b.name)), [radionuclides]);
            
            /**
             * Handles the calculation in either direction (mass to activity, or activity to mass).
             * @param {'toActivity' | 'toMass'} direction - The direction of the conversion.
             */

            const handleCalculation = (direction) => {
                if (!selectedNuclide) { setError('Please select a radionuclide.'); return; }
                
                const saBqPerG = parseSpecificActivity(selectedNuclide.specificActivity);
                if (saBqPerG === 0) { setError('Specific activity data is missing or invalid for this nuclide.'); return; }
                
                if (direction === 'toActivity') {
                    const massValue = parseFloat(mass);
                    if(isNaN(massValue) || massValue < 0) { setError('Invalid mass value.'); return; }
                    const massInG = massValue * massUnits[massUnit];
                    const activityInBq = massInG * saBqPerG;
                    const finalActivity = activityInBq / activityUnits[activityUnit];
                    setActivity(finalActivity.toPrecision(4));
                } else { // 'toMass'
                    const activityValue = parseFloat(activity);
                    if(isNaN(activityValue) || activityValue < 0) { setError('Invalid activity value.'); return; }
                    const activityInBq = activityValue * activityUnits[activityUnit];
                    const massInG = activityInBq / saBqPerG;
                    const finalMass = massInG / massUnits[massUnit];
                    setMass(finalMass.toPrecision(4));
                }
                setError('');
            };
            
            return (
                <div className="p-4 animate-fade-in">
                    <div className="max-w-xl mx-auto bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg">
                        <h2 className="text-xl font-bold text-slate-800 dark:text-white mb-4">Mass ↔ Activity Calculator</h2>
                        <div className="space-y-4">
                            <div>
                                <label className="text-sm font-medium text-slate-700 dark:text-slate-300">Radionuclide</label>
                                <select onChange={(e) => setSelectedNuclide(nuclidesWithSA.find(r => r.symbol === e.target.value))} className="w-full mt-1 p-2 rounded-md bg-slate-100 dark:bg-slate-700">
                                    <option>Select a nuclide...</option>
                                    {nuclidesWithSA.map(r => <option key={r.symbol} value={r.symbol}>{r.name} ({r.symbol})</option>)}
                                </select>
                            </div>

                            {/* Mass to Activity Section */}

                            <div className="p-4 border border-slate-200 dark:border-slate-700 rounded-lg">
                                <label className="text-md font-semibold">Mass</label>
                                <div className="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-2">
                                    <input type="number" placeholder="Enter Mass" value={mass} onChange={e => setMass(e.target.value)} className="w-full p-2 rounded-md bg-slate-100 dark:bg-slate-700"/>
                                    <select value={massUnit} onChange={e => setMassUnit(e.target.value)} className="w-full p-2 rounded-md bg-slate-100 dark:bg-slate-700">
                                        {Object.keys(massUnits).map(u => <option key={u} value={u}>{u}</option>)}
                                    </select>
                                </div>
                                <div className="text-center mt-4">
                                    <button onClick={() => handleCalculation('toActivity')} className="w-full sm:w-auto px-4 py-2 bg-sky-600 text-white font-semibold rounded-lg hover:bg-sky-700 transition">↓ Calculate Activity ↓</button>
                                </div>
                            </div>
                            
                            {/* Activity to Mass Section */}

                            <div className="p-4 border border-slate-200 dark:border-slate-700 rounded-lg">
                                <label className="text-md font-semibold">Activity</label>
                                <div className="text-center mt-4">
                                    <button onClick={() => handleCalculation('toMass')} className="w-full sm:w-auto px-4 py-2 bg-sky-600 text-white font-semibold rounded-lg hover:bg-sky-700 transition">↑ Calculate Mass ↑</button>
                                </div>
                                <div className="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4">
                                    <input type="number" placeholder="Enter Activity" value={activity} onChange={e => setActivity(e.target.value)} className="w-full p-2 rounded-md bg-slate-100 dark:bg-slate-700"/>
                                    <select value={activityUnit} onChange={e => setActivityUnit(e.target.value)} className="w-full p-2 rounded-md bg-slate-100 dark:bg-slate-700">
                                        {Object.keys(activityUnits).map(u => <option key={u} value={u}>{u}</option>)}
                                    </select>
                                </div>
                            </div>
                            {error && <p className="text-red-500 text-sm text-center pt-2">{error}</p>}
                        </div>
                    </div>
                </div>
            );
        };

        /**
         * @description A modal dialog that displays the user manual and FAQ content.
         * @param {{isOpen: boolean, onClose: () => void}} props - Controls the visibility of the modal.
         */

        const ManualModal = ({ isOpen, onClose }) => {
            if (!isOpen) return null;

            // Internal component for the static content of the manual to keep JSX clean.

            const ManualContent = () => (
                <div className="prose prose-slate dark:prose-invert max-w-none p-6">
                    <h1 className="text-3xl font-bold mb-4">Radionuclide Lookup Tool: Comprehensive User Manual & FAQ</h1>
                    {/* ... The rest of your detailed manual content ... */}
                </div>
            );

            return (

                // The modal backdrop, which closes the modal when clicked.

                <div className="fixed inset-0 bg-black/60 z-50 flex justify-center items-center p-4" onClick={onClose}>

                    {/* The modal panel itself. e.stopPropagation() prevents a click inside from closing it. */}

                    <div className="bg-white dark:bg-slate-900 w-full max-w-4xl max-h-[90vh] rounded-2xl shadow-2xl flex flex-col" onClick={e => e.stopPropagation()}>
                        <div className="p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                            <h2 className="text-xl font-bold">User Manual & FAQ</h2>
                            <button onClick={onClose} className="p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700">
                                <Icon path={ICONS.clear} className="w-6 h-6" />
                            </button>
                        </div>
                        <div className="overflow-y-auto">
                            <ManualContent />
                        </div>
                    </div>
                </div>
            );
        };

        /**
         * @description The root component of the entire application.
         * It manages all primary state, handles routing between views, and orchestrates all user interactions.
         */

        const App = () => {

            // --- STATE MANAGEMENT ---
            // Core App State

            const [activeView, setActiveView] = React.useState('home');
            const [result, setResult] = React.useState(null); // The currently selected nuclide for display
            const [errorMessage, setErrorMessage] = React.useState('');
            
            // Search & Suggestions State

            const [nuclideName, setNuclideName] = React.useState('');
            const [suggestions, setSuggestions] = React.useState([]);
            const [activeSuggestionIndex, setActiveSuggestionIndex] = React.useState(-1);
            
            // UI State

            const [isManualOpen, setIsManualOpen] = React.useState(false);
            const [isFiltersVisible, setIsFiltersVisible] = React.useState(false);
            const [displayHalfLifeUnit, setDisplayHalfLifeUnit] = React.useState('years');
            const [currentDecaySeriesId, setCurrentDecaySeriesId] = React.useState(null);
            
            // Persistent State (localStorage)

            const [theme, setTheme] = React.useState(() => localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'));
            const [searchHistory, setSearchHistory] = React.useState(() => { try { return JSON.parse(localStorage.getItem('radionuclideSearchHistory') || '[]'); } catch (e) { return []; } });
            
            // Derived/Generated State

            const [randomSuggestions, setRandomSuggestions] = React.useState([]);
            
            // Filter State

            const [sortBy, setSortBy] = React.useState('name');
            const [sortOrder, setSortOrder] = React.useState('asc');
            const [selectedCategory, setSelectedCategory] = React.useState('All');
            const [selectedEmissionType, setSelectedEmissionType] = React.useState('All');
            const [selectedCommonality, setSelectedCommonality] = React.useState('All');
            const [minAlphaEnergy, setMinAlphaEnergy] = React.useState(''); const [maxAlphaEnergy, setMaxAlphaEnergy] = React.useState('');
            const [minBetaEnergy, setMinBetaEnergy] = React.useState(''); const [maxBetaEnergy, setMaxBetaEnergy] = React.useState('');
            const [minGammaEnergy, setMinGammaEnergy] = React.useState(''); const [maxGammaEnergy, setMaxGammaEnergy] = React.useState('');
            const [minHalfLife, setMinHalfLife] = React.useState('');
            const [maxHalfLife, setMaxHalfLife] = React.useState('');
            const [halfLifeFilterUnit, setHalfLifeFilterUnit] = React.useState('years');

            // Refs for DOM elements

            const inputRef = React.useRef(null);
            const suggestionsRef = React.useRef(null);

            // --- SIDE EFFECTS ---
            // Effect to apply the dark/light theme to the HTML element.

            React.useEffect(() => {
                const root = window.document.documentElement;
                root.classList.toggle('dark', theme === 'dark');
                localStorage.setItem('theme', theme);
            }, [theme]);

            // Effect to handle clicks outside the suggestions box to close it.

            React.useEffect(() => {
                const handleClickOutside = (e) => {
                    if (suggestionsRef.current && !suggestionsRef.current.contains(e.target) && inputRef.current && !inputRef.current.contains(e.target)) {
                        setSuggestions([]);
                    }
                };
                document.addEventListener('mousedown', handleClickOutside);
                return () => document.removeEventListener('mousedown', handleClickOutside);
            }, []);

            // Effect to generate a set of random suggestions on initial load.

            React.useEffect(() => {
                const common = radionuclides.filter(n => n.commonality === 'Common');
                setRandomSuggestions([...common].sort(() => 0.5 - Math.random()).slice(0, 5));
            }, []);

            // --- DATA DERIVATION & FILTERING ---

            // Memoized selectors to get unique categories for filter dropdowns.

            const allCategories = React.useMemo(() => ['All', ...[...new Set(radionuclides.map(n => n.category))].sort()], []);
            const allEmissionTypes = React.useMemo(() => ['All', ...[...new Set(radionuclides.flatMap(n => n.emissionType || []))].sort()], []);
            const allCommonalityCategories = React.useMemo(() => ['All', ...[...new Set(radionuclides.map(n => n.commonality).filter(Boolean))].sort()], []);

            // A callback that returns the full list of nuclides after applying all active filters and sorting.

            const getFilteredAndSortedRadionuclides = React.useCallback(() => {
                let filtered = [...radionuclides];
                // Apply filters
                if (selectedCategory !== 'All') { filtered = filtered.filter(n => n.category === selectedCategory); }
                if (selectedEmissionType !== 'All') { filtered = filtered.filter(n => n.emissionType?.includes(selectedEmissionType)); }
                if (selectedCommonality !== 'All') { filtered = filtered.filter(n => n.commonality === selectedCommonality); }
                
                // Helper for energy range filtering

                const filterByEnergyRange = (nuclide, type, min, max) => {
                    const energy = parseEnergyToMeV(nuclide.emissionEnergies?.[type]);
                    if (energy === 0 && (min || max)) return false; // Exclude if it has no energy of this type
                    const minVal = parseFloat(min); const maxVal = parseFloat(max);
                    if (!isNaN(minVal) && !isNaN(maxVal)) return energy >= minVal && energy <= maxVal;
                    if (!isNaN(minVal)) return energy >= minVal; 
                    if (!isNaN(maxVal)) return energy <= maxVal;
                    return true;
                };

                if (minAlphaEnergy || maxAlphaEnergy) filtered = filtered.filter(n => filterByEnergyRange(n, 'alpha', minAlphaEnergy, maxAlphaEnergy));
                if (minBetaEnergy || maxBetaEnergy) filtered = filtered.filter(n => filterByEnergyRange(n, 'beta', minBetaEnergy, maxBetaEnergy));
                if (minGammaEnergy || maxGammaEnergy) filtered = filtered.filter(n => filterByEnergyRange(n, 'gamma', minGammaEnergy, maxGammaEnergy));

                // Apply half-life range filter

                if (minHalfLife || maxHalfLife) {
                    const unitConversions = { 'seconds': 1, 'minutes': 60, 'hours': 3600, 'days': 86400, 'years': 31557600 };
                    const minSeconds = minHalfLife ? parseFloat(minHalfLife) * unitConversions[halfLifeFilterUnit] : null;
                    const maxSeconds = maxHalfLife ? parseFloat(maxHalfLife) * unitConversions[halfLifeFilterUnit] : null;

                        filtered = filtered.filter(n => {
                    const nuclideSeconds = parseHalfLifeToSeconds(n.halfLife);
                if (nuclideSeconds === Infinity && (minSeconds || maxSeconds)) return false; // Exclude stable nuclides from range filters
                    const checkMin = minSeconds ? nuclideSeconds >= minSeconds : true;
                    const checkMax = maxSeconds ? nuclideSeconds <= maxSeconds : true;
                return checkMin && checkMax;
            });
        }

                // Apply sorting

                filtered.sort((a, b) => {
                    let compare = 0;
                    if (sortBy === 'name') compare = a.name.localeCompare(b.name);
                    else if (sortBy === 'halfLife') compare = parseHalfLifeToSeconds(a.halfLife) - parseHalfLifeToSeconds(b.halfLife);
                    else if (sortBy === 'alphaEnergy') compare = parseEnergyToMeV(a.emissionEnergies?.alpha) - parseEnergyToMeV(b.emissionEnergies?.alpha);
                    else if (sortBy === 'betaEnergy') compare = parseEnergyToMeV(a.emissionEnergies?.beta) - parseEnergyToMeV(b.emissionEnergies?.beta);
                    else if (sortBy === 'gammaEnergy') compare = parseEnergyToMeV(a.emissionEnergies?.gamma) - parseEnergyToMeV(b.emissionEnergies?.gamma);
                    return sortOrder === 'asc' ? compare : -compare;
                });
                return filtered;
            }, [selectedCategory, selectedEmissionType, selectedCommonality, sortBy, sortOrder, minAlphaEnergy, maxAlphaEnergy, minBetaEnergy, maxBetaEnergy, minGammaEnergy, maxGammaEnergy, minHalfLife, maxHalfLife, halfLifeFilterUnit]);

            const filteredList = getFilteredAndSortedRadionuclides();

            // --- EVENT HANDLERS ---

            const toggleTheme = () => setTheme(prevTheme => prevTheme === 'light' ? 'dark' : 'light');
            const handleClearHistory = () => { setSearchHistory([]); localStorage.removeItem('radionuclideSearchHistory'); };
            const handleDecaySeriesClick = (seriesId) => { setCurrentDecaySeriesId(seriesId); setActiveView('decaySeries'); };
            
            const updateSearchHistory = (nuclide) => {
                setSearchHistory(prev => {
                    const newHistory = [nuclide, ...prev.filter(item => item.symbol !== nuclide.symbol)];
                    const limitedHistory = newHistory.slice(0, 5); // Keep only the last 5
                    localStorage.setItem('radionuclideSearchHistory', JSON.stringify(limitedHistory));
                    return limitedHistory;
                });
            }

            const handleNuclideSelection = (nuclide) => {
                setNuclideName(nuclide.name);
                setResult(nuclide);
                setSuggestions([]);
                setErrorMessage('');
                setActiveView('home');
                setCurrentDecaySeriesId(null);

                // Automatically choose the best unit for half-life display

                setDisplayHalfLifeUnit(getBestHalfLifeUnit(parseHalfLifeToSeconds(nuclide.halfLife)));
                updateSearchHistory(nuclide);
            };

            const handleNuclideNameChange = (e) => {
                const value = e.target.value;
                setNuclideName(value);
                if (value.length > 0) {
                    const normVal = normalizeString(value);
                    const commonalityOrder = { 'Common': 3, 'Moderate': 2, 'Rare': 1, 'N/A': 0, undefined: 0 };
                    const filtered = radionuclides
                        .filter(n => normalizeString(n.name).includes(normVal) || normalizeString(n.symbol).includes(normVal))
                        .sort((a, b) => {
    // 1. Prioritize "starts with" matches
    const aStartsWith = normalizeString(a.name).startsWith(normVal) || normalizeString(a.symbol).startsWith(normVal);
    const bStartsWith = normalizeString(b.name).startsWith(normVal) || normalizeString(b.symbol).startsWith(normVal);
    if (aStartsWith !== bStartsWith) {
        return aStartsWith ? -1 : 1; // true comes first
    }

    // 2. Prioritize by commonality (descending)
    const orderA = commonalityOrder[a.commonality] || 0;
    const orderB = commonalityOrder[b.commonality] || 0;
    if (orderB !== orderA) {
        return orderB - orderA;
    }

    // 3. Fallback to alphabetical
    return a.name.localeCompare(b.name);
})
                        .slice(0, 10);
                    setSuggestions(filtered);
                } else {
                    setSuggestions([]);
                    setResult(null); // Clear result if search is cleared
                }
            };
            
            const handleLookup = () => {
                setSuggestions([]);
                const normInput = normalizeString(nuclideName);
                const found = radionuclides.find(n => normalizeString(n.name) === normInput || normalizeString(n.symbol) === normInput);
                if (found) {
                    handleNuclideSelection(found);
                } else {
                    setResult(null);
                    setErrorMessage(`Nuclide "${nuclideName}" not found.`);
                    setActiveView('home');
                }
            };

            const handleKeyDown = (e) => {
                if (e.key === 'Enter') {
                    if (activeSuggestionIndex !== -1 && suggestions.length > 0) {
                        handleNuclideSelection(suggestions[activeSuggestionIndex]);
                    } else {
                        handleLookup();
                    }
                } else if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    setActiveSuggestionIndex(prev => (prev < suggestions.length - 1 ? prev + 1 : 0));
                } else if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    setActiveSuggestionIndex(prev => (prev > 0 ? prev - 1 : suggestions.length - 1));
                } else if (e.key === 'Escape') {
                    setSuggestions([]);
                }
            };

            /**
             * The main view router for the application. It selects which component to display
             * based on the `activeView` state.
             */

            const renderActiveView = () => {
                const filterProps = { sortBy, setSortBy, sortOrder, setSortOrder, selectedCategory, setSelectedCategory, allCategories, selectedEmissionType, setSelectedEmissionType, allEmissionTypes, selectedCommonality, setSelectedCommonality, allCommonalityCategories, minAlphaEnergy, setMinAlphaEnergy, maxAlphaEnergy, setMaxAlphaEnergy, minBetaEnergy, setMinBetaEnergy, maxBetaEnergy, setMaxBetaEnergy, minGammaEnergy, setMinGammaEnergy, maxGammaEnergy, setMaxGammaEnergy, minHalfLife, setMinHalfLife, maxHalfLife, setMaxHalfLife, halfLifeFilterUnit, setHalfLifeFilterUnit };
                
                switch (activeView) {
                    case 'database': return <DatabaseView filteredList={filteredList} onNuclideClick={handleNuclideSelection} filterProps={filterProps} isFiltersVisible={isFiltersVisible} setIsFiltersVisible={setIsFiltersVisible} />;
                    case 'calculator': return <DecayCalculator radionuclides={radionuclides} />;
                    case 'seriesCalculator': return <DecaySeriesCalculator radionuclides={radionuclides} decaySeriesData={decaySeriesData} />;
                    case 'equilibrium': return <EquilibriumCalculator radionuclides={radionuclides} />;                    
                    case 'compare': return <ComparisonView radionuclides={radionuclides} onNuclideClick={handleNuclideSelection} onDecaySeriesClick={handleDecaySeriesClick} />;                    
                    case 'massActivity': return <MassActivityCalculator radionuclides={radionuclides} />;
                    case 'specificActivity': return <SpecificActivityCalculator />;
                    case 'doseRate': return <DoseRateCalculator radionuclides={radionuclides} />;
                    case 'shielding': return <ShieldingCalculator radionuclides={radionuclides} />;
                    case 'stayTime': return <StayTimeCalculator radionuclides={radionuclides} />;
                    case 'converter': return <UnitConverter />;
                    case 'decaySeries': return <DecaySeriesViewer seriesId={currentDecaySeriesId} onBack={() => setActiveView('home')} onNuclideClick={handleNuclideSelection} />;
                    case 'home':
                    default: 
                        if (result) {
                            return <div className="p-4"><NuclideCard nuclide={result} onDecaySeriesClick={handleDecaySeriesClick} displayHalfLifeUnit={displayHalfLifeUnit} /></div>;
                        }
                        return <HomePage errorMessage={errorMessage} result={result} randomSuggestions={randomSuggestions} searchHistory={searchHistory} handleNuclideSelection={handleNuclideSelection} handleClearHistory={handleClearHistory} />;
                }
            };
            
            return (
                <ToastProvider>
                    <div className="min-h-screen p-0 sm:p-2 md:p-4 text-slate-800 dark:text-slate-200">
                        <div className="max-w-7xl mx-auto bg-white dark:bg-slate-900/70 rounded-none sm:rounded-2xl shadow-2xl backdrop-blur-lg border-slate-200 dark:border-slate-800">
                            <Header onHelpClick={() => setIsManualOpen(true)} theme={theme} toggleTheme={toggleTheme} />
                            <SearchBar nuclideName={nuclideName} inputRef={inputRef} handleNuclideNameChange={handleNuclideNameChange} handleKeyDown={handleKeyDown} onClear={() => { setNuclideName(''); setSuggestions([]); setResult(null); }} suggestions={suggestions} activeSuggestionIndex={activeSuggestionIndex} suggestionsRef={suggestionsRef} handleNuclideSelection={handleNuclideSelection} />
                            <MainNav activeView={activeView} onNavClick={(view) => { setActiveView(view); setCurrentDecaySeriesId(null); setIsFiltersVisible(false); }} />
                            <main className="min-h-[400px]">
                                {renderActiveView()}
                            </main>
                            <ManualModal isOpen={isManualOpen} onClose={() => setIsManualOpen(false)} />
                        </div>
                    </div>
                </ToastProvider>
            );
        };
        


	/**
	 * @description A searchable dropdown component for selecting items from a large list.
	 * @param {{
	 * options: Array<{name: string, symbol: string, [key: string]: any}>,
	 * onSelect: (symbol: string) => void,
	 * placeholder: string
	 * }} props
	 */
	const SearchableSelect = ({ options, onSelect, placeholder }) => {
	    const [inputValue, setInputValue] = React.useState('');
	    const [isOpen, setIsOpen] = React.useState(false);
	    const [activeIndex, setActiveIndex] = React.useState(-1);
	    const containerRef = React.useRef(null);
	    const listRef = React.useRef(null);

	// Filter and sort options based on user input

	const filteredOptions = React.useMemo(() => {
	    if (!inputValue) return [];
	    const normInput = normalizeString(inputValue);
	
	    // Define the priority order for sorting

	    const commonalityOrder = { 'Common': 3, 'Moderate': 2, 'Rare': 1 };
    
	    return options
	        .filter(opt => normalizeString(opt.name).includes(normInput) || normalizeString(opt.symbol).includes(normInput))

.sort((a, b) => {
    // 1. Prioritize "starts with" matches
    const aStartsWith = normalizeString(a.name).startsWith(normInput) || normalizeString(a.symbol).startsWith(normInput);
    const bStartsWith = normalizeString(b.name).startsWith(normInput) || normalizeString(b.symbol).startsWith(normInput);
    if (aStartsWith !== bStartsWith) {
        return aStartsWith ? -1 : 1; // true comes first
    }

    // 2. Prioritize by commonality (descending)
    const orderA = commonalityOrder[a.commonality] || 0;
    const orderB = commonalityOrder[b.commonality] || 0;
    if (orderB !== orderA) {
        return orderB - orderA;
    }
    
    // 3. Fallback to alphabetical
    return a.name.localeCompare(b.name);
})





	        .slice(0, 10); // Limit to top 10 results
	}, [inputValue, options]);
	    
	    // Handle clicks outside to close the dropdown

	    React.useEffect(() => {
	        const handleClickOutside = (event) => {
	            if (containerRef.current && !containerRef.current.contains(event.target)) {
	                setIsOpen(false);
	            }
	        };
	        document.addEventListener('mousedown', handleClickOutside);
	        return () => document.removeEventListener('mousedown', handleClickOutside);
	    }, []);
    
	    // Handle keyboard navigation

	    const handleKeyDown = (e) => {
	        if (filteredOptions.length === 0) return;
	        if (e.key === 'ArrowDown') {
	            e.preventDefault();
	            setActiveIndex(prev => (prev < filteredOptions.length - 1 ? prev + 1 : 0));
	        } else if (e.key === 'ArrowUp') {
	            e.preventDefault();
	            setActiveIndex(prev => (prev > 0 ? prev - 1 : filteredOptions.length - 1));
	        } else if (e.key === 'Enter') {
	            if (activeIndex > -1 && filteredOptions[activeIndex]) {
	                handleSelect(filteredOptions[activeIndex]);
	            } else if (filteredOptions.length > 0) {
        
	        	// If user just types and hits enter without navigating, select the first item.

        	        handleSelect(filteredOptions[0]);
       		     }
	        } else if (e.key === 'Escape') {
	            setIsOpen(false);
	        }
	    };
    
	    // Scroll the active item into view
	
	    React.useEffect(() => {
	        if (activeIndex !== -1 && listRef.current?.children[activeIndex]) {
	            listRef.current.children[activeIndex].scrollIntoView({ block: 'nearest' });
	        }
	    }, [activeIndex]);

	    const handleSelect = (option) => {
	        onSelect(option.symbol);
	        setInputValue('');
	        setIsOpen(false);
	        setActiveIndex(-1);
	    };

	    return (
	        <div className="relative w-full" ref={containerRef}>
	            <div className="relative">
	                <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
	                     <Icon path={ICONS.search} className="w-5 h-5 text-slate-400" />
	                </div>
	                <input
	                    type="text"
	                    value={inputValue}
	                    onChange={(e) => {
	                        setInputValue(e.target.value);
	                        setIsOpen(true);
	                        setActiveIndex(-1); // Reset index on new input
	                    }}
	                    onKeyDown={handleKeyDown}
	                    onFocus={() => { if(inputValue) setIsOpen(true); }}
	                    placeholder={placeholder}
	                    className="w-full p-2 pl-10 rounded-md bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 focus:outline-none focus:ring-2 focus:ring-sky-500"
	                    autoComplete="off"
	                />
	            </div>
	            {isOpen && filteredOptions.length > 0 && (
	                <ul ref={listRef} className="absolute z-30 w-full mt-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-lg max-h-60 overflow-y-auto">
        	            {filteredOptions.map((option, index) => (
	                        <li
	                            key={option.symbol}
	                            onClick={() => handleSelect(option)}
	                            onMouseEnter={() => setActiveIndex(index)}
	                            className={`p-3 cursor-pointer text-slate-700 dark:text-slate-200 hover:bg-sky-100 dark:hover:bg-sky-900 ${
	                                index === activeIndex ? 'bg-sky-100 dark:bg-sky-900' : ''
	                            }`}
	                        >
	                            {option.name} ({option.symbol})
	                        </li>
	                    ))}
	                </ul>
	            )}
	        </div>
	    );
	};



	/**
 	 * @description A view for comparing multiple radionuclides side-by-side in a table.
 	 * Users can add or remove nuclides from the comparison.
 	 * @param {{
 	 * radionuclides: Array<object>,
 	 * onNuclideClick: (nuclide: object) => void
 	 * }} props - Component props.
 	 * @param {Array<object>} props.radionuclides - The full list of available radionuclides for the selector.
 	 * @param {(nuclide: object) => void} props.onNuclideClick - Handler to navigate to the main detail view for a nuclide when its name is clicked in the table header.
 	 */

        const ComparisonView = ({ radionuclides, onNuclideClick }) => {
            const [comparisonList, setComparisonList] = React.useState([]);

            // Memoize the sorted list of nuclides for the dropdown menu
            const sortedNuclides = React.useMemo(() =>
                [...radionuclides].sort((a, b) => a.name.localeCompare(b.name)),
                [radionuclides]
            );

            // Adds a selected nuclide to the comparison table

            const handleAddNuclide = (symbol) => {
                if (symbol && !comparisonList.find(n => n.symbol === symbol)) {
                    const nuclideToAdd = radionuclides.find(n => n.symbol === symbol);
                    if (nuclideToAdd) {
                        setComparisonList(prevList => [...prevList, nuclideToAdd]);
                    }
                }
            };
            
            // Removes a nuclide from the comparison table by its symbol

            const handleRemoveNuclide = (symbol) => {
                setComparisonList(prevList => prevList.filter(n => n.symbol !== symbol));
            };

            // Defines the properties to display as rows in the table

            const propertiesToCompare = [
                { label: 'Half-life', key: 'halfLife' },
                { label: 'Emission Type(s)', key: 'emissionType', format: (val) => val?.join(', ') || 'N/A' },
                { label: 'Alpha Energy (MeV)', key: 'emissionEnergies', format: (val) => val?.alpha?.[0]?.split(' ')[0] || 'N/A' },
                { label: 'Beta Energy (MeV)', key: 'emissionEnergies', format: (val) => val?.beta?.[0]?.split(' ')[0] || 'N/A' },
                { label: 'Gamma Energy (MeV)', key: 'emissionEnergies', format: (val) => val?.gamma?.[0]?.split(' ')[0] || 'N/A' },
                { label: 'Specific Activity', key: 'specificActivity' },
                { label: 'Gamma Constant', key: 'gammaConstant' },
                { label: 'Parent', key: 'parent' },
                { label: 'Daughter', key: 'daughter' },
            ];

            return (
                <div className="p-4 animate-fade-in">
                    <div className="max-w-7xl mx-auto bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg">
                        <h2 className="text-xl font-bold text-slate-800 dark:text-white mb-4">Compare Radionuclides</h2>
                        
                        {/* --- Nuclide Selection Controls --- */}



	<div className="flex items-center gap-2 mb-6 p-4 bg-slate-100 dark:bg-slate-800/50 rounded-lg">
	    <SearchableSelect
	        options={sortedNuclides.filter(n => !comparisonList.find(c => c.symbol === n.symbol))}
	        onSelect={handleAddNuclide}
	        placeholder="Search to add a nuclide..."/>
	</div>

                        {/* --- Comparison Table --- */}

                        {comparisonList.length === 0 ? (
                            <div className="text-center p-8 border-2 border-dashed border-slate-300 dark:border-slate-700 rounded-lg">
                                <h3 className="text-lg font-semibold text-slate-700 dark:text-slate-200">The Comparison Table is Empty</h3>
                                <p className="text-slate-500 dark:text-slate-400 mt-2">Use the dropdown above to add radionuclides to compare.</p>
                            </div>
                        ) : (
                            <div className="overflow-x-auto">
                                <table className="w-full min-w-[600px] text-left border-collapse">
                                    <thead>
                                        <tr>
                                            <th className="sticky left-0 bg-slate-50 dark:bg-slate-700 p-3 text-sm font-semibold text-slate-600 dark:text-slate-300 border-b border-slate-200 dark:border-slate-600">Property</th>
                                            {comparisonList.map(nuclide => (
                                                <th key={nuclide.symbol} className="p-3 text-sm font-semibold text-slate-800 dark:text-white border-b border-slate-200 dark:border-slate-600">
                                                    <div className="flex justify-between items-center">
                                                        <span className="cursor-pointer hover:text-sky-500" onClick={() => onNuclideClick(nuclide)}>
                                                            {nuclide.name}
                                                        </span>
                                                        <div className="flex items-center">
                                                            <a href={`https://en.wikipedia.org/wiki/${nuclide.name.replace(/ /g, '_')}`} target="_blank" rel="noopener noreferrer" title="View on Wikipedia" className="ml-2 text-slate-400 hover:text-sky-500">
                                                                {/* Link Icon SVG */}
                                                                <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" /></svg>
                                                            </a>
                                                            <button onClick={() => handleRemoveNuclide(nuclide.symbol)} className="ml-2 text-red-500 hover:text-red-700 text-xs font-bold">✕</button>
                                                        </div>
                                                    </div>
                                                </th>
                                            ))}
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {propertiesToCompare.map(prop => (
                                            <tr key={prop.key} className="group hover:bg-slate-50 dark:hover:bg-slate-800/50">
                                                <td className="sticky left-0 bg-white dark:bg-slate-800 group-hover:bg-slate-50 dark:group-hover:bg-slate-800/50 p-3 font-medium text-slate-500 dark:text-slate-400 border-b border-slate-200 dark:border-slate-600">{prop.label}</td>
                                                {comparisonList.map(nuclide => {
                                                    const value = prop.format ? prop.format(nuclide[prop.key]) : (nuclide[prop.key] || 'N/A');
                                                    return (
                                                        <td key={nuclide.symbol} className="p-3 text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-600">
                                                            {value}
                                                        </td>
                                                    );
                                                })}
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

         /**
          * @description A calculator for determining the external dose rate from a gamma-emitting point source.
          * It uses the gamma constant (Γ) and the inverse square law.
          * @param {{radionuclides: Array<object>}} props - Component props.
          * @param {Array<object>} props.radionuclides - The full list of radionuclides, used to populate the selector with only those that have a gammaConstant.
          */

            const DoseRateCalculator = ({ radionuclides }) => {
            const [nuclideSymbol, setNuclideSymbol] = React.useState('');
            const [activity, setActivity] = React.useState('1');
            const [activityUnit, setActivityUnit] = React.useState('mCi');
            const [distance, setDistance] = React.useState('1');
            const [distanceUnit, setDistanceUnit] = React.useState('m');
            const [result, setResult] = React.useState(null);
            const [error, setError] = React.useState('');

            // Filter for nuclides that have a gamma constant, as it's required for this calculation

            const gammaNuclides = React.useMemo(() => 
                radionuclides.filter(n => n.gammaConstant).sort((a,b) => a.name.localeCompare(b.name)),
                [radionuclides]
            );

            // Define conversion factors for units

            const activityFactors = { 'Ci': 1, 'mCi': 1e-3, 'µCi': 1e-6, 'GBq': 1 / 37, 'MBq': 1 / 37000, 'Bq': 1 / 3.7e10 };
            const distanceFactors = { 'm': 1, 'cm': 0.01, 'ft': 0.3048 };

            const handleCalculate = () => {
                const nuclide = gammaNuclides.find(n => n.symbol === nuclideSymbol);
                if (!nuclide) {
                    setError('Please select a radionuclide.');
                    setResult(null);
                    return;
                }
                
                // Parse the gamma constant value from the string (e.g., "1.32 R·m²/hr·Ci")

                const gammaConstant = parseFloat(nuclide.gammaConstant);
                const activityValue = parseFloat(activity);
                const distanceValue = parseFloat(distance);

                if (isNaN(gammaConstant) || isNaN(activityValue) || isNaN(distanceValue) || distanceValue <= 0 || activityValue < 0) {
                    setError('Please enter valid, positive numbers for activity and distance.');
                    setResult(null);
                    return;
                }

                setError('');

                // Convert all inputs to base units used in the gamma constant (Ci and m)

                const activityInCi = activityValue * activityFactors[activityUnit];
                const distanceInM = distanceValue * distanceFactors[distanceUnit];

                // Dose Rate = (Gamma Constant * Activity) / distance^2

                const doseRateR_hr = (gammaConstant * activityInCi) / Math.pow(distanceInM, 2);

                // Convert result to more common units

                setResult({
                    r_hr: doseRateR_hr.toPrecision(3),
                    mrem_hr: (doseRateR_hr * 1000).toPrecision(3), // 1 R ≈ 1 rem; 1 rem = 1000 mrem
                    uSv_hr: (doseRateR_hr * 10000).toPrecision(3) // 1 R ≈ 10 mSv; 1 mSv = 1000 µSv
                });
            };

            return (
                <div className="p-4 animate-fade-in">
                    <div className="max-w-md mx-auto bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg">
                        <h2 className="text-xl font-bold text-slate-800 dark:text-white mb-1">Dose Rate Calculator</h2>
                        <p className="text-sm text-slate-500 dark:text-slate-400 mb-4">For unshielded gamma point sources.</p>

                        <div className="space-y-4">

                            {/* Nuclide Selector */}

                            <div>
                                <label className="block text-sm font-medium text-slate-700 dark:text-slate-300">Radionuclide</label>
                                <select value={nuclideSymbol} onChange={e => setNuclideSymbol(e.target.value)} className="w-full mt-1 p-2 rounded-md bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600">
                                    <option value="">Select a gamma emitter...</option>
                                    {gammaNuclides.map(n => <option key={n.symbol} value={n.symbol}>{n.name} ({n.symbol})</option>)}
                                </select>
                            </div>
                            
                            {/* Activity Input */}

                            <div>
                                <label className="block text-sm font-medium text-slate-700 dark:text-slate-300">Source Activity (A)</label>
                                <div className="flex gap-2 mt-1">
                                    <input type="number" value={activity} onChange={e => setActivity(e.target.value)} className="w-full p-2 rounded-md bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600"/>
                                    <select value={activityUnit} onChange={e => setActivityUnit(e.target.value)} className="p-2 rounded-md bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600">
                                        {Object.keys(activityFactors).map(u => <option key={u} value={u}>{u}</option>)}
                                    </select>
                                </div>
                            </div>

                            {/* Distance Input */}

                             <div>
                                <label className="block text-sm font-medium text-slate-700 dark:text-slate-300">Distance from Source (d)</label>
                                <div className="flex gap-2 mt-1">
                                    <input type="number" value={distance} onChange={e => setDistance(e.target.value)} className="w-full p-2 rounded-md bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600"/>
                                    <select value={distanceUnit} onChange={e => setDistanceUnit(e.target.value)} className="p-2 rounded-md bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600">
                                       {Object.keys(distanceFactors).map(u => <option key={u} value={u}>{u}</option>)}
                                    </select>
                                </div>
                            </div>
                            
                            <button onClick={handleCalculate} className="w-full py-2 bg-sky-600 text-white font-semibold rounded-lg hover:bg-sky-700 transition">Calculate Dose Rate</button>
                            
                            {error && <p className="text-red-500 text-sm text-center">{error}</p>}
                            
                            {result && (
                                <div className="text-center p-4 bg-slate-100 dark:bg-slate-700 rounded-lg mt-4">
                                    <p className="font-semibold block text-sm text-slate-500 dark:text-slate-400">Calculated Dose Rate</p>
                                    <p className="text-2xl font-bold text-sky-600 dark:text-sky-400">{result.mrem_hr} mrem/hr</p>
                                    <p className="text-md font-medium text-slate-600 dark:text-slate-300">({result.uSv_hr} µSv/hr)</p>
                                    <p className="text-xs font-medium text-slate-500 dark:text-slate-400 mt-1">({result.r_hr} R/hr)</p>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        /**
         * @description A calculator to model and chart parent-daughter equilibrium.
         * @param {{radionuclides: Array<object>}} props
         */

        const EquilibriumCalculator = ({ radionuclides }) => {
            // --- STATE MANAGEMENT ---
            const [parentNuclide, setParentNuclide] = React.useState(null);
            const [daughterNuclide, setDaughterNuclide] = React.useState(null);
            const [initialActivity, setInitialActivity] = React.useState('100');
            const [timeElapsed, setTimeElapsed] = React.useState('10');
            const [timeUnit, setTimeUnit] = React.useState('days');
            const [result, setResult] = React.useState(null);
            const [chartData, setChartData] = React.useState(null);
            const [error, setError] = React.useState('');

            const timeUnits = ['seconds', 'minutes', 'hours', 'days', 'years'];

            // Memoized list of valid parent nuclides (those with a radioactive daughter)
            const parentNuclides = React.useMemo(() => {
                return radionuclides.filter(parent => {
                    if (!parent.daughter || parent.halfLife === 'Stable') return false;
                    const daughterName = parent.daughter.split('(')[0].trim();
                    const daughter = radionuclides.find(n => normalizeString(n.name) === normalizeString(daughterName));
                    return daughter && daughter.halfLife !== 'Stable';
                }).sort((a, b) => a.name.localeCompare(b.name));
            }, [radionuclides]);
            
            // --- CALCULATION LOGIC ---
            const handleCalculate = () => {
                if (!parentNuclide || !daughterNuclide) {
                    setError('Please select a valid parent nuclide.');
                    return;
                }
                
                setError('');
                const T1_seconds = parseHalfLifeToSeconds(parentNuclide.halfLife);
                const T2_seconds = parseHalfLifeToSeconds(daughterNuclide.halfLife);
                const N0_parent = parseFloat(initialActivity);
                const t_input = parseFloat(timeElapsed);
                
                if (isNaN(N0_parent) || N0_parent < 0 || isNaN(t_input) || t_input < 0) {
                    setError('Initial activity and time must be non-negative numbers.');
                    return;
                }

                const unitConversions = { 'seconds': 1, 'minutes': 60, 'hours': 3600, 'days': 86400, 'years': 31557600 };
                const t_seconds = t_input * unitConversions[timeUnit];
                const lambda1 = Math.log(2) / T1_seconds;
                const lambda2 = Math.log(2) / T2_seconds;

                // Bateman equation for a 2-nuclide chain
                let A_daughter;
                if (Math.abs(lambda1 - lambda2) < 1e-12) { // Handle case where decay constants are equal
                    A_daughter = N0_parent * lambda1 * t_seconds * Math.exp(-lambda1 * t_seconds);
                } else {
                    A_daughter = (lambda2 / (lambda2 - lambda1)) * N0_parent * (Math.exp(-lambda1 * t_seconds) - Math.exp(-lambda2 * t_seconds));
                }
                const A_parent = N0_parent * Math.exp(-lambda1 * t_seconds);

                setResult({
                    parent: { name: parentNuclide.name, activity: A_parent.toPrecision(4) },
                    daughter: { name: daughterNuclide.name, activity: A_daughter.toPrecision(4) }
                });

                // Generate Chart Data
                const labels = [];
                const parentData = [];
                const daughterData = [];
                const totalTime = t_input; 
                const steps = 100;
                for (let i = 0; i <= steps; i++) {
                    const timePoint = (totalTime / steps) * i;
                    const timePoint_seconds = timePoint * unitConversions[timeUnit];
                    labels.push(timePoint.toFixed(2));
                    parentData.push(N0_parent * Math.exp(-lambda1 * timePoint_seconds));
                    
                    let d_activity;
                     if (Math.abs(lambda1 - lambda2) < 1e-12) {
                        d_activity = N0_parent * lambda1 * timePoint_seconds * Math.exp(-lambda1 * timePoint_seconds);
                    } else {
                        d_activity = (lambda2 / (lambda2 - lambda1)) * N0_parent * (Math.exp(-lambda1 * timePoint_seconds) - Math.exp(-lambda2 * timePoint_seconds));
                    }
                    daughterData.push(d_activity);
                }
                setChartData({ labels, parentData, daughterData, parentName: parentNuclide.name, daughterName: daughterNuclide.name, timeUnit });
            };

            const handleParentChange = (symbol) => {
                const parent = parentNuclides.find(p => p.symbol === symbol);
                if (parent) {
                    setParentNuclide(parent);
                    const daughterName = parent.daughter.split('(')[0].trim();
                    const daughter = radionuclides.find(n => normalizeString(n.name) === normalizeString(daughterName));
                    setDaughterNuclide(daughter);
                } else {
                    setParentNuclide(null);
                    setDaughterNuclide(null);
                }
            };
            
            // --- JSX RENDERING ---

            return (
                <div className="p-4 animate-fade-in">
                    <div className="max-w-lg mx-auto bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg">
                        <h2 className="text-xl font-bold text-slate-800 dark:text-white mb-4">Parent-Daughter Equilibrium Calculator</h2>
                        <div className="space-y-4">
                            <div>
                                <label className="text-sm font-medium text-slate-700 dark:text-slate-300">Parent Nuclide</label>
                                <select onChange={(e) => handleParentChange(e.target.value)} className="w-full mt-1 p-2 rounded-md bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600">
                                    <option value="">Select a parent...</option>
                                    {parentNuclides.map(r => <option key={r.symbol} value={r.symbol}>{r.name}</option>)}
                                </select>
                            </div>
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 p-4 border border-slate-200 dark:border-slate-700 rounded-lg">
                                <div>
                                    <label className="block text-sm font-medium text-slate-700 dark:text-slate-300">Initial Parent Activity</label>
                                    <input type="number" value={initialActivity} onChange={e => setInitialActivity(e.target.value)} className="w-full p-2 mt-1 rounded-md bg-slate-100 dark:bg-slate-700" />
                                </div>
                                <div>
                                    <label className="block text-sm font-medium text-slate-700 dark:text-slate-300">Time Elapsed</label>
                                    <div className="flex gap-2 mt-1">
                                        <input type="number" value={timeElapsed} onChange={e => setTimeElapsed(e.target.value)} className="w-full p-2 rounded-md bg-slate-100 dark:bg-slate-700" />
                                        <select value={timeUnit} onChange={e => setTimeUnit(e.target.value)} className="p-2 rounded-md bg-slate-100 dark:bg-slate-700">
                                            {timeUnits.map(u => <option key={u} value={u}>{u}</option>)}
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <button onClick={handleCalculate} className="w-full py-2 bg-sky-600 text-white font-semibold rounded-lg hover:bg-sky-700 transition">Calculate</button>
                            {error && <p className="text-red-500 text-sm text-center">{error}</p>}
                            {result && (
                                <div className="p-4 bg-slate-100 dark:bg-slate-700 rounded-lg space-y-2">
                                    <p className="font-semibold text-center text-sm text-slate-500 dark:text-slate-400">Activity at {timeElapsed} {timeUnit}</p>
                                    <div className="flex justify-between items-center"><p>{result.parent.name}:</p> <p className="font-bold">{result.parent.activity}</p></div>
                                    <div className="flex justify-between items-center"><p>{result.daughter.name}:</p> <p className="font-bold">{result.daughter.activity}</p></div>
                                </div>
                            )}
                            {chartData && <DecayChart chartData={chartData} />}
                        </div>
                    </div>
                </div>
            );
        };

        /**
         * @description A calculator for external dose rate from a shielded gamma-emitting point source.
         * @param {{radionuclides: Array<object>}} props
         */

        const ShieldingCalculator = ({ radionuclides }) => {
            const [nuclideSymbol, setNuclideSymbol] = React.useState('');
            const [activity, setActivity] = React.useState('1');
            const [activityUnit, setActivityUnit] = React.useState('mCi');
            const [distance, setDistance] = React.useState('1');
            const [distanceUnit, setDistanceUnit] = React.useState('m');
            const [shieldMaterial, setShieldMaterial] = React.useState('Lead');
            const [shieldThickness, setShieldThickness] = React.useState('1');
            const [thicknessUnit, setThicknessUnit] = React.useState('cm');
            const [result, setResult] = React.useState(null);
            const [error, setError] = React.useState('');
            
            // Filter for nuclides that have both gamma constant and HVL data

            const shieldingNuclides = React.useMemo(() =>
                radionuclides.filter(n => n.gammaConstant && HVL_DATA[n.symbol]).sort((a,b) => a.name.localeCompare(b.name)),
                [radionuclides]
            );

            const materials = ['Lead', 'Concrete', 'Steel'];
            const activityFactors = { 'Ci': 1, 'mCi': 1e-3, 'µCi': 1e-6, 'GBq': 1 / 37, 'MBq': 1 / 37000, 'Bq': 1 / 3.7e10 };
            const distanceFactors = { 'm': 1, 'cm': 0.01, 'ft': 0.3048 };
            const thicknessFactors = { 'cm': 1, 'mm': 0.1, 'in': 2.54 };

            const handleCalculate = () => {
                const nuclide = shieldingNuclides.find(n => n.symbol === nuclideSymbol);
                if (!nuclide) {
                    setError('Please select a radionuclide.');
                    setResult(null);
                    return;
                }
                
                const gammaConstant = parseFloat(nuclide.gammaConstant);
                const activityValue = parseFloat(activity);
                const distanceValue = parseFloat(distance);
                const thicknessValue = parseFloat(shieldThickness);
                const hvl = HVL_DATA[nuclide.symbol][shieldMaterial];

                if (isNaN(gammaConstant) || isNaN(activityValue) || isNaN(distanceValue) || isNaN(thicknessValue) || distanceValue <= 0 || activityValue < 0 || thicknessValue < 0) {
                    setError('Please enter valid, positive numbers for all fields.');
                    setResult(null);
                    return;
                }
                setError('');

                const activityInCi = activityValue * activityFactors[activityUnit];
                const distanceInM = distanceValue * distanceFactors[distanceUnit];
                const thicknessInCm = thicknessValue * thicknessFactors[thicknessUnit];

                // 1. Calculate unshielded dose rate
                const unshieldedRate = (gammaConstant * activityInCi) / Math.pow(distanceInM, 2);

                // 2. Calculate shielded dose rate
                const shieldedRate = unshieldedRate * Math.pow(0.5, thicknessInCm / hvl);
                
                setResult({
                    unshielded: (unshieldedRate * 1000).toPrecision(3), // mrem/hr
                    shielded: (shieldedRate * 1000).toPrecision(3) // mrem/hr
                });
            };

            return (
                <div className="p-4 animate-fade-in">
                    <div className="max-w-md mx-auto bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg">
                        <h2 className="text-xl font-bold text-slate-800 dark:text-white mb-1">Gamma Shielding Calculator</h2>
                        <p className="text-sm text-slate-500 dark:text-slate-400 mb-4">For unshielded gamma point sources.</p>
                        <div className="space-y-4">
                            {/* Inputs */}
                            <div className="grid grid-cols-2 gap-4">
                                <div>
                                    <label className="block text-sm font-medium text-slate-700 dark:text-slate-300">Radionuclide</label>
                                    <select value={nuclideSymbol} onChange={e => setNuclideSymbol(e.target.value)} className="w-full mt-1 p-2 rounded-md bg-slate-100 dark:bg-slate-700">
                                        <option value="">Select source...</option>
                                        {shieldingNuclides.map(n => <option key={n.symbol} value={n.symbol}>{n.name}</option>)}
                                    </select>
                                </div>
                                <div>
                                    <label className="block text-sm font-medium text-slate-700 dark:text-slate-300">Activity</label>
                                    <div className="flex"><input type="number" value={activity} onChange={e => setActivity(e.target.value)} className="w-full mt-1 p-2 rounded-l-md bg-slate-100 dark:bg-slate-700"/>
                                        <select value={activityUnit} onChange={e => setActivityUnit(e.target.value)} className="mt-1 p-2 rounded-r-md bg-slate-200 dark:bg-slate-600">
                                            {Object.keys(activityFactors).map(u => <option key={u} value={u}>{u}</option>)}
                                        </select>
                                    </div>
                                </div>
                                 <div>
                                    <label className="block text-sm font-medium text-slate-700 dark:text-slate-300">Distance</label>
                                    <div className="flex"><input type="number" value={distance} onChange={e => setDistance(e.target.value)} className="w-full mt-1 p-2 rounded-l-md bg-slate-100 dark:bg-slate-700"/>
                                        <select value={distanceUnit} onChange={e => setDistanceUnit(e.target.value)} className="mt-1 p-2 rounded-r-md bg-slate-200 dark:bg-slate-600">
                                            {Object.keys(distanceFactors).map(u => <option key={u} value={u}>{u}</option>)}
                                        </select>
                                    </div>
                                </div>
                                <div>
                                    <label className="block text-sm font-medium text-slate-700 dark:text-slate-300">Material</label>
                                    <select value={shieldMaterial} onChange={e => setShieldMaterial(e.target.value)} className="w-full mt-1 p-2 rounded-md bg-slate-100 dark:bg-slate-700">
                                        {materials.map(m => <option key={m} value={m}>{m}</option>)}
                                    </select>
                                </div>
                                <div className="col-span-2">
                                    <label className="block text-sm font-medium text-slate-700 dark:text-slate-300">Shield Thickness</label>
                                    <div className="flex"><input type="number" value={shieldThickness} onChange={e => setShieldThickness(e.target.value)} className="w-full mt-1 p-2 rounded-l-md bg-slate-100 dark:bg-slate-700"/>
                                        <select value={thicknessUnit} onChange={e => setThicknessUnit(e.target.value)} className="mt-1 p-2 rounded-r-md bg-slate-200 dark:bg-slate-600">
                                            {Object.keys(thicknessFactors).map(u => <option key={u} value={u}>{u}</option>)}
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <button onClick={handleCalculate} className="w-full py-2 bg-sky-600 text-white font-semibold rounded-lg hover:bg-sky-700 transition">Calculate</button>
                            {error && <p className="text-red-500 text-sm text-center">{error}</p>}
                            {result && (
                                <div className="text-center p-4 bg-slate-100 dark:bg-slate-700 rounded-lg mt-4 space-y-2">
                                    <div>
                                        <p className="font-semibold block text-sm text-slate-500 dark:text-slate-400">Unshielded Dose Rate</p>
                                        <p className="text-xl font-bold text-slate-600 dark:text-slate-300">{result.unshielded} mrem/hr</p>
                                    </div>
                                    <div className="font-bold text-2xl">↓</div>
                                    <div>
                                        <p className="font-semibold block text-sm text-slate-500 dark:text-slate-400">Shielded Dose Rate</p>
                                        <p className="text-2xl font-bold text-sky-600 dark:text-sky-400">{result.shielded} mrem/hr</p>
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        /**
         * @description A calculator for determining allowable stay time based on dose rate and a dose limit.
         * @param {{radionuclides: Array<object>}} props
         */

        const StayTimeCalculator = ({ radionuclides }) => {
            const [nuclideSymbol, setNuclideSymbol] = React.useState('');
            const [activity, setActivity] = React.useState('1');
            const [activityUnit, setActivityUnit] = React.useState('mCi');
            const [distance, setDistance] = React.useState('1');
            const [distanceUnit, setDistanceUnit] = React.useState('m');
            const [doseLimit, setDoseLimit] = React.useState('2');
            const [result, setResult] = React.useState(null);
            const [error, setError] = React.useState('');

            const gammaNuclides = React.useMemo(() =>
                radionuclides.filter(n => n.gammaConstant).sort((a,b) => a.name.localeCompare(b.name)),
                [radionuclides]
            );

            const activityFactors = { 'Ci': 1, 'mCi': 1e-3, 'µCi': 1e-6, 'GBq': 1 / 37, 'MBq': 1 / 37000, 'Bq': 1 / 3.7e10 };
            const distanceFactors = { 'm': 1, 'cm': 0.01, 'ft': 0.3048 };

            const handleCalculate = () => {
                const nuclide = gammaNuclides.find(n => n.symbol === nuclideSymbol);
                if (!nuclide) {
                    setError('Please select a radionuclide.');
                    setResult(null);
                    return;
                }
                
                const gammaConstant = parseFloat(nuclide.gammaConstant);
                const activityValue = parseFloat(activity);
                const distanceValue = parseFloat(distance);
                const limit = parseFloat(doseLimit);

                if (isNaN(gammaConstant) || isNaN(activityValue) || isNaN(distanceValue) || isNaN(limit) || distanceValue <= 0 || activityValue < 0 || limit <= 0) {
                    setError('Please enter valid, positive numbers for all fields.');
                    setResult(null);
                    return;
                }
                setError('');

                const activityInCi = activityValue * activityFactors[activityUnit];
                const distanceInM = distanceValue * distanceFactors[distanceUnit];

                const doseRateR_hr = (gammaConstant * activityInCi) / Math.pow(distanceInM, 2);
                const doseRate_mrem_hr = doseRateR_hr * 1000; // 1 R/hr ≈ 1000 mrem/hr

                if (doseRate_mrem_hr <= 0) {
                    setError('Calculated dose rate is zero. Stay time is effectively infinite.');
                    setResult(null);
                    return;
                }

                const stayTimeHours = limit / doseRate_mrem_hr;
                const totalMinutes = stayTimeHours * 60;
                const minutes = Math.floor(totalMinutes);
                const seconds = Math.round((totalMinutes - minutes) * 60);

                setResult({
                    doseRate: doseRate_mrem_hr.toPrecision(3),
                    stayTime: `${minutes} min ${seconds} sec`
                });
            };

            return (
                <div className="p-4 animate-fade-in">
                    <div className="max-w-md mx-auto bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg">
                        <h2 className="text-xl font-bold text-slate-800 dark:text-white mb-1">Stay Time Calculator</h2>
                        <p className="text-sm text-slate-500 dark:text-slate-400 mb-4">Calculates time to reach a dose limit.</p>
                        <div className="space-y-4">

                            {/* Inputs */}

                            <div className="p-4 border border-slate-200 dark:border-slate-700 rounded-lg space-y-4">
                                <div>
                                    <label className="block text-sm font-medium">Source Information</label>
                                    <select value={nuclideSymbol} onChange={e => setNuclideSymbol(e.target.value)} className="w-full mt-1 p-2 rounded-md bg-slate-100 dark:bg-slate-700">
                                        <option value="">Select source...</option>
                                        {gammaNuclides.map(n => <option key={n.symbol} value={n.symbol}>{n.name}</option>)}
                                    </select>
                                </div>
                                <div className="grid grid-cols-2 gap-4">
                                    <div>
                                        <label className="block text-xs font-medium">Activity</label>
                                        <div className="flex"><input type="number" value={activity} onChange={e => setActivity(e.target.value)} className="w-full mt-1 p-2 rounded-l-md bg-slate-100 dark:bg-slate-700"/>
                                            <select value={activityUnit} onChange={e => setActivityUnit(e.target.value)} className="mt-1 p-2 rounded-r-md bg-slate-200 dark:bg-slate-600 text-xs">
                                                {Object.keys(activityFactors).map(u => <option key={u} value={u}>{u}</option>)}
                                            </select>
                                        </div>
                                    </div>
                                    <div>
                                        <label className="block text-xs font-medium">Distance</label>
                                        <div className="flex"><input type="number" value={distance} onChange={e => setDistance(e.target.value)} className="w-full mt-1 p-2 rounded-l-md bg-slate-100 dark:bg-slate-700"/>
                                            <select value={distanceUnit} onChange={e => setDistanceUnit(e.target.value)} className="mt-1 p-2 rounded-r-md bg-slate-200 dark:bg-slate-600 text-xs">
                                                {Object.keys(distanceFactors).map(u => <option key={u} value={u}>{u}</option>)}
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div className="p-4 border border-slate-200 dark:border-slate-700 rounded-lg">
                                <label className="block text-sm font-medium">Dose Limit (mrem)</label>
                                <input type="number" value={doseLimit} onChange={e => setDoseLimit(e.target.value)} className="w-full mt-1 p-2 rounded-md bg-slate-100 dark:bg-slate-700"/>
                            </div>
                            <button onClick={handleCalculate} className="w-full py-2 bg-sky-600 text-white font-semibold rounded-lg hover:bg-sky-700 transition">Calculate Stay Time</button>
                            {error && <p className="text-red-500 text-sm text-center">{error}</p>}
                            {result && (
                                <div className="text-center p-4 bg-slate-100 dark:bg-slate-700 rounded-lg mt-4">
                                    <p className="font-semibold block text-sm text-slate-500 dark:text-slate-400">At a dose rate of <span className="font-bold text-slate-700 dark:text-slate-200">{result.doseRate} mrem/hr</span></p>
                                    <p className="font-semibold block text-sm text-slate-500 dark:text-slate-400 mt-2">Maximum Stay Time to receive {doseLimit} mrem is:</p>
                                    <p className="text-2xl font-bold text-sky-600 dark:text-sky-400">{result.stayTime}</p>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

     /**
      * @description A React component that renders a line chart for simple radioactive decay using Chart.js.
      * It can display the decay of a parent nuclide and the in-growth and decay of a single daughter nuclide.
      * @param {{chartData: object}} props - The data object for the chart, including labels and datasets for parent and optional daughter.
      */

        const DecayChart = ({ chartData }) => {
            const chartRef = React.useRef(null);
            const chartInstance = React.useRef(null);

            React.useEffect(() => {
                if (chartInstance.current) {
                    chartInstance.current.destroy();
                }

                if (chartRef.current && chartData) {
                    const ctx = chartRef.current.getContext('2d');
                    chartInstance.current = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: chartData.labels,
                            datasets: [
                                {
                                    label: chartData.parentName,
                                    data: chartData.parentData,
                                    borderColor: '#0284c7', // sky-600
                                    tension: 0.1
                                },
                                ...(chartData.daughterData ? [{
                                    label: chartData.daughterName,
                                    data: chartData.daughterData,
                                    borderColor: '#e11d48', // rose-600
                                    tension: 0.1
                                }] : [])
                            ]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    title: { display: true, text: 'Activity' }
                                },
                                x: {
                                    title: { display: true, text: `Time (${chartData.timeUnit})` }
                                }
                            }
                        }
                    });
                }
                return () => {
                    if (chartInstance.current) {
                        chartInstance.current.destroy();
                    }
                };
            }, [chartData]);

            return <div className="mt-4 h-64"><canvas ref={chartRef}></canvas></div>;
        };

        // Final step: Render the main App component into the DOM.

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
