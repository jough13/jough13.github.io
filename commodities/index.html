<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sortable Radioactive Commodity Lookup Table</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        tailwind.config = {
            darkMode: 'class'
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <link href="style.css" rel="stylesheet">

    <script>
        // Check for dark mode preference before the page loads to prevent flickering
        if (localStorage.getItem('darkMode') === 'enabled' || (!('darkMode' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }
    </script>

</head>

<body class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-300 transition-colors duration-300">
    <div id="toastContainer"></div>
    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden">
            <div class="p-6 border-b border-gray-200 dark:border-gray-700">
                <h1 class="text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white">Radioactive Commodity Lookup</h1>
                <p class="mt-2 text-gray-600 dark:text-gray-400">A searchable and sortable database of items with NRC and DOT exemption values.</p>
            </div>
            <div class="p-6 bg-gray-50 dark:bg-gray-900/50 flex flex-col gap-4">
                <div class="flex flex-col lg:flex-row items-center gap-4 w-full">
                    <div class="w-full lg:flex-grow flex flex-col sm:flex-row items-center gap-4">
                        <div class="relative w-full lg:flex-grow">
                            <input type="text" id="searchInput" placeholder="Search by name, NSN, NIIN..." class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200" autocomplete="off">
                            <button id="clearSearchBtn" class="absolute inset-y-0 right-0 flex items-center pr-3 hidden" title="Clear search">
                                <svg class="h-5 w-5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
                                </svg>
                            </button>
                        </div>
                        <select id="radionuclideFilter" class="px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200 w-full sm:w-auto"></select>
                        <button id="clearFiltersBtn" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 whitespace-nowrap">Clear Filters</button>
                    </div>
                    <div class="flex items-center gap-2 flex-wrap justify-center">
                        <button id="addItemBtn" class="px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600">Add New Item</button>
                        <button id="importCustomBtn" class="px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600">Import Custom</button>
                        <button id="exportCustomBtn" class="px-4 py-2 bg-cyan-700 text-white rounded-lg hover:bg-cyan-800 disabled:bg-gray-400 disabled:cursor-not-allowed" disabled>Export Custom</button>
                        <button id="clearAddedBtn" class="px-4 py-2 bg-indigo-700 text-white rounded-lg hover:bg-indigo-800 disabled:bg-gray-400 disabled:cursor-not-allowed" disabled>Clear Added</button>
                        <button id="disposalRequestBtn" class="px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 disabled:bg-gray-400 disabled:cursor-not-allowed" disabled>Prepare Disposal Request</button>
                        <button id="compareBtn" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed" disabled>Compare</button>
                        <button id="exportSelectionBtn" class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:bg-gray-400 disabled:cursor-not-allowed" disabled>Export Selection</button>
                        <button id="clearSelectionBtn" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 disabled:bg-gray-400 disabled:cursor-not-allowed" disabled>Clear</button>
                    </div>
                </div>
                <div class="flex flex-col sm:flex-row items-center gap-4 sm:gap-6 w-full pt-4 border-t border-gray-200 dark:border-gray-700">
                    <div class="flex items-center gap-4">
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="checkbox" id="nrcExemptFilter" class="form-checkbox h-5 w-5 text-blue-600 rounded">
                            <span class="text-gray-700 dark:text-gray-300">NRC Exempt Only</span>
                        </label>
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="checkbox" id="dotExemptFilter" class="form-checkbox h-5 w-5 text-blue-600 rounded">
                            <span class="text-gray-700 dark:text-gray-300">DOT Exempt Only</span>
                        </label>
                    </div>
                    <div class="flex-grow"></div>
                    <div class="flex items-center gap-2 sm:gap-3">
                        <button id="saveSelectionBtn" class="px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 disabled:bg-gray-400 disabled:cursor-not-allowed" disabled>Save</button>
                        <button id="loadSelectionBtn" class="px-4 py-2 bg-teal-500 text-white rounded-lg hover:bg-teal-600 disabled:bg-gray-400 disabled:cursor-not-allowed" disabled>Load</button>
                        <button id="clearSavedBtn" class="px-4 py-2 bg-red-700 text-white rounded-lg hover:bg-red-800 disabled:bg-gray-400 disabled:cursor-not-allowed" disabled>Clear Saved</button>
                        <button id="helpBtn" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600">Help</button>
                        <button id="resetAppBtn" class="px-4 py-2 bg-red-800 text-white rounded-lg hover:bg-red-900 ml-2">Reset App</button>
                    </div>
                    <div class="flex items-center gap-2 sm:gap-3">
                        <span class="font-medium text-sm sm:text-base text-gray-700 dark:text-gray-300">Ci</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="unitToggle">
                            <span class="slider"></span>
                        </label>
                        <span class="font-medium text-sm sm:text-base text-gray-700 dark:text-gray-300">Bq</span>
                    </div>
                     <div class="flex items-center gap-2 sm:gap-3">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-700 dark:text-gray-300"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg>
                        <label class="toggle-switch">
                            <input type="checkbox" id="darkModeToggle">
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
            </div>
<div class="w-full">
            <div class="overflow-x-auto max-h-[75vh] fade-right">
                <table id="lookupTable" class="w-full text-sm text-gray-600 dark:text-gray-400">
                    <thead class="text-xs text-gray-700 dark:text-gray-400 uppercase bg-gray-100 dark:bg-gray-700 sticky-header">
                        <tr>
                            <th scope="col" class="px-6 py-3 text-center">
                                <input type="checkbox" id="selectAllCheckbox" class="form-checkbox h-5 w-5 text-blue-600 rounded">
                            </th>
                            <th scope="col" class="px-6 py-3 sortable text-center" onclick="sortTable('name')" role="button" tabindex="0">Name or Nomenclature<span class="sort-arrow"></span></th>
                            <th scope="col" class="px-6 py-3 sortable text-center" onclick="sortTable('nsn')" role="button" tabindex="0">National Stock # (NSN)<span class="sort-arrow"></span></th>
                            <th scope="col" class="px-6 py-3 sortable text-center" onclick="sortTable('niin')" role="button" tabindex="0">NIIN<span class="sort-arrow"></span></th>
                            <th scope="col" class="px-6 py-3 sortable text-center" onclick="sortTable('radionuclide')" role="button" tabindex="0">Radionuclide<span class="sort-arrow"></span></th>
                            <th id="activityHeader" scope="col" class="px-6 py-3 sortable text-center" onclick="sortTable('activity_val')" role="button" tabindex="0">Activity<span class="sort-arrow"></span></th>
                            <th id="nrcExemptionHeader" scope="col" class="px-6 py-3 sortable text-center" onclick="sortTable('nrc_exemption_val')" role="button" tabindex="0">NRC Exemption<span class="sort-arrow"></span></th>
                            <th id="dotExemptionHeader" scope="col" class="px-6 py-3 sortable text-center" onclick="sortTable('dot_exemption_val')" role="button" tabindex="0">DOT Exemption<span class="sort-arrow"></span></th>
                            <th id="un2911Header" scope="col" class="px-6 py-3 sortable text-center" onclick="sortTable('un2911_limit_val')" role="button" tabindex="0">UN 2911 Limit (per item)<span class="sort-arrow"></span></th>
                            <th id="un2911PkgHeader" scope="col" class="px-6 py-3 sortable text-center" onclick="sortTable('un2911_pkg_limit_val')" role="button" tabindex="0">UN 2911 Limit (per package)<span class="sort-arrow"></span></th>
                        </tr>
                    </thead>
                    <tbody class="dark:divide-gray-700">
                        <tr id="loadingStateRow">
                            <td colspan="10" class="text-center p-16">
                                <div class="flex justify-center items-center gap-4">
                                    <svg class="spinner h-8 w-8 text-blue-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                    </svg>
                                    <span class="text-lg font-medium text-gray-600 dark:text-gray-400">Loading data...</span>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
</div>
             <div id="noResults" class="hidden p-6 text-center text-gray-500 dark:text-gray-400"></div>
        </div>
        <footer class="text-center mt-6 text-sm text-gray-500 dark:text-gray-400">
            <p>Data provided for informational purposes. NRC values from 10 CFR 30.71. DOT values from 49 CFR § 173.425, § 173.435, & § 173.436.</p>
            <p class="mt-2">Version 2.0 | Last Updated: September 8, 2025</p>
        </footer>
    </div>

    <div id="compareModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center p-4 z-50" role="dialog" aria-modal="true" aria-labelledby="compareModalTitle">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-full overflow-y-auto">
            <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
                <h2 id="compareModalTitle" class="text-xl font-bold text-gray-900 dark:text-white">Compare Selected Items</h2>
                <button id="closeModalBtn" class="text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 text-3xl" aria-label="Close">&times;</button>
            </div>
            <div id="compareContent" class="p-6"></div>
        </div>
    </div>

    <div id="detailModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center p-4 z-50" role="dialog" aria-modal="true" aria-labelledby="detailModalTitle">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-lg">
            <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
                <h2 id="detailModalTitle" class="text-xl font-bold text-gray-900 dark:text-white">Item Details</h2>
                <button id="closeDetailModalBtn" class="text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 text-3xl" aria-label="Close">&times;</button>
            </div>
            <div id="detailContent" class="p-6"></div>
            <div id="detailActions" class="p-4 border-t dark:border-gray-700 flex justify-between items-center"></div>
        </div>
    </div>

    <div id="disposalRequestModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center p-4 z-50" role="dialog" aria-modal="true" aria-labelledby="disposalRequestModalTitle">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col">
            <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
                <h2 id="disposalRequestModalTitle" class="text-xl font-bold text-gray-900 dark:text-white">Prepare Disposal Request</h2>
                <button id="closeDisposalRequestModalBtn" class="text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 text-3xl" aria-label="Close">&times;</button>
            </div>
            <div id="disposalRequestContent" class="p-6 overflow-y-auto"></div>
		<div class="p-4 border-t dark:border-gray-700 flex justify-between items-center gap-4">
		    <button id="showInstructionsBtn" type="button" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600">Submission Instructions</button>
    
		    <div class="flex justify-end gap-4">
		        <button id="generateMemoBtn" type="button" class="px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600">Generate Memo</button>
        		<button id="exportCsvBtn" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">Export as .csv</button>
		        <button id="printRequestBtn" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Generate & Print Request</button>
		    </div>
		</div>
        </div>
    </div>

    <div id="helpModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center p-4 z-50" role="dialog" aria-modal="true" aria-labelledby="helpModalTitle">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col">
            <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
                <h2 id="helpModalTitle" class="text-xl font-bold text-gray-900 dark:text-white">User Guide</h2>
                <button id="closeHelpModalBtn" class="text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 text-3xl" aria-label="Close">&times;</button>
            </div>
            <div class="p-6 overflow-y-auto">
                <div class="prose prose-lg dark:prose-invert max-w-none space-y-4">
                    <div>
                        <h2 class="!mb-2 font-bold">1. Overview</h2>
                        <p>This tool is a dynamic, searchable database designed to help you quickly look up information on various radioactive commodities. You can search, sort, and filter a comprehensive list of items, view their activity levels in different units, and compare them against key regulatory limits from the NRC and DOT.</p>
                    </div>
                    <hr class="dark:border-gray-600">
                    <div>
                        <h2 class="!mb-2 font-bold">2. Core Features</h2>
                        <div class="space-y-4 pl-4">
                            <div>
                                <h3 class="!mt-4 !mb-1 font-bold">2.1 Searching and Filtering</h3>
                                <p>You have several powerful tools to narrow down the list to find exactly what you're looking for:</p>
                                <ul>
                                    <li><strong>Text Search:</strong> Simply type in the search bar to filter by <strong>Name</strong>, <strong>NSN</strong>, or <strong>NIIN</strong>. The table will update in real-time as you type.</li>
                                    <li><strong>Radionuclide Filter:</strong> Use the dropdown menu to display only items containing a specific radionuclide. Select "All Radionuclides" to clear this filter.</li>
                                    <li><strong>Exemption Filters:</strong>
                                        <ul>
                                            <li><strong>NRC Exempt Only:</strong> Check this box to show only items whose activity is at or below the NRC exemption limit.</li>
                                            <li><strong>DOT Exempt Only:</strong> Check this box to show only items whose activity is at or below the DOT exemption limit for consignments.</li>
                                        </ul>
                                    </li>
                                </ul>
                                <p>All filters work together, allowing you to create highly specific queries.</p>
                            </div>
                            <div>
                                <h3 class="!mt-4 !mb-1 font-bold">2.2 Sorting</h3>
                                <p>Every column in the table is sortable.</p>
                                <ul>
                                    <li><strong>Click a column header once</strong> to sort it in ascending order (A-Z, 0-9).</li>
                                    <li><strong>Click the same header again</strong> to sort in descending order (Z-A, 9-0). An arrow (▲ or ▼) will appear to indicate the current sort direction.</li>
                                </ul>
                            </div>
                            <div>
                                <h3 class="!mt-4 !mb-1 font-bold">2.3 Unit Conversion & Dark Mode</h3>
                                <ul>
                                    <li><strong>Ci/Bq Toggle:</strong> Use the toggle switch to instantly convert all activity and limit values between traditional units (Curies) and SI units (Becquerels).</li>
                                    <li><strong>Dark Mode:</strong> Click the sun/moon icon toggle to switch between light and dark themes for comfortable viewing. Your preference will be saved in your browser.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <hr class="dark:border-gray-600">
                    <div>
                        <h2 class="!mb-2 font-bold">3. Interactive Tools</h2>
                        <div class="space-y-4 pl-4">
                            <div>
                                <h3 class="!mt-4 !mb-1 font-bold">3.1 Selecting Items</h3>
                                <p>Click the checkbox in the first column of any row to "select" an item. The row will highlight in yellow. This enables the action buttons at the top of the table.</p>
                            </div>
                            <div>
                                <h3 class="!mt-4 !mb-1 font-bold">3.2 Action Buttons</h3>
                                <p>Once you have selected one or more items, the following buttons will become active:</p>
                                <ul>
                                    <li><strong>Add New Item:</strong> Opens a form to add a custom item to the table.</li>
                                    <li><strong>Import/Export Custom:</strong> Save your custom-added items to a file or load them from a file. This is useful for backups or sharing with others.</li>
                                    <li><strong>Clear Added:</strong> Removes all custom items you have added.</li>
                                    <li><strong>Prepare Disposal Request:</strong> (Requires 1+ items) Opens a form to generate a Low-Level Radioactive Waste (LLRW) disposal request. This form includes a live package analysis to determine shipping requirements.</li>
                                    <li><strong>Compare:</strong> (Requires 2+ items) Opens a pop-up that displays a side-by-side comparison of the selected items.</li>
                                    <li><strong>Export Selection:</strong> (Requires 1+ items) Downloads a <code>.csv</code> file of the selected items, with values reflecting the current Ci/Bq unit setting.</li>
                                    <li><strong>Clear:</strong> (Requires 1+ items) Instantly deselects all checked items.</li>
                                    <li><strong>Save:</strong> (Requires 1+ items) Stores your current selection in your browser's local storage so you can return to it later.</li>
                                    <li><strong>Load:</strong> (Requires a saved selection) Clears any current selections and restores your previously saved group.</li>
                                    <li><strong>Clear Saved:</strong> Removes a saved selection from your browser's memory.</li>
                                </ul>
                            </div>
                            <div>
                                <h3 class="!mt-4 !mb-1 font-bold">3.3 Detail View</h3>
                                <p>Click anywhere on a row (except the "Select" column) to open a detailed pop-up view for that specific item. This view shows:</p>
                                <ul>
                                    <li>NSN and NIIN for easy copying.</li>
                                    <li>A direct link to look up the item on ISO-Group.com.</li>
                                    <li>A clear, color-coded comparison of the item's activity against all relevant regulatory limits (NRC, DOT, UN 2911).</li>
                                    <li>A clickable info icon <svg class="inline-block w-4 h-4 text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" /></svg> next to each limit for a plain-language explanation.</li>
                                </ul>
                            </div>
                            <div>
                                <h3 class="!mt-4 !mb-1 font-bold">3.4 Disposal Request Form</h3>
                                <p>This is the most powerful feature for practical use. After selecting one or more items and clicking "Prepare Disposal Request," a modal appears where you can:</p>
                                <ol>
                                    <li><strong>Fill in Command and POC info:</strong> Provide details about your command and at least two points of contact.</li>
                                    <li><strong>Complete Item Details:</strong> The form will pre-populate with your selected items. Fill in the remaining information for each item type, such as quantity, serial number, and physical description.</li>
                                    <li><strong>Review Package Analysis:</strong> At the bottom of the form, a live analysis calculates the total package activity and determines the correct shipping category based on the sum-of-fractions rule.</li>
                                    <li><strong>Specify Pickup Location:</strong> Enter the address and building number for the waste pickup.</li>
                                    <li><strong>Generate & Print:</strong> Click the "Generate & Print Request" button to create a formatted document ready for printing and submission.</li>
                                </ol>
                            </div>
                            <div>
                                <h3 class="!mt-4 !mb-1 font-bold">3.5 Package Analysis Explained</h3>
                                <p>The "Package Analysis" section in the disposal request form automatically calculates the shipping requirements for your package based on DOT regulations (49 CFR). It uses the <strong>Sum of the Fractions Rule</strong> to determine if multiple different radionuclides in the same package collectively exceed a limit.</p>
                                <p>Here’s what the classifications mean:</p>
                                <ul>
                                    <li><strong>Exempt:</strong> The total activity in the package is very low. The sum of fractions for the Exempt consignment limit is ≤ 1. The package is exempt from most shipping regulations.</li>
                                    <li><strong>Limited Quantity Excepted Package (UN 2911):</strong> The package contains more activity than the exempt limit but is still below the Excepted Package limit. The sum of fractions for the UN 2911 package limit is ≤ 1. This allows for shipment with reduced labeling and paperwork.</li>
                                    <li><strong>Type A Package:</strong> The package exceeds Excepted Package limits but is at or below the Type A limit. The sum of fractions for the Type A (A2) limit is ≤ 1. This is a fully regulated shipment requiring specific Type A packaging, labeling, and shipping papers.</li>
                                    <li><strong>Exceeds Type A:</strong> The total activity exceeds the Type A limit. This shipment requires a more robust Type B package and special arrangements.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <hr class="dark:border-gray-600">
                    <div>
                        <h2 class="!mb-2 font-bold">4. Helpful Links & References</h2>
                        <div class="space-y-4 pl-4">
                            <ul>
                                <li><a href="https://www.nrc.gov/reading-rm/doc-collections/cfr/part030/part030-0071.html" target="_blank" class="text-blue-500 hover:underline">10 CFR § 30.71 - NRC Exempt Concentrations</a></li>
                                <li><a href="https://www.ecfr.gov/current/title-49/subtitle-B/chapter-I/subchapter-C/part-173" target="_blank" class="text-blue-500 hover:underline">49 CFR Part 173 - DOT Shippers General Requirements</a></li>
                                <li><a href="https://www.iso-group.com/nsn-search" target="_blank" class="text-blue-500 hover:underline">ISO-Group NSN Search</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="addItemModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center p-4 z-50" role="dialog" aria-modal="true" aria-labelledby="addItemModalTitle">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-lg">
            <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
                <h2 id="addItemModalTitle" class="text-xl font-bold text-gray-900 dark:text-white">Add Custom Item</h2>
                <button id="closeAddItemModalBtn" class="text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 text-3xl" aria-label="Close">&times;</button>
            </div>
            <div class="p-6">
                <form id="addItemForm" class="space-y-4">
                    <input type="hidden" id="itemEditId">
                    <div>
                        <label for="itemName" class="block mb-1 font-medium">Name or Nomenclature*</label>
                        <input type="text" id="itemName" class="w-full px-3 py-2 rounded border dark:bg-gray-700 dark:border-gray-600" required>
                    </div>
                    <div>
                        <label for="itemNsn" class="block mb-1 font-medium">NSN</label>
                        <input type="text" id="itemNsn" class="w-full px-3 py-2 rounded border dark:bg-gray-700 dark:border-gray-600">
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                        <div class="sm:col-span-1">
                            <label for="itemRadionuclide" class="block mb-1 font-medium">Radionuclide*</label>
                            <select id="itemRadionuclide" class="w-full px-3 py-2 rounded border dark:bg-gray-700 dark:border-gray-600" required></select>
                        </div>
                        <div class="sm:col-span-1">
                            <label for="itemActivity" class="block mb-1 font-medium">Activity*</label>
                            <input type="number" id="itemActivity" class="w-full px-3 py-2 rounded border dark:bg-gray-700 dark:border-gray-600" required step="any">
                        </div>
                        <div class="sm:col-span-1">
                            <label for="itemUnits" class="block mb-1 font-medium">Units*</label>
                            <select id="itemUnits" class="w-full px-3 py-2 rounded border dark:bg-gray-700 dark:border-gray-600" required>
                                <option>Ci</option>
                                <option>mCi</option>
                                <option>µCi</option>
                                <option>nCi</option>
                                <option>pCi</option>
                            </select>
                        </div>
                    </div>

			<div class="p-3 bg-yellow-100 dark:bg-yellow-900/30 border-l-4 border-yellow-500 text-yellow-700 dark:text-yellow-300">
			    <p class="font-bold">Security Notice</p>
			    <p class="text-sm">Do not enter any sensitive, classified, or Controlled Unclassified Information (CUI). All data is stored unencrypted in your browser.</p>
			</div>

                    <p class="text-sm italic text-gray-500 dark:text-gray-400 pt-2">*Note: Custom items are saved to your browser's local storage. Clearing your browser's cache or history may remove any items you have added.</p>
                    <div class="flex justify-end gap-4 pt-4">
                        <button type="button" id="cancelAddItemBtn" class="px-4 py-2 bg-gray-300 dark:bg-gray-600 rounded-lg">Cancel</button>
                        <button type="submit" id="saveItemBtn" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">Save Item</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <input type="file" id="importFileInput" class="hidden" accept=".json">

    <div id="confirmModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center p-4 z-50" role="dialog" aria-modal="true" aria-labelledby="confirmModalText">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md">
            <div class="p-6 text-center">
                <svg class="mx-auto mb-4 text-gray-400 w-12 h-12 dark:text-gray-200" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 11V6m0 8h.01M19 10a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/>
                </svg>
                <h3 id="confirmModalText" class="mb-5 text-lg font-normal text-gray-500 dark:text-gray-400">Are you sure?</h3>
                <button id="confirmModalConfirmBtn" class="text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 dark:focus:ring-red-800 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center mr-2">
                    Yes, I'm sure
                </button>
                <button id="confirmModalCancelBtn" class="text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600">
                    No, cancel
                </button>
            </div>
        </div>
    </div>

    <div id="radionuclideDetailModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center p-4 z-50" role="dialog" aria-modal="true" aria-labelledby="radionuclideModalTitle">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md">
            <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
                <h2 id="radionuclideModalTitle" class="text-xl font-bold text-gray-900 dark:text-white">Radionuclide Details</h2>
                <button id="closeRadionuclideModalBtn" class="text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 text-3xl" aria-label="Close">&times;</button>
            </div>
            <div id="radionuclideContent" class="p-6"></div>
        </div>
    </div>

    <div id="tooltipModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center p-4 z-50" role="dialog" aria-modal="true" aria-labelledby="tooltipModalTitle">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md">
            <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
                <h2 id="tooltipModalTitle" class="text-xl font-bold text-gray-900 dark:text-white"></h2>
                <button id="closeTooltipModalBtn" class="text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 text-3xl" aria-label="Close">&times;</button>
            </div>
            <div id="tooltipContent" class="p-6"></div>
        </div>
    </div>

    <div id="memoModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center p-4 z-50" role="dialog" aria-modal="true" aria-labelledby="memoModalTitle">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col">
            <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
                <h2 id="memoModalTitle" class="text-xl font-bold text-gray-900 dark:text-white">Example Disposal Request Memo</h2>
                <button id="closeMemoModalBtn" class="text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 text-3xl" aria-label="Close">&times;</button>
            </div>
            <div class="p-6 overflow-y-auto">
                <pre id="memoContent" class="whitespace-pre-wrap font-mono text-sm bg-gray-50 dark:bg-gray-900 p-4 rounded-md"></pre>
            </div>
            <div class="p-4 border-t dark:border-gray-700 flex justify-end gap-4">
                <button id="copyMemoBtn" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">Copy Text</button>
            </div>
        </div>
    </div>

    <div id="instructionsModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center p-4 z-50" role="dialog" aria-modal="true" aria-labelledby="instructionsModalTitle">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] flex flex-col">
            <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
                <h2 id="instructionsModalTitle" class="text-xl font-bold text-gray-900 dark:text-white">LLRW Disposal Request Submission Instructions</h2>
                <button id="closeInstructionsModalBtn" class="text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 text-3xl" aria-label="Close">&times;</button>
            </div>
            <div class="p-6 overflow-y-auto prose dark:prose-invert max-w-none">
                <p>To submit a Department of the Navy (DON) request for Low-Level Radioactive Waste (LLRW) disposal, please gather the required documents as follows:</p>
                <ol>
                    <li>
                        <strong>Formal Correspondence (Cover Letter):</strong>
                        <ul>
                            <li>This tool helps you create the required memo. After filling out the form, click the <strong>"Generate Memo"</strong> button to produce a pre-filled sample letter.</li>
                            <li>You can copy this text into a new document for formal signing. The letter can be modified as required by your command.</li>
                            <li><strong>NOTE:</strong> If funding will be command-provided, the letter must be signed by the CO/OIC or an approved designee. Otherwise, the RSO's signature is typically sufficient.</li>
                        </ul>
                    </li>
                    <li>
                        <strong>LLRW Disposal Request Enclosures (Spreadsheet):</strong>
                        <ul>
                            <li>This tool generates the required enclosure spreadsheet for you.</li>
                            <li>Click the <strong>"Export as .csv"</strong> button. This will download an Excel-compatible file containing all the items and details you've entered on this form.</li>
                        </ul>
                    </li>
                    <li>
                        <strong>Review and verify your information:</strong>
                        <ul>
                            <li>Ensure the command points of contact (POCs) you list have knowledge of the LLRW inventory and can coordinate access for the waste broker.</li>
                            <li>The completeness of this information is vital. This tool helps populate the data, but the ultimate responsibility for characterization of the waste belongs to you, the generator. Incomplete or inaccurate information may result in pickup delays.</li>
                        </ul>
                    </li>
                    <li>
                        <strong>Submit the request:</strong>
                        <ul>
                            <li>Once complete, e-mail your LLRW disposal request, including both the signed PDF of your cover letter and the <strong>.csv file</strong> generated by this tool, to:</li>
                            <li><a href="mailto:beth.m.schilke.civ@us.navy.mil">beth.m.schilke.civ@us.navy.mil</a> and <a href="mailto:joseph.a.donakowski.civ@us.navy.mil">joseph.a.donakowski.civ@us.navy.mil</a></li>
                        </ul>
                    </li>
                    <li>
                        <strong>Questions?</strong>
                        <p>If you have any additional questions, contact the LLRW Program Managers:</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 not-prose">
                            <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
                                <h4 class="font-bold">Ms. Beth Schilke</h4>
                                <p>(757) 887-7162</p>
                                <p><a href="mailto:beth.m.schilke.civ@us.navy.mil" class="text-blue-500">beth.m.schilke.civ@us.navy.mil</a></p>
                            </div>
                            <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
                                <h4 class="font-bold">Mr. Joseph Donakowski</h4>
                                <p>(757) 887-7445</p>
                                <p><a href="mailto:joseph.a.donakowski.civ@us.navy.mil" class="text-blue-500">joseph.a.donakowski.civ@us.navy.mil</a></p>
                            </div>
                        </div>
                    </li>
                </ol>
            </div>
        </div>
    </div>

<input type="file" id="importFileInput" class="hidden" accept=".json">
<script src="script.js"></script>

</body>
</html>
